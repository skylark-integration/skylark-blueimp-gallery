{"version":3,"sources":["skylark-ui-album.js"],"names":["factory","globals","absolute","relative","base","stack","split","parts","pop","i","length","push","join","define","require","isAmd","amd","isCmd","exports","map","id","deps","dep","hasOwnProperty","Error","module","args","forEach","apply","window","skylarkjs","skylark","langx","noder","widgets","registry","views","items","Album","Widget","inherit","klassName","options","typeProperty","titleProperty","altTextProperty","urlProperty","srcsetProperty","init","el","this","$el","$","mixin","prototype","_itemFactories","setViewMode","view","mode","viewMode","name","ctor","getItemUrl","item","getItemProperty","getItemTitle","addItems","concat","Array","slice","call","num","trigger","renderItem","callback","type","mimeType","element","render","srcset","setAttribute","isRunnable","playItem","getNestedProperty","obj","property","replace","str","singleQuoteProp","doubleQuoteProp","arrayIndex","dotProp","prop","parseInt","getDataProperty","key","dataset","_","b","toUpperCase","getAttribute","toLowerCase","test","parseJSON","ignore","undefined","ViewBase","Evented","controlsClass","fullScreen","album","hasControls","that","initOptions","container","on","e","hasClass","removeClass","addClass","close","ItemFactoryBase","setTimeout","func","wait","installPlugin","pointer","setting","plugins","ui","q","extend","ImageItemFactory","stretchImages","overrided","callbackWrapper","event","called","target","img","off","backgroundSize","style","background","url","title","altText","createElement","draggable","alt","src","pluginInfo","eventer","VideoItemFactory","videoContentClass","videoLoadingClass","videoPlayingClass","videoPosterProperty","videoSourcesProperty","handleSlide","index","playingVideo","pause","videoInterface","posterImage","source","playMediaControl","isLoading","videoContainerNode","videoContainer","errorArgs","video","document","posterUrl","sources","canPlayType","shift","poster","toggleClass","appendChild","href","controls","seeking","interval","play","clearTimeout","timeout","stop","VimeoPlayer","videoId","playerId","clickToPlay","listeners","loadAPI","playOnReady","scriptTag","apiUrl","scriptTags","getElementsByTagName","parentNode","insertBefore","readyState","onReady","ready","player","addEvent","hasPlayed","onPlaying","onPause","playStatus","playing","insertIframe","iframe","replaceChild","navigator","platform","api","$f","counter","VimeoItemFactory","vimeoVideoIdProperty","vimeoPlayerUrl","vimeoPlayerIdPrefix","vimeoClickToPlay","YouTubePlayer","playerVars","onYouTubeIframeAPIReady","Gallery","checkSeek","stateChange","YT","PlayerState","PAUSED","ENDED","onStateChange","data","PLAYING","onError","playVideo","Player","events","pauseVideo","YouTubeItemFactory","youTubeVideoIdProperty","youTubePlayerVars","wmode","youTubeClickToPlay","SliderView","slidesContainer","titleElement","displayClass","singleClass","leftEdgeClass","rightEdgeClass","playingClass","slideClass","slideLoadingClass","slideErrorClass","slideContentClass","prevClass","nextClass","closeClass","playPauseClass","displayTransition","clearSlides","toggleControlsOnReturn","toggleControlsOnSlideClick","toggleSlideshowOnSpace","enableKeyboardNavigation","closeOnEscape","closeOnSlideClick","closeOnSwipeUpOrDown","emulateTouchEvents","stopTouchEventsPropagation","hidePageScrollbars","disableScroll","carousel","continuous","unloadElements","startSlideshow","slideshowInterval","preloadRange","transitionSpeed","slideshowTransitionSpeed","onopen","onopened","onslide","onslideend","onslidecomplete","onclose","onclosed","console","log","support","elementTests","translateZ","transition","body","getComputedStyle","getPropertyValue","prefix","transform","translate","contain","cover","removeChild","touch","ontouchstart","DocumentTouch","transitions","webkitTransition","end","MozTransition","OTransition","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelRequestAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","list","initStartIndex","initWidget","initEventListeners","ontransitionend","slide","to","speed","direction","naturalDirection","diff","circle","Math","abs","positions","slideWidth","move","animate","getIndex","getNumber","prev","next","time","elements","animationFrameId","add","addSlide","positionSlide","initSlides","resetSlides","empty","unloadAllSlides","slides","handleClose","destroyEventListeners","display","overflow","bodyOverflowStyle","closeHandler","dist","translateX","x","y","translateY","from","left","start","Date","getTime","timer","setInterval","timeElap","clearInterval","floor","preventDefault","returnValue","stopPropagation","cancelBubble","onresize","onmousedown","which","nodeName","originalEvent","touches","pageX","pageY","onmousemove","touchStart","ontouchmove","onmouseup","ontouchend","onmouseout","related","relatedTarget","contains","now","isScrolling","touchDelta","touchDeltaX","indices","scale","unshift","indexForward","indexBackward","distanceForward","distanceBackward","isShortDuration","Number","isValidSlide","isPastBounds","isValidClose","slideHeight","ontouchcancel","oncomplete","srcElement","parent","getNodeIndex","clientHeight","maxHeight","onload","onerror","onkeydown","keyCode","toggleControls","stopImmediatePropagation","toggleSlideshow","handleClick","isTarget","className","onclick","updateEdgeClasses","loadElements","setTitle","firstChild","text","createTextNode","loadElement","proxyListener","limit","min","j","unloadSlide","slidePrototype","cloneNode","width","reload","imagePrototype","elementPrototype","children","clientWidth","len","handleOpen","openHandler","find","first","templates","default","CarouselView","LightBoxView","indicatorContainer","activeIndicatorClass","thumbnailProperty","thumbnailIndicators","createIndicator","thumbnailUrl","thumbnail","indicator","indicatorPrototype","backgroundImage","addIndicator","indicators","setActiveIndicator","activeIndicator","main"],"mappings":"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","file":"../skylark-ui-album.js","sourcesContent":["define('skylark-ui-album/Album',[\r\n\t\"skylark-langx/skylark\",\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-utils/noder\",\r\n\t\"skylark-utils/widgets\"\r\n], function (skylark, langx, noder, widgets) {\r\n\tvar registry = {\r\n\t\tviews: [],\r\n\t\titems: []\r\n\t};\r\n\tvar Album = widgets.Widget.inherit({\r\n\t\tklassName: \"Album\",\r\n\t\toptions: {\r\n\t\t\t// The list object property (or data attribute) with the object type:\r\n\t\t\ttypeProperty: 'type',\r\n\t\t\t// The list object property (or data attribute) with the object title:\r\n\t\t\ttitleProperty: 'title',\r\n\t\t\t// The list object property (or data attribute) with the object alt text:\r\n\t\t\taltTextProperty: 'alt',\r\n\t\t\t// The list object property (or data attribute) with the object URL:\r\n\t\t\turlProperty: 'href',\r\n\t\t\t// The list object property (or data attribute) with the object srcset URL(s):\r\n\t\t\tsrcsetProperty: 'urlset',\r\n\t\t},\r\n\t\t\r\n\t\t/*\r\n\t\t * @param {Element} el The container element. \r\n\t\t */\r\n\t\tinit: function (el, options) {\r\n\t\t\t//this.overrided(el,options);\t\r\n\t\t\tthis.$el = $(el);\r\n\t\t\tthis.el = this.$el[0];\r\n\t\t\tthis.options = langx.mixin({}, Album.prototype.options, options);\r\n\t\t\tthis._itemFactories = {\r\n\r\n\t\t\t};\r\n\t\t\tthis.items = this.options.items;\r\n\t\t\tthis.setViewMode(this.options.view.mode, this.options.view.options);\r\n\t\t},\r\n\r\n\t\tsetViewMode: function (mode, options) {\r\n\t\t\tthis.viewMode = mode;\r\n\t\t\tfor (var i = 0; i < registry.views.length; i++) {\r\n\t\t\t\tif (registry.views[i].name === mode) {\r\n\t\t\t\t\tthis.view = new registry.views[i].ctor(this, options);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetItemUrl: function (item) {\r\n\t\t\treturn Album.getItemProperty(item, this.options.urlProperty);\r\n\t\t},\r\n\r\n\t\tgetItemTitle: function (item) {\r\n\t\t\treturn Album.getItemProperty(item, this.options.titleProperty);\r\n\t\t},\r\n\r\n\t\taddItems: function (items) {\r\n\t\t\tvar i\r\n\t\t\tif (!items.concat) {\r\n\t\t\t\t// Make a real array out of the items to add:\r\n\t\t\t\titems = Array.prototype.slice.call(items);\r\n\t\t\t}\r\n\t\t\tif (!this.items.concat) {\r\n\t\t\t\t// Make a real array out of the Gallery items:\r\n\t\t\t\tthis.items = Array.prototype.slice.call(this.items);\r\n\t\t\t}\r\n\t\t\tthis.items = this.items.concat(items);\r\n\t\t\tthis.num = this.items.length;\r\n\t\t\tthis.trigger(\"itemsChanged\");\r\n\t\t},\r\n\r\n\t\trenderItem: function (item, callback) {\r\n\t\t\tvar type = item && Album.getItemProperty(item, this.options.typeProperty);\r\n\r\n\t\t\tif (type) {\r\n\t\t\t\ttype = type.split('/')[0];\r\n\t\t\t}\r\n\r\n\t\t\tif (!type) {\r\n\t\t\t\t//throw new Error(\"no type \");\r\n\t\t\t\ttype = \"image\";\r\n\t\t\t}\r\n\r\n\t\t\tvar factory = this._itemFactories[type];\r\n\r\n\t\t\tif (!factory) {\r\n\t\t\t\tfor (var i = 0; i < registry.items.length; i++) {\r\n\t\t\t\t\tif (registry.items[i].mimeType === type) {\r\n\t\t\t\t\t\tfactory = this._itemFactories[type] = new registry.items[i].ctor(this);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!factory) {\r\n\t\t\t\tthrow new Error(\"invalid type:\" + type);\r\n\t\t\t}\r\n\r\n\t\t\tvar element = factory.render(item, callback);\r\n\t\t\tvar srcset = Album.getItemProperty(item, this.options.srcsetProperty)\r\n\t\t\tif (srcset) {\r\n\t\t\t\telement.setAttribute('srcset', srcset)\r\n\t\t\t}\r\n\t\t\treturn element;\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t * Check whether a item is runnable.\r\n\t\t * @param {Object} item The item object\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tisRunnable: function (item) {\r\n\r\n\t\t},\r\n\r\n\t\tplayItem: function (item) {\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlangx.mixin(Album, {\r\n\t\tgetNestedProperty: function (obj, property) {\r\n\t\t\tproperty.replace(\r\n\t\t\t\t// Matches native JavaScript notation in a String,\r\n\t\t\t\t// e.g. '[\"doubleQuoteProp\"].dotProp[2]'\r\n\t\t\t\t// eslint-disable-next-line no-useless-escape\r\n\t\t\t\t/\\[(?:'([^']+)'|\"([^\"]+)\"|(\\d+))\\]|(?:(?:^|\\.)([^\\.\\[]+))/g,\r\n\t\t\t\tfunction (str, singleQuoteProp, doubleQuoteProp, arrayIndex, dotProp) {\r\n\t\t\t\t\tvar prop =\r\n\t\t\t\t\t\tdotProp ||\r\n\t\t\t\t\t\tsingleQuoteProp ||\r\n\t\t\t\t\t\tdoubleQuoteProp ||\r\n\t\t\t\t\t\t(arrayIndex && parseInt(arrayIndex, 10))\r\n\t\t\t\t\tif (str && obj) {\r\n\t\t\t\t\t\tobj = obj[prop]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tgetDataProperty: function (obj, property) {\r\n\t\t\tvar key\r\n\t\t\tvar prop\r\n\t\t\tif (obj.dataset) {\r\n\t\t\t\tkey = property.replace(/-([a-z])/g, function (_, b) {\r\n\t\t\t\t\treturn b.toUpperCase()\r\n\t\t\t\t})\r\n\t\t\t\tprop = obj.dataset[key]\r\n\t\t\t} else if (obj.getAttribute) {\r\n\t\t\t\tprop = obj.getAttribute(\r\n\t\t\t\t\t'data-' + property.replace(/([A-Z])/g, '-$1').toLowerCase()\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tif (typeof prop === 'string') {\r\n\t\t\t\t// eslint-disable-next-line no-useless-escape\r\n\t\t\t\tif (\r\n\t\t\t\t\t/^(true|false|null|-?\\d+(\\.\\d+)?|\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/.test(prop)\r\n\t\t\t\t) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn $.parseJSON(prop)\r\n\t\t\t\t\t} catch (ignore) {}\r\n\t\t\t\t}\r\n\t\t\t\treturn prop\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetItemProperty: function (obj, property) {\r\n\t\t\tvar prop = this.getDataProperty(obj, property)\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tprop = obj[property]\r\n\t\t\t}\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tprop = this.getNestedProperty(obj, property)\r\n\t\t\t}\r\n\t\t\treturn prop\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tvar ViewBase = Album.ViewBase = langx.Evented.inherit({\r\n\t\tklassName: \"ViewBase\",\r\n\r\n\t\toptions: {\r\n\t\t\t// The class to add when the gallery controls are visible:\r\n\t\t\tcontrolsClass: 'skylarkui-album-controls',\r\n\t\t\t// Defines if the gallery should open in fullscreen mode:\r\n\t\t\tfullScreen: false\r\n\r\n\t\t},\r\n\r\n\t\tinit: function (album, options) {\r\n\t\t\tvar that = this,\r\n\t\t\t\thasControls;\r\n\t\t\tthis.album = album;\r\n\t\t\tthis.initOptions(options);\r\n\t\t\tif (this.options.fullScreen) {\r\n\t\t\t\tnoder.fullScreen(this.container[0]);\r\n\t\t\t}\r\n\t\t\tthis.album.on(\"item.running\", function (e) {\r\n\t\t\t\tif (that.container.hasClass(that.options.controlsClass)) {\r\n\t\t\t\t\thasControls = true\r\n\t\t\t\t\tthat.container.removeClass(that.options.controlsClass);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thasControls = false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.album.on(\"item.running\", function (e) {\r\n\t\t\t\tif (hasControls) {\r\n\t\t\t\t\tthat.container.addClass(that.options.controlsClass);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\t// Create a copy of the prototype options:\r\n\t\t\tthis.options = langx.mixin({}, ViewBase.prototype.options, options);\r\n\t\t},\r\n\r\n\t\tclose: function () {\r\n\t\t\tif (noder.fullScreen() === this.container[0]) {\r\n\t\t\t\tnoder.fullScreen(false);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tvar ItemFactoryBase = Album.ItemFactoryBase = langx.Evented.inherit({\r\n\t\tklassName: \"ItemFactoryBase\",\r\n\r\n\t\toptions: {\r\n\t\t\t// The list object property (or data attribute) with the object type:\r\n\t\t\ttypeProperty: 'type',\r\n\t\t\t// The list object property (or data attribute) with the object title:\r\n\t\t\ttitleProperty: 'title',\r\n\t\t\t// The list object property (or data attribute) with the object alt text:\r\n\t\t\taltTextProperty: 'alt',\r\n\t\t\t// The list object property (or data attribute) with the object URL:\r\n\t\t\turlProperty: 'href',\r\n\t\t\t// The list object property (or data attribute) with the object srcset URL(s):\r\n\t\t\tsrcsetProperty: 'urlset',\r\n\t\t},\r\n\r\n\t\tinit: function (album, options) {\r\n\t\t\tthis.album = album;\r\n\t\t\tthis.initOptions(options);\r\n\t\t},\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\t// Create a copy of the prototype options:\r\n\t\t\tthis.options = langx.mixin({}, ItemFactoryBase.prototype.options, options);\r\n\t\t},\r\n\r\n\t\tsetTimeout: function (func, args, wait) {\r\n\t\t\tvar that = this\r\n\t\t\treturn (\r\n\t\t\t\tfunc &&\r\n\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\tfunc.apply(that, args || [])\r\n\t\t\t\t}, wait || 0)\r\n\t\t\t)\r\n\t\t},\r\n\r\n\t\tgetNestedProperty: Album.getNestedProperty,\r\n\r\n\t\tgetDataProperty: Album.getDataProperty,\r\n\r\n\t\tgetItemProperty: Album.getItemProperty\r\n\t});\r\n\r\n\tAlbum.installPlugin = function (pointer, setting) {\r\n\t\tvar plugins = registry[pointer];\r\n\t\tif (!plugins) {\r\n\t\t\tthrow new Error(\"Invalid paramerter!\");\r\n\t\t}\r\n\t\tplugins.push(setting);\r\n\t};\r\n\tvar ui = skylark.ui = skylark.ui || {};\r\n\treturn ui.Album = Album;\r\n});\n/* global define, window, document */\r\n\r\ndefine('skylark-ui-album/helper',[\r\n  \"skylark-utils/langx\",\r\n  \"skylark-utils/query\"\r\n], function (langx, q) {\r\n  'use strict'\r\n  q.extend = langx.mixin;\r\n  return q;\r\n});\ndefine('skylark-ui-album/plugins/items/image',[\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-utils/noder\",\r\n\t\"skylark-utils/query\",\r\n\t'../../Album',\r\n], function (langx, noder, $, Album) {\r\n\tvar ImageItemFactory = Album.ItemFactoryBase.inherit({\r\n\t\tklassName: \"ImageItemFactory\",\r\n\t\toptions: {\r\n\t\t\t// Defines if images should be stretched to fill the available space,\r\n\t\t\t// while maintaining their aspect ratio (will only be enabled for browsers\r\n\t\t\t// supporting background-size=\"contain\", which excludes IE < 9).\r\n\t\t\t// Set to \"cover\", to make images cover all available space (requires\r\n\t\t\t// support for background-size=\"cover\", which excludes IE < 9):\r\n\t\t\tstretchImages: false\r\n\t\t},\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\tthis.overrided();\r\n\t\t\tthis.options = langx.mixin(this.options, ImageItemFactory.prototype.options, options);\r\n\t\t},\r\n\r\n\t\trender: function (obj, callback) {\r\n\t\t\tvar that = this,\r\n\t\t\t\timg = noder.createElement(\"img\"),\r\n\t\t\t\talbum = this.album,\r\n\t\t\t\turl = obj,\r\n\t\t\t\tbackgroundSize = this.options.stretchImages,\r\n\t\t\t\tcalled,\r\n\t\t\t\telement,\r\n\t\t\t\ttitle,\r\n\t\t\t\taltText;\r\n\r\n\t\t\tfunction callbackWrapper(event) {\r\n\t\t\t\tif (!called) {\r\n\t\t\t\t\tevent = {\r\n\t\t\t\t\t\ttype: event.type,\r\n\t\t\t\t\t\ttarget: element\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcalled = true\r\n\t\t\t\t\t$(img).off('load error', callbackWrapper)\r\n\t\t\t\t\tif (backgroundSize) {\r\n\t\t\t\t\t\tif (event.type === 'load') {\r\n\t\t\t\t\t\t\telement.style.background = 'url(\"' + url + '\") center no-repeat'\r\n\t\t\t\t\t\t\telement.style.backgroundSize = backgroundSize\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback(event)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof url !== 'string') {\r\n\t\t\t\turl = this.getItemProperty(obj, this.options.urlProperty);\r\n\t\t\t\ttitle = this.getItemProperty(obj, this.options.titleProperty);\r\n\t\t\t\taltText =\r\n\t\t\t\t\tthis.getItemProperty(obj, this.options.altTextProperty) || title;\r\n\t\t\t}\r\n\t\t\tif (backgroundSize === true) {\r\n\t\t\t\tbackgroundSize = 'contain';\r\n\t\t\t}\r\n\t\t\tif (backgroundSize) {\r\n\t\t\t\telement = noder.createElement(\"div\");\r\n\t\t\t} else {\r\n\t\t\t\telement = img;\r\n\t\t\t\timg.draggable = false;\r\n\t\t\t}\r\n\t\t\tif (title) {\r\n\t\t\t\telement.title = title;\r\n\t\t\t}\r\n\t\t\tif (altText) {\r\n\t\t\t\telement.alt = altText;\r\n\t\t\t}\r\n\t\t\t$(img).on('load error', callbackWrapper);\r\n\t\t\timg.src = url\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tvar pluginInfo = {\r\n\t\tname: \"image\",\r\n\t\tmimeType: \"image\",\r\n\t\tctor: ImageItemFactory\r\n\t};\r\n\r\n\tAlbum.installPlugin(\"items\", pluginInfo);\r\n\r\n\treturn pluginInfo;\r\n\r\n});\ndefine('skylark-ui-album/plugins/items/video',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils/noder\",\r\n  \"skylark-utils/eventer\",\r\n  \"skylark-utils/query\",\r\n  '../../Album',\r\n], function (langx, noder, eventer, $, Album) {\r\n\r\n  'use strict'\r\n\r\n  var VideoItemFactory = Album.ItemFactoryBase.inherit({\r\n    klassName: \"VideoItemFactory\",\r\n\r\n    options: {\r\n      // The class for video content elements:\r\n      videoContentClass: 'video-content',\r\n      // The class for video when it is loading:\r\n      videoLoadingClass: 'video-loading',\r\n      // The class for video when it is playing:\r\n      videoPlayingClass: 'video-playing',\r\n      // The list object property (or data attribute) for the video poster URL:\r\n      videoPosterProperty: 'poster',\r\n      // The list object property (or data attribute) for the video sources array:\r\n      videoSourcesProperty: 'sources'\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      this.overrided();\r\n      this.options = langx.mixin(this.options, VideoItemFactory.prototype.options, options);\r\n    },\r\n\r\n    handleSlide: function (index) {\r\n      handleSlide.call(this, index)\r\n      if (this.playingVideo) {\r\n        this.playingVideo.pause()\r\n      }\r\n    },\r\n\r\n    render: function (obj, callback, videoInterface) {\r\n      var that = this\r\n      var options = this.options\r\n      var videoContainerNode = noder.createElement(\"div\")\r\n      var videoContainer = $(videoContainerNode)\r\n      var errorArgs = [{\r\n        type: 'error',\r\n        target: videoContainerNode\r\n      }]\r\n      var video = videoInterface || document.createElement('video')\r\n      var url = this.getItemProperty(obj, options.urlProperty)\r\n      var type = this.getItemProperty(obj, options.typeProperty)\r\n      var title = this.getItemProperty(obj, options.titleProperty)\r\n      var altText =\r\n        this.getItemProperty(obj, this.options.altTextProperty) || title\r\n      var posterUrl = this.getItemProperty(obj, options.videoPosterProperty)\r\n      var posterImage\r\n      var sources = this.getItemProperty(obj, options.videoSourcesProperty)\r\n      var source\r\n      var playMediaControl\r\n      var isLoading\r\n      var hasControls\r\n      videoContainer.addClass(options.videoContentClass)\r\n      if (title) {\r\n        videoContainerNode.title = title\r\n      }\r\n      if (video.canPlayType) {\r\n        if (url && type && video.canPlayType(type)) {\r\n          video.src = url\r\n        } else if (sources) {\r\n          while (sources.length) {\r\n            source = sources.shift()\r\n            url = this.getItemProperty(source, options.urlProperty)\r\n            type = this.getItemProperty(source, options.typeProperty)\r\n            if (url && type && video.canPlayType(type)) {\r\n              video.src = url\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (posterUrl) {\r\n        video.poster = posterUrl\r\n        posterImage = noder.createElement(\"img\")\r\n        $(posterImage).addClass(options.toggleClass)\r\n        posterImage.src = posterUrl\r\n        posterImage.draggable = false\r\n        posterImage.alt = altText\r\n        videoContainerNode.appendChild(posterImage)\r\n      }\r\n      playMediaControl = document.createElement('a')\r\n      playMediaControl.setAttribute('target', '_blank')\r\n      if (!videoInterface) {\r\n        playMediaControl.setAttribute('download', title)\r\n      }\r\n      playMediaControl.href = url\r\n      if (video.src) {\r\n        video.controls = true;\r\n        (videoInterface || $(video))\r\n        .on('error', function () {\r\n            that.setTimeout(callback, errorArgs)\r\n          })\r\n          .on('pause', function () {\r\n            if (video.seeking) return\r\n            isLoading = false\r\n            videoContainer\r\n              .removeClass(that.options.videoLoadingClass)\r\n              .removeClass(that.options.videoPlayingClass)\r\n            that.album.trigger(\"item.pause\", {\r\n              item: that\r\n            });\r\n            delete that.playingVideo\r\n            if (that.interval) {\r\n              that.play()\r\n            }\r\n          })\r\n          .on('playing', function () {\r\n            isLoading = false\r\n            videoContainer\r\n              .removeClass(that.options.videoLoadingClass)\r\n              .addClass(that.options.videoPlayingClass);\r\n\r\n            that.album.trigger(\"item.running\", {\r\n              item: that\r\n            });\r\n          })\r\n          .on('play', function () {\r\n            window.clearTimeout(that.timeout)\r\n            isLoading = true\r\n            videoContainer.addClass(that.options.videoLoadingClass)\r\n            that.playingVideo = video\r\n\r\n            that.album.trigger(\"item.run\", {\r\n              item: that\r\n            });\r\n          })\r\n        $(playMediaControl).on('click', function (event) {\r\n          eventer.stop(event)\r\n          if (isLoading) {\r\n            video.pause()\r\n          } else {\r\n            video.play()\r\n          }\r\n        })\r\n        videoContainerNode.appendChild(\r\n          (videoInterface && videoInterface.element) || video\r\n        )\r\n      }\r\n      videoContainerNode.appendChild(playMediaControl)\r\n      this.setTimeout(callback, [{\r\n        type: 'load',\r\n        target: videoContainerNode\r\n      }])\r\n      return videoContainerNode\r\n\r\n    }\r\n\r\n\r\n  });\r\n\r\n\r\n  var pluginInfo = {\r\n    name: \"video\",\r\n    mimeType: \"video\",\r\n    ctor: VideoItemFactory\r\n  };\r\n\r\n  Album.installPlugin(\"items\", pluginInfo);\r\n\r\n  return pluginInfo;\r\n\r\n});\ndefine('skylark-ui-album/plugins/items/vimeo',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils/noder\",\r\n  \"skylark-utils/query\",\r\n  '../../Album',\r\n  './video'\r\n], function (langx, noder, $, Album, video) {\r\n  'use strict'\r\n\r\n  var VimeoPlayer = langx.Evented.inherit({\r\n    klassName: \"VimeoPlayer\",\r\n\r\n    init: function (url, videoId, playerId, clickToPlay) {\r\n      this.url = url\r\n      this.videoId = videoId\r\n      this.playerId = playerId\r\n      this.clickToPlay = clickToPlay\r\n      this.element = document.createElement('div')\r\n      this.listeners = {}\r\n    },\r\n\r\n    canPlayType: function () {\r\n      return true\r\n    },\r\n\r\n    on: function (type, func) {\r\n      this.listeners[type] = func\r\n      return this\r\n    },\r\n\r\n    loadAPI: function () {\r\n      var that = this\r\n      var apiUrl = '//f.vimeocdn.com/js/froogaloop2.min.js'\r\n      var scriptTags = document.getElementsByTagName('script')\r\n      var i = scriptTags.length\r\n      var scriptTag\r\n      var called\r\n\r\n      function callback() {\r\n        if (!called && that.playOnReady) {\r\n          that.play()\r\n        }\r\n        called = true\r\n      }\r\n      while (i) {\r\n        i -= 1\r\n        if (scriptTags[i].src === apiUrl) {\r\n          scriptTag = scriptTags[i]\r\n          break\r\n        }\r\n      }\r\n      if (!scriptTag) {\r\n        scriptTag = document.createElement('script')\r\n        scriptTag.src = apiUrl\r\n      }\r\n      $(scriptTag).on('load', callback)\r\n      scriptTags[0].parentNode.insertBefore(scriptTag, scriptTags[0])\r\n      // Fix for cached scripts on IE 8:\r\n      if (/loaded|complete/.test(scriptTag.readyState)) {\r\n        callback()\r\n      }\r\n    },\r\n\r\n    onReady: function () {\r\n      var that = this\r\n      this.ready = true\r\n      this.player.addEvent('play', function () {\r\n        that.hasPlayed = true\r\n        that.onPlaying()\r\n      })\r\n      this.player.addEvent('pause', function () {\r\n        that.onPause()\r\n      })\r\n      this.player.addEvent('finish', function () {\r\n        that.onPause()\r\n      })\r\n      if (this.playOnReady) {\r\n        this.play()\r\n      }\r\n    },\r\n\r\n    onPlaying: function () {\r\n      if (this.playStatus < 2) {\r\n        this.listeners.playing()\r\n        this.playStatus = 2\r\n      }\r\n    },\r\n\r\n    onPause: function () {\r\n      this.listeners.pause()\r\n      delete this.playStatus\r\n    },\r\n\r\n    insertIframe: function () {\r\n      var iframe = document.createElement('iframe')\r\n      iframe.src = this.url\r\n        .replace('VIDEO_ID', this.videoId)\r\n        .replace('PLAYER_ID', this.playerId)\r\n      iframe.id = this.playerId\r\n      this.element.parentNode.replaceChild(iframe, this.element)\r\n      this.element = iframe\r\n    },\r\n\r\n    play: function () {\r\n      var that = this\r\n      if (!this.playStatus) {\r\n        this.listeners.play()\r\n        this.playStatus = 1\r\n      }\r\n      if (this.ready) {\r\n        if (\r\n          !this.hasPlayed &&\r\n          (this.clickToPlay ||\r\n            (window.navigator &&\r\n              /iP(hone|od|ad)/.test(window.navigator.platform)))\r\n        ) {\r\n          // Manually trigger the playing callback if clickToPlay\r\n          // is enabled and to workaround a limitation in iOS,\r\n          // which requires synchronous user interaction to start\r\n          // the video playback:\r\n          this.onPlaying()\r\n        } else {\r\n          this.player.api('play')\r\n        }\r\n      } else {\r\n        this.playOnReady = true\r\n        if (!window.$f) {\r\n          this.loadAPI()\r\n        } else if (!this.player) {\r\n          this.insertIframe()\r\n          this.player = $f(this.element)\r\n          this.player.addEvent('ready', function () {\r\n            that.onReady()\r\n          })\r\n        }\r\n      }\r\n    },\r\n\r\n    pause: function () {\r\n      if (this.ready) {\r\n        this.player.api('pause');\r\n      } else if (this.playStatus) {\r\n        delete this.playOnReady;\r\n        this.listeners.pause()\r\n        delete this.playStatus;\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  var counter = 0;\r\n\r\n  var VimeoItemFactory = video.ctor.inherit({\r\n    klassName: \"VimeoItemFactory\",\r\n\r\n    VimeoPlayer: VimeoPlayer,\r\n\r\n    options: {\r\n      // The list object property (or data attribute) with the Vimeo video id:\r\n      vimeoVideoIdProperty: 'vimeo',\r\n      // The URL for the Vimeo video player, can be extended with custom parameters:\r\n      // https://developer.vimeo.com/player/embedding\r\n      vimeoPlayerUrl: '//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID',\r\n      // The prefix for the Vimeo video player ID:\r\n      vimeoPlayerIdPrefix: 'vimeo-player-',\r\n      // Require a click on the native Vimeo player for the initial playback:\r\n      vimeoClickToPlay: true\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      this.overrided();\r\n      this.options = langx.mixin(this.options, VimeoItemFactory.prototype.options, options);\r\n    },\r\n\r\n    render: function (obj, callback) {\r\n      var options = this.options\r\n      var videoId = this.getItemProperty(obj, options.vimeoVideoIdProperty)\r\n      if (videoId) {\r\n        if (this.getItemProperty(obj, options.urlProperty) === undefined) {\r\n          obj[options.urlProperty] = '//vimeo.com/' + videoId\r\n        }\r\n        counter += 1;\r\n        return this.overrided(\r\n          obj,\r\n          callback,\r\n          new VimeoPlayer(\r\n            options.vimeoPlayerUrl,\r\n            videoId,\r\n            options.vimeoPlayerIdPrefix + counter,\r\n            options.vimeoClickToPlay\r\n          )\r\n        )\r\n      }\r\n    }\r\n  });\r\n\r\n  var pluginInfo = {\r\n    name: \"vimeo\",\r\n    mimeType: \"vimeo\",\r\n    ctor: VimeoItemFactory\r\n  };\r\n\r\n  Album.installPlugin(\"items\", pluginInfo);\r\n\r\n  return pluginInfo;\r\n\r\n});\ndefine('skylark-ui-album/plugins/items/youtube',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils/noder\",\r\n  \"skylark-utils/query\",\r\n  '../../Album',\r\n  './video'\r\n], function (langx, noder, $, Album, video) {\r\n  'use strict'\r\n\r\n  var YouTubePlayer = langx.Evented.inherit({\r\n    klassName: \"YouTubePlayer\",\r\n\r\n    init: function (videoId, playerVars, clickToPlay) {\r\n      this.videoId = videoId;\r\n      this.playerVars = playerVars;\r\n      this.clickToPlay = clickToPlay;\r\n      this.element = document.createElement('div');\r\n    },\r\n\r\n    canPlayType: function () {\r\n      return true;\r\n    },\r\n\r\n    loadAPI: function () {\r\n      var that = this,\r\n        onYouTubeIframeAPIReady = window.onYouTubeIframeAPIReady,\r\n        apiUrl = 'https://www.youtube.com/iframe_api',\r\n        scriptTags = document.getElementsByTagName('script'),\r\n        i = scriptTags.length,\r\n        scriptTag;\r\n\r\n      window.onYouTubeIframeAPIReady = function () {\r\n        if (onYouTubeIframeAPIReady) {\r\n          onYouTubeIframeAPIReady.apply(this);\r\n        }\r\n        if (that.playOnReady) {\r\n          that.play();\r\n        }\r\n      }\r\n      while (i) {\r\n        i -= 1\r\n        if (scriptTags[i].src === apiUrl) {\r\n          return\r\n        }\r\n      }\r\n      scriptTag = document.createElement('script')\r\n      scriptTag.src = apiUrl\r\n      scriptTags[0].parentNode.insertBefore(scriptTag, scriptTags[0])\r\n    },\r\n\r\n    onReady: function () {\r\n      this.ready = true;\r\n      if (this.playOnReady) {\r\n        this.play()\r\n      }\r\n    },\r\n\r\n    onPlaying: function () {\r\n      if (this.playStatus < 2) {\r\n        this.listeners.playing();\r\n        this.playStatus = 2;\r\n      }\r\n    },\r\n\r\n    onPause: function () {\r\n      Gallery.prototype.setTimeout.call(this, this.checkSeek, null, 2000)\r\n    },\r\n\r\n    checkSeek: function () {\r\n      if (\r\n        this.stateChange === YT.PlayerState.PAUSED ||\r\n        this.stateChange === YT.PlayerState.ENDED\r\n      ) {\r\n        // check if current state change is actually paused\r\n        this.listeners.pause()\r\n        delete this.playStatus\r\n      }\r\n    },\r\n\r\n    onStateChange: function (event) {\r\n      switch (event.data) {\r\n        case YT.PlayerState.PLAYING:\r\n          this.hasPlayed = true\r\n          this.onPlaying()\r\n          break\r\n        case YT.PlayerState.PAUSED:\r\n        case YT.PlayerState.ENDED:\r\n          this.onPause()\r\n          break\r\n      }\r\n      // Save most recent state change to this.stateChange\r\n      this.stateChange = event.data\r\n    },\r\n\r\n    onError: function (event) {\r\n      this.trigger(\"error\", event);\r\n    },\r\n\r\n    play: function () {\r\n      var that = this\r\n      if (!this.playStatus) {\r\n        this.listeners.play();\r\n        this.playStatus = 1;\r\n      }\r\n      if (this.ready) {\r\n        if (\r\n          !this.hasPlayed &&\r\n          (this.clickToPlay ||\r\n            (window.navigator &&\r\n              /iP(hone|od|ad)/.test(window.navigator.platform)))\r\n        ) {\r\n          // Manually trigger the playing callback if clickToPlay\r\n          // is enabled and to workaround a limitation in iOS,\r\n          // which requires synchronous user interaction to start\r\n          // the video playback:\r\n          this.onPlaying();\r\n        } else {\r\n          this.player.playVideo();\r\n        }\r\n      } else {\r\n        this.playOnReady = true;\r\n        if (!(window.YT && YT.Player)) {\r\n          this.loadAPI();\r\n        } else if (!this.player) {\r\n          this.player = new YT.Player(this.element, {\r\n            videoId: this.videoId,\r\n            playerVars: this.playerVars,\r\n            events: {\r\n              onReady: function () {\r\n                that.onReady()\r\n              },\r\n              onStateChange: function (event) {\r\n                that.onStateChange(event)\r\n              },\r\n              onError: function (event) {\r\n                that.onError(event)\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n    },\r\n\r\n    pause: function () {\r\n      if (this.ready) {\r\n        this.player.pauseVideo()\r\n      } else if (this.playStatus) {\r\n        delete this.playOnReady\r\n        this.listeners.pause()\r\n        delete this.playStatus\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  var YouTubeItemFactory = video.ctor.inherit({\r\n    klassName: \"YouTubeItemFactory\",\r\n\r\n    YouTubePlayer: YouTubePlayer,\r\n\r\n    options: {\r\n      // The list object property (or data attribute) with the YouTube video id:\r\n      youTubeVideoIdProperty: 'youtube',\r\n      // Optional object with parameters passed to the YouTube video player:\r\n      // https://developers.google.com/youtube/player_parameters\r\n      youTubePlayerVars: {\r\n        wmode: 'transparent'\r\n      },\r\n      // Require a click on the native YouTube player for the initial playback:\r\n      youTubeClickToPlay: true\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      this.overrided();\r\n      this.options = langx.mixin(this.options, YouTubeItemFactory.prototype.options, options);\r\n    },\r\n\r\n    render: function (obj, callback) {\r\n      var options = this.options\r\n      var videoId = this.getItemProperty(obj, options.youTubeVideoIdProperty)\r\n      if (videoId) {\r\n        if (this.getItemProperty(obj, options.urlProperty) === undefined) {\r\n          obj[options.urlProperty] = '//www.youtube.com/watch?v=' + videoId\r\n        }\r\n        if (\r\n          this.getItemProperty(obj, options.videoPosterProperty) === undefined\r\n        ) {\r\n          obj[options.videoPosterProperty] =\r\n            '//img.youtube.com/vi/' + videoId + '/maxresdefault.jpg'\r\n        }\r\n        return this.overrided(\r\n          obj,\r\n          callback,\r\n          new YouTubePlayer(\r\n            videoId,\r\n            options.youTubePlayerVars,\r\n            options.youTubeClickToPlay\r\n          )\r\n        )\r\n      }\r\n    }\r\n  });\r\n\r\n  var pluginInfo = {\r\n    name: \"youtube\",\r\n    mimeType: \"youtube\",\r\n    ctor: YouTubeItemFactory\r\n  };\r\n\r\n  Album.installPlugin(\"items\", pluginInfo);\r\n\r\n  return pluginInfo;\r\n});\n/* global define, window, document, DocumentTouch */\r\n\r\ndefine('skylark-ui-album/plugins/views/SliderView',[\r\n  'skylark-langx/langx',\r\n  '../../helper',\r\n  '../../Album'\r\n], function (langx, $, Album) {\r\n  'use strict'\r\n  var SliderView = Album.ViewBase.inherit({\r\n    klassName: \"SliderView\",\r\n    options: {\r\n      // The Id, element or querySelector of the album view:\r\n      container: null,\r\n      // The tag name, Id, element or querySelector of the slides container:\r\n      slidesContainer: 'div',\r\n      // The tag name, Id, element or querySelector of the title element:\r\n      titleElement: 'h3',\r\n      // The class to add when the gallery is visible:\r\n      displayClass: 'skylarkui-album-display',\r\n      // The class to add when the gallery only displays one element:\r\n      singleClass: 'skylarkui-album-single',\r\n      // The class to add when the left edge has been reached:\r\n      leftEdgeClass: 'skylarkui-album-left',\r\n      // The class to add when the right edge has been reached:\r\n      rightEdgeClass: 'skylarkui-album-right',\r\n      // The class to add when the automatic slideshow is active:\r\n      playingClass: 'skylarkui-album-playing',\r\n      // The class for all slides:\r\n      slideClass: 'slide',\r\n      // The slide class for loading elements:\r\n      slideLoadingClass: 'slide-loading',\r\n      // The slide class for elements that failed to load:\r\n      slideErrorClass: 'slide-error',\r\n      // The class for the content element loaded into each slide:\r\n      slideContentClass: 'slide-content',\r\n      // The class for the \"toggle\" control:\r\n      toggleClass: 'toggle',\r\n      // The class for the \"prev\" control:\r\n      prevClass: 'prev',\r\n      // The class for the \"next\" control:\r\n      nextClass: 'next',\r\n      // The class for the \"close\" control:\r\n      closeClass: 'close',\r\n      // The class for the \"play-pause\" toggle control:\r\n      playPauseClass: 'play-pause',\r\n      // The list object property (or data attribute) with the object type:\r\n      //--- typeProperty: 'type',\r\n      // The list object property (or data attribute) with the object title:\r\n      //--- titleProperty: 'title',\r\n      // The list object property (or data attribute) with the object alt text:\r\n      //--- altTextProperty: 'alt',\r\n      // The list object property (or data attribute) with the object URL:\r\n      //--- urlProperty: 'href',\r\n      // The list object property (or data attribute) with the object srcset URL(s):\r\n      //--- srcsetProperty: 'urlset',\r\n      // The gallery listens for transitionend events before triggering the\r\n      // opened and closed events, unless the following option is set to false:\r\n      displayTransition: true,\r\n      // Defines if the gallery slides are cleared from the gallery modal,\r\n      // or reused for the next gallery initialization:\r\n      clearSlides: true,\r\n      // Defines if images should be stretched to fill the available space,\r\n      // while maintaining their aspect ratio (will only be enabled for browsers\r\n      // supporting background-size=\"contain\", which excludes IE < 9).\r\n      // Set to \"cover\", to make images cover all available space (requires\r\n      // support for background-size=\"cover\", which excludes IE < 9):\r\n      //--- stretchImages: false,\r\n      // Toggle the controls on pressing the Return key:\r\n      toggleControlsOnReturn: true,\r\n      // Toggle the controls on slide click:\r\n      toggleControlsOnSlideClick: true,\r\n      // Toggle the automatic slideshow interval on pressing the Space key:\r\n      toggleSlideshowOnSpace: true,\r\n      // Navigate the gallery by pressing left and right on the keyboard:\r\n      enableKeyboardNavigation: true,\r\n      // Close the gallery on pressing the Esc key:\r\n      closeOnEscape: true,\r\n      // Close the gallery when clicking on an empty slide area:\r\n      closeOnSlideClick: true,\r\n      // Close the gallery by swiping up or down:\r\n      closeOnSwipeUpOrDown: true,\r\n      // Emulate touch events on mouse-pointer devices such as desktop browsers:\r\n      emulateTouchEvents: true,\r\n      // Stop touch events from bubbling up to ancestor elements of the Gallery:\r\n      stopTouchEventsPropagation: false,\r\n      // Hide the page scrollbars:\r\n      hidePageScrollbars: false,\r\n      // Stops any touches on the container from scrolling the page:\r\n      disableScroll: true,\r\n      // Carousel mode (shortcut for carousel specific options):\r\n      carousel: false,\r\n      // Allow continuous navigation, moving from last to first\r\n      // and from first to last slide:\r\n      continuous: true,\r\n      // Remove elements outside of the preload range from the DOM:\r\n      unloadElements: true,\r\n      // Start with the automatic slideshow:\r\n      startSlideshow: false,\r\n      // Delay in milliseconds between slides for the automatic slideshow:\r\n      slideshowInterval: 5000,\r\n      // The starting index as integer.\r\n      // Can also be an object of the given list,\r\n      // or an equal object with the same url property:\r\n      index: 0,\r\n      // The number of elements to load around the current index:\r\n      preloadRange: 2,\r\n      // The transition speed between slide changes in milliseconds:\r\n      transitionSpeed: 400,\r\n      // The transition speed for automatic slide changes, set to an integer\r\n      // greater 0 to override the default transition speed:\r\n      slideshowTransitionSpeed: undefined,\r\n      // The event object for which the default action will be canceled\r\n      // on Gallery initialization (e.g. the click event to open the Gallery):\r\n      event: undefined,\r\n      // Callback function executed when the Gallery is initialized.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onopen: undefined,\r\n      // Callback function executed when the Gallery has been initialized\r\n      // and the initialization transition has been completed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onopened: undefined,\r\n      // Callback function executed on slide change.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // current index and slide as arguments:\r\n      onslide: undefined,\r\n      // Callback function executed after the slide change transition.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // current index and slide as arguments:\r\n      onslideend: undefined,\r\n      // Callback function executed on slide content load.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // slide index and slide element as arguments:\r\n      onslidecomplete: undefined,\r\n      // Callback function executed when the Gallery is about to be closed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onclose: undefined,\r\n      // Callback function executed when the Gallery has been closed\r\n      // and the closing transition has been completed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onclosed: undefined\r\n    },\r\n\r\n    /*---\r\n    carouselOptions: {\r\n      hidePageScrollbars: false,\r\n      toggleControlsOnReturn: false,\r\n      toggleSlideshowOnSpace: false,\r\n      enableKeyboardNavigation: false,\r\n      closeOnEscape: false,\r\n      closeOnSlideClick: false,\r\n      closeOnSwipeUpOrDown: false,\r\n      disableScroll: false,\r\n      startSlideshow: true\r\n    },\r\n    */\r\n\r\n    console: window.console && typeof window.console.log === 'function' ?\r\n      window.console : {\r\n        log: function () {}\r\n      },\r\n\r\n    // Detect touch, transition, transform and background-size support:\r\n    support: (function (element) {\r\n      var support = {\r\n        touch: window.ontouchstart !== undefined ||\r\n          (window.DocumentTouch && document instanceof DocumentTouch)\r\n      }\r\n      var transitions = {\r\n        webkitTransition: {\r\n          end: 'webkitTransitionEnd',\r\n          prefix: '-webkit-'\r\n        },\r\n        MozTransition: {\r\n          end: 'transitionend',\r\n          prefix: '-moz-'\r\n        },\r\n        OTransition: {\r\n          end: 'otransitionend',\r\n          prefix: '-o-'\r\n        },\r\n        transition: {\r\n          end: 'transitionend',\r\n          prefix: ''\r\n        }\r\n      }\r\n      var prop\r\n      for (prop in transitions) {\r\n        if (\r\n          transitions.hasOwnProperty(prop) &&\r\n          element.style[prop] !== undefined\r\n        ) {\r\n          support.transition = transitions[prop]\r\n          support.transition.name = prop\r\n          break\r\n        }\r\n      }\r\n\r\n      function elementTests() {\r\n        var transition = support.transition\r\n        var prop\r\n        var translateZ\r\n        document.body.appendChild(element)\r\n        if (transition) {\r\n          prop = transition.name.slice(0, -9) + 'ransform'\r\n          if (element.style[prop] !== undefined) {\r\n            element.style[prop] = 'translateZ(0)'\r\n            translateZ = window\r\n              .getComputedStyle(element)\r\n              .getPropertyValue(transition.prefix + 'transform')\r\n            support.transform = {\r\n              prefix: transition.prefix,\r\n              name: prop,\r\n              translate: true,\r\n              translateZ: !!translateZ && translateZ !== 'none'\r\n            }\r\n          }\r\n        }\r\n        if (element.style.backgroundSize !== undefined) {\r\n          support.backgroundSize = {}\r\n          element.style.backgroundSize = 'contain'\r\n          support.backgroundSize.contain =\r\n            window\r\n            .getComputedStyle(element)\r\n            .getPropertyValue('background-size') === 'contain'\r\n          element.style.backgroundSize = 'cover'\r\n          support.backgroundSize.cover =\r\n            window\r\n            .getComputedStyle(element)\r\n            .getPropertyValue('background-size') === 'cover'\r\n        }\r\n        document.body.removeChild(element)\r\n      }\r\n      if (document.body) {\r\n        elementTests()\r\n      } else {\r\n        $(document).on('DOMContentLoaded', elementTests)\r\n      }\r\n      return support\r\n      // Test element, has to be standard HTML and must not be hidden\r\n      // for the CSS3 tests using window.getComputedStyle to be applicable:\r\n    })(document.createElement('div')),\r\n\r\n    requestAnimationFrame: window.requestAnimationFrame ||\r\n      window.webkitRequestAnimationFrame ||\r\n      window.mozRequestAnimationFrame,\r\n\r\n    cancelAnimationFrame: window.cancelAnimationFrame ||\r\n      window.webkitCancelRequestAnimationFrame ||\r\n      window.webkitCancelAnimationFrame ||\r\n      window.mozCancelAnimationFrame,\r\n\r\n    init: function (album, options) {\r\n      this.overrided(album, options);\r\n\r\n      this.list = this.album.items;\r\n      this.options.container = this.album.el;\r\n      this.num = this.list.length;\r\n\r\n      this.initStartIndex()\r\n      if (this.initWidget() === false) {\r\n        return false\r\n      }\r\n      this.initEventListeners()\r\n      // Load the slide at the given index:\r\n      this.onslide(this.index)\r\n      // Manually trigger the slideend event for the initial slide:\r\n      this.ontransitionend()\r\n      // Start the automatic slideshow if applicable:\r\n      if (this.options.startSlideshow) {\r\n        this.play()\r\n      }\r\n    },\r\n\r\n    slide: function (to, speed) {\r\n      window.clearTimeout(this.timeout)\r\n      var index = this.index\r\n      var direction\r\n      var naturalDirection\r\n      var diff\r\n      if (index === to || this.num === 1) {\r\n        return\r\n      }\r\n      if (!speed) {\r\n        speed = this.options.transitionSpeed\r\n      }\r\n      if (this.support.transform) {\r\n        if (!this.options.continuous) {\r\n          to = this.circle(to)\r\n        }\r\n        // 1: backward, -1: forward:\r\n        direction = Math.abs(index - to) / (index - to)\r\n        // Get the actual position of the slide:\r\n        if (this.options.continuous) {\r\n          naturalDirection = direction\r\n          direction = -this.positions[this.circle(to)] / this.slideWidth\r\n          // If going forward but to < index, use to = slides.length + to\r\n          // If going backward but to > index, use to = -slides.length + to\r\n          if (direction !== naturalDirection) {\r\n            to = -direction * this.num + to\r\n          }\r\n        }\r\n        diff = Math.abs(index - to) - 1\r\n        // Move all the slides between index and to in the right direction:\r\n        while (diff) {\r\n          diff -= 1\r\n          this.move(\r\n            this.circle((to > index ? to : index) - diff - 1),\r\n            this.slideWidth * direction,\r\n            0\r\n          )\r\n        }\r\n        to = this.circle(to)\r\n        this.move(index, this.slideWidth * direction, speed)\r\n        this.move(to, 0, speed)\r\n        if (this.options.continuous) {\r\n          this.move(\r\n            this.circle(to - direction),\r\n            -(this.slideWidth * direction),\r\n            0\r\n          )\r\n        }\r\n      } else {\r\n        to = this.circle(to)\r\n        this.animate(index * -this.slideWidth, to * -this.slideWidth, speed)\r\n      }\r\n      this.onslide(to)\r\n    },\r\n\r\n    getIndex: function () {\r\n      return this.index\r\n    },\r\n\r\n    getNumber: function () {\r\n      return this.num\r\n    },\r\n\r\n    prev: function () {\r\n      if (this.options.continuous || this.index) {\r\n        this.slide(this.index - 1)\r\n      }\r\n    },\r\n\r\n    next: function () {\r\n      if (this.options.continuous || this.index < this.num - 1) {\r\n        this.slide(this.index + 1)\r\n      }\r\n    },\r\n\r\n    play: function (time) {\r\n      var that = this\r\n      window.clearTimeout(this.timeout)\r\n      this.interval = time || this.options.slideshowInterval\r\n      if (this.elements[this.index] > 1) {\r\n        this.timeout = this.setTimeout(\r\n          (!this.requestAnimationFrame && this.slide) ||\r\n          function (to, speed) {\r\n            that.animationFrameId = that.requestAnimationFrame.call(\r\n              window,\r\n              function () {\r\n                that.slide(to, speed)\r\n              }\r\n            )\r\n          },\r\n          [this.index + 1, this.options.slideshowTransitionSpeed],\r\n          this.interval\r\n        )\r\n      }\r\n      this.container.addClass(this.options.playingClass)\r\n    },\r\n\r\n    pause: function () {\r\n      window.clearTimeout(this.timeout)\r\n      this.interval = null\r\n      if (this.cancelAnimationFrame) {\r\n        this.cancelAnimationFrame.call(window, this.animationFrameId)\r\n        this.animationFrameId = null\r\n      }\r\n      this.container.removeClass(this.options.playingClass)\r\n    },\r\n\r\n    add: function (list) {\r\n      var i\r\n      if (!list.concat) {\r\n        // Make a real array out of the list to add:\r\n        list = Array.prototype.slice.call(list)\r\n      }\r\n      if (!this.list.concat) {\r\n        // Make a real array out of the Gallery list:\r\n        this.list = Array.prototype.slice.call(this.list)\r\n      }\r\n      this.list = this.list.concat(list)\r\n      this.num = this.list.length\r\n      if (this.num > 2 && this.options.continuous === null) {\r\n        this.options.continuous = true\r\n        this.container.removeClass(this.options.leftEdgeClass)\r\n      }\r\n      this.container\r\n        .removeClass(this.options.rightEdgeClass)\r\n        .removeClass(this.options.singleClass)\r\n      for (i = this.num - list.length; i < this.num; i += 1) {\r\n        this.addSlide(i)\r\n        this.positionSlide(i)\r\n      }\r\n      this.positions.length = this.num\r\n      this.initSlides(true)\r\n    },\r\n\r\n    resetSlides: function () {\r\n      this.slidesContainer.empty()\r\n      this.unloadAllSlides()\r\n      this.slides = []\r\n    },\r\n\r\n    handleClose: function () {\r\n      var options = this.options\r\n      this.destroyEventListeners()\r\n      // Cancel the slideshow:\r\n      this.pause()\r\n      this.container[0].style.display = 'none'\r\n      this.container\r\n        .removeClass(options.displayClass)\r\n        .removeClass(options.singleClass)\r\n        .removeClass(options.leftEdgeClass)\r\n        .removeClass(options.rightEdgeClass)\r\n      if (options.hidePageScrollbars) {\r\n        document.body.style.overflow = this.bodyOverflowStyle\r\n      }\r\n      if (this.options.clearSlides) {\r\n        this.resetSlides()\r\n      }\r\n      if (this.options.onclosed) {\r\n        this.options.onclosed.call(this)\r\n      }\r\n    },\r\n\r\n    close: function () {\r\n      var that = this\r\n\r\n      function closeHandler(event) {\r\n        if (event.target === that.container[0]) {\r\n          that.container.off(that.support.transition.end, closeHandler)\r\n          that.handleClose()\r\n        }\r\n      }\r\n      if (this.options.onclose) {\r\n        this.options.onclose.call(this)\r\n      }\r\n      if (this.support.transition && this.options.displayTransition) {\r\n        this.container.on(this.support.transition.end, closeHandler)\r\n        this.container.removeClass(this.options.displayClass)\r\n      } else {\r\n        this.handleClose()\r\n      }\r\n    },\r\n\r\n    circle: function (index) {\r\n      // Always return a number inside of the slides index range:\r\n      return (this.num + index % this.num) % this.num\r\n    },\r\n\r\n    move: function (index, dist, speed) {\r\n      this.translateX(index, dist, speed)\r\n      this.positions[index] = dist\r\n    },\r\n\r\n    translate: function (index, x, y, speed) {\r\n      var style = this.slides[index].style\r\n      var transition = this.support.transition\r\n      var transform = this.support.transform\r\n      style[transition.name + 'Duration'] = speed + 'ms'\r\n      style[transform.name] =\r\n        'translate(' +\r\n        x +\r\n        'px, ' +\r\n        y +\r\n        'px)' +\r\n        (transform.translateZ ? ' translateZ(0)' : '')\r\n    },\r\n\r\n    translateX: function (index, x, speed) {\r\n      this.translate(index, x, 0, speed)\r\n    },\r\n\r\n    translateY: function (index, y, speed) {\r\n      this.translate(index, 0, y, speed)\r\n    },\r\n\r\n    animate: function (from, to, speed) {\r\n      if (!speed) {\r\n        this.slidesContainer[0].style.left = to + 'px'\r\n        return\r\n      }\r\n      var that = this\r\n      var start = new Date().getTime()\r\n      var timer = window.setInterval(function () {\r\n        var timeElap = new Date().getTime() - start\r\n        if (timeElap > speed) {\r\n          that.slidesContainer[0].style.left = to + 'px'\r\n          that.ontransitionend()\r\n          window.clearInterval(timer)\r\n          return\r\n        }\r\n        that.slidesContainer[0].style.left =\r\n          (to - from) * (Math.floor(timeElap / speed * 100) / 100) + from + 'px'\r\n      }, 4)\r\n    },\r\n\r\n    preventDefault: function (event) {\r\n      if (event.preventDefault) {\r\n        event.preventDefault()\r\n      } else {\r\n        event.returnValue = false\r\n      }\r\n    },\r\n\r\n    stopPropagation: function (event) {\r\n      if (event.stopPropagation) {\r\n        event.stopPropagation()\r\n      } else {\r\n        event.cancelBubble = true\r\n      }\r\n    },\r\n\r\n    onresize: function () {\r\n      this.initSlides(true)\r\n    },\r\n\r\n    onmousedown: function (event) {\r\n      // Trigger on clicks of the left mouse button only\r\n      // and exclude video & audio elements:\r\n      if (\r\n        event.which &&\r\n        event.which === 1 &&\r\n        event.target.nodeName !== 'VIDEO' &&\r\n        event.target.nodeName !== 'AUDIO'\r\n      ) {\r\n        // Preventing the default mousedown action is required\r\n        // to make touch emulation work with Firefox:\r\n        event.preventDefault();\r\n        (event.originalEvent || event).touches = [{\r\n          pageX: event.pageX,\r\n          pageY: event.pageY\r\n        }]\r\n        this.ontouchstart(event)\r\n      }\r\n    },\r\n\r\n    onmousemove: function (event) {\r\n      if (this.touchStart) {;\r\n        (event.originalEvent || event).touches = [{\r\n          pageX: event.pageX,\r\n          pageY: event.pageY\r\n        }]\r\n        this.ontouchmove(event)\r\n      }\r\n    },\r\n\r\n    onmouseup: function (event) {\r\n      if (this.touchStart) {\r\n        this.ontouchend(event)\r\n        delete this.touchStart\r\n      }\r\n    },\r\n\r\n    onmouseout: function (event) {\r\n      if (this.touchStart) {\r\n        var target = event.target\r\n        var related = event.relatedTarget\r\n        if (!related || (related !== target && !$.contains(target, related))) {\r\n          this.onmouseup(event)\r\n        }\r\n      }\r\n    },\r\n\r\n    ontouchstart: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      // jQuery doesn't copy touch event properties by default,\r\n      // so we have to access the originalEvent object:\r\n      var touches = (event.originalEvent || event).touches[0]\r\n      this.touchStart = {\r\n        // Remember the initial touch coordinates:\r\n        x: touches.pageX,\r\n        y: touches.pageY,\r\n        // Store the time to determine touch duration:\r\n        time: Date.now()\r\n      }\r\n      // Helper variable to detect scroll movement:\r\n      this.isScrolling = undefined\r\n      // Reset delta values:\r\n      this.touchDelta = {}\r\n    },\r\n\r\n    ontouchmove: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      // jQuery doesn't copy touch event properties by default,\r\n      // so we have to access the originalEvent object:\r\n      var touches = (event.originalEvent || event).touches[0]\r\n      var scale = (event.originalEvent || event).scale\r\n      var index = this.index\r\n      var touchDeltaX\r\n      var indices\r\n      // Ensure this is a one touch swipe and not, e.g. a pinch:\r\n      if (touches.length > 1 || (scale && scale !== 1)) {\r\n        return\r\n      }\r\n      if (this.options.disableScroll) {\r\n        event.preventDefault()\r\n      }\r\n      // Measure change in x and y coordinates:\r\n      this.touchDelta = {\r\n        x: touches.pageX - this.touchStart.x,\r\n        y: touches.pageY - this.touchStart.y\r\n      }\r\n      touchDeltaX = this.touchDelta.x\r\n      // Detect if this is a vertical scroll movement (run only once per touch):\r\n      if (this.isScrolling === undefined) {\r\n        this.isScrolling =\r\n          this.isScrolling ||\r\n          Math.abs(touchDeltaX) < Math.abs(this.touchDelta.y)\r\n      }\r\n      if (!this.isScrolling) {\r\n        // Always prevent horizontal scroll:\r\n        event.preventDefault()\r\n        // Stop the slideshow:\r\n        window.clearTimeout(this.timeout)\r\n        if (this.options.continuous) {\r\n          indices = [this.circle(index + 1), index, this.circle(index - 1)]\r\n        } else {\r\n          // Increase resistance if first slide and sliding left\r\n          // or last slide and sliding right:\r\n          this.touchDelta.x = touchDeltaX =\r\n            touchDeltaX /\r\n            ((!index && touchDeltaX > 0) ||\r\n              (index === this.num - 1 && touchDeltaX < 0) ?\r\n              Math.abs(touchDeltaX) / this.slideWidth + 1 :\r\n              1)\r\n          indices = [index]\r\n          if (index) {\r\n            indices.push(index - 1)\r\n          }\r\n          if (index < this.num - 1) {\r\n            indices.unshift(index + 1)\r\n          }\r\n        }\r\n        while (indices.length) {\r\n          index = indices.pop()\r\n          this.translateX(index, touchDeltaX + this.positions[index], 0)\r\n        }\r\n      } else {\r\n        this.translateY(index, this.touchDelta.y + this.positions[index], 0)\r\n      }\r\n    },\r\n\r\n    ontouchend: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      var index = this.index\r\n      var speed = this.options.transitionSpeed\r\n      var slideWidth = this.slideWidth\r\n      var isShortDuration = Number(Date.now() - this.touchStart.time) < 250\r\n      // Determine if slide attempt triggers next/prev slide:\r\n      var isValidSlide =\r\n        (isShortDuration && Math.abs(this.touchDelta.x) > 20) ||\r\n        Math.abs(this.touchDelta.x) > slideWidth / 2\r\n      // Determine if slide attempt is past start or end:\r\n      var isPastBounds =\r\n        (!index && this.touchDelta.x > 0) ||\r\n        (index === this.num - 1 && this.touchDelta.x < 0)\r\n      var isValidClose = !isValidSlide &&\r\n        this.options.closeOnSwipeUpOrDown &&\r\n        ((isShortDuration && Math.abs(this.touchDelta.y) > 20) ||\r\n          Math.abs(this.touchDelta.y) > this.slideHeight / 2)\r\n      var direction\r\n      var indexForward\r\n      var indexBackward\r\n      var distanceForward\r\n      var distanceBackward\r\n      if (this.options.continuous) {\r\n        isPastBounds = false\r\n      }\r\n      // Determine direction of swipe (true: right, false: left):\r\n      direction = this.touchDelta.x < 0 ? -1 : 1\r\n      if (!this.isScrolling) {\r\n        if (isValidSlide && !isPastBounds) {\r\n          indexForward = index + direction\r\n          indexBackward = index - direction\r\n          distanceForward = slideWidth * direction\r\n          distanceBackward = -slideWidth * direction\r\n          if (this.options.continuous) {\r\n            this.move(this.circle(indexForward), distanceForward, 0)\r\n            this.move(this.circle(index - 2 * direction), distanceBackward, 0)\r\n          } else if (indexForward >= 0 && indexForward < this.num) {\r\n            this.move(indexForward, distanceForward, 0)\r\n          }\r\n          this.move(index, this.positions[index] + distanceForward, speed)\r\n          this.move(\r\n            this.circle(indexBackward),\r\n            this.positions[this.circle(indexBackward)] + distanceForward,\r\n            speed\r\n          )\r\n          index = this.circle(indexBackward)\r\n          this.onslide(index)\r\n        } else {\r\n          // Move back into position\r\n          if (this.options.continuous) {\r\n            this.move(this.circle(index - 1), -slideWidth, speed)\r\n            this.move(index, 0, speed)\r\n            this.move(this.circle(index + 1), slideWidth, speed)\r\n          } else {\r\n            if (index) {\r\n              this.move(index - 1, -slideWidth, speed)\r\n            }\r\n            this.move(index, 0, speed)\r\n            if (index < this.num - 1) {\r\n              this.move(index + 1, slideWidth, speed)\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (isValidClose) {\r\n          this.close()\r\n        } else {\r\n          // Move back into position\r\n          this.translateY(index, 0, speed)\r\n        }\r\n      }\r\n    },\r\n\r\n    ontouchcancel: function (event) {\r\n      if (this.touchStart) {\r\n        this.ontouchend(event)\r\n        delete this.touchStart\r\n      }\r\n    },\r\n\r\n    ontransitionend: function (event) {\r\n      var slide = this.slides[this.index]\r\n      if (!event || slide === event.target) {\r\n        if (this.interval) {\r\n          this.play()\r\n        }\r\n        this.setTimeout(this.options.onslideend, [this.index, slide])\r\n      }\r\n    },\r\n\r\n    oncomplete: function (event) {\r\n      var target = event.target || event.srcElement\r\n      var parent = target && target.parentNode\r\n      var index\r\n      if (!target || !parent) {\r\n        return\r\n      }\r\n      index = this.getNodeIndex(parent)\r\n      $(parent).removeClass(this.options.slideLoadingClass)\r\n      if (event.type === 'error') {\r\n        $(parent).addClass(this.options.slideErrorClass)\r\n        this.elements[index] = 3 // Fail\r\n      } else {\r\n        this.elements[index] = 2 // Done\r\n      }\r\n      // Fix for IE7's lack of support for percentage max-height:\r\n      if (target.clientHeight > this.container[0].clientHeight) {\r\n        target.style.maxHeight = this.container[0].clientHeight\r\n      }\r\n      if (this.interval && this.slides[this.index] === parent) {\r\n        this.play()\r\n      }\r\n      this.setTimeout(this.options.onslidecomplete, [index, parent])\r\n    },\r\n\r\n    onload: function (event) {\r\n      this.oncomplete(event)\r\n    },\r\n\r\n    onerror: function (event) {\r\n      this.oncomplete(event)\r\n    },\r\n\r\n    onkeydown: function (event) {\r\n      switch (event.which || event.keyCode) {\r\n        case 13: // Return\r\n          if (this.options.toggleControlsOnReturn) {\r\n            this.preventDefault(event)\r\n            this.toggleControls()\r\n          }\r\n          break\r\n        case 27: // Esc\r\n          if (this.options.closeOnEscape) {\r\n            this.close()\r\n            // prevent Esc from closing other things\r\n            event.stopImmediatePropagation()\r\n          }\r\n          break\r\n        case 32: // Space\r\n          if (this.options.toggleSlideshowOnSpace) {\r\n            this.preventDefault(event)\r\n            this.toggleSlideshow()\r\n          }\r\n          break\r\n        case 37: // Left\r\n          if (this.options.enableKeyboardNavigation) {\r\n            this.preventDefault(event)\r\n            this.prev()\r\n          }\r\n          break\r\n        case 39: // Right\r\n          if (this.options.enableKeyboardNavigation) {\r\n            this.preventDefault(event)\r\n            this.next()\r\n          }\r\n          break\r\n      }\r\n    },\r\n\r\n    handleClick: function (event) {\r\n      var options = this.options\r\n      var target = event.target || event.srcElement\r\n      var parent = target.parentNode\r\n\r\n      function isTarget(className) {\r\n        return $(target).hasClass(className) || $(parent).hasClass(className)\r\n      }\r\n      if (isTarget(options.toggleClass)) {\r\n        // Click on \"toggle\" control\r\n        this.preventDefault(event)\r\n        this.toggleControls()\r\n      } else if (isTarget(options.prevClass)) {\r\n        // Click on \"prev\" control\r\n        this.preventDefault(event)\r\n        this.prev()\r\n      } else if (isTarget(options.nextClass)) {\r\n        // Click on \"next\" control\r\n        this.preventDefault(event)\r\n        this.next()\r\n      } else if (isTarget(options.closeClass)) {\r\n        // Click on \"close\" control\r\n        this.preventDefault(event)\r\n        this.close()\r\n      } else if (isTarget(options.playPauseClass)) {\r\n        // Click on \"play-pause\" control\r\n        this.preventDefault(event)\r\n        this.toggleSlideshow()\r\n      } else if (parent === this.slidesContainer[0]) {\r\n        // Click on slide background\r\n        if (options.closeOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.close()\r\n        } else if (options.toggleControlsOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.toggleControls()\r\n        }\r\n      } else if (\r\n        parent.parentNode &&\r\n        parent.parentNode === this.slidesContainer[0]\r\n      ) {\r\n        // Click on displayed element\r\n        if (options.toggleControlsOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.toggleControls()\r\n        }\r\n      }\r\n    },\r\n\r\n    onclick: function (event) {\r\n      if (\r\n        this.options.emulateTouchEvents &&\r\n        this.touchDelta &&\r\n        (Math.abs(this.touchDelta.x) > 20 || Math.abs(this.touchDelta.y) > 20)\r\n      ) {\r\n        delete this.touchDelta\r\n        return\r\n      }\r\n      return this.handleClick(event)\r\n    },\r\n\r\n    updateEdgeClasses: function (index) {\r\n      if (!index) {\r\n        this.container.addClass(this.options.leftEdgeClass)\r\n      } else {\r\n        this.container.removeClass(this.options.leftEdgeClass)\r\n      }\r\n      if (index === this.num - 1) {\r\n        this.container.addClass(this.options.rightEdgeClass)\r\n      } else {\r\n        this.container.removeClass(this.options.rightEdgeClass)\r\n      }\r\n    },\r\n\r\n    handleSlide: function (index) {\r\n      if (!this.options.continuous) {\r\n        this.updateEdgeClasses(index)\r\n      }\r\n      this.loadElements(index)\r\n      if (this.options.unloadElements) {\r\n        this.unloadElements(index)\r\n      }\r\n      this.setTitle(index)\r\n    },\r\n\r\n    onslide: function (index) {\r\n      this.index = index\r\n      this.handleSlide(index)\r\n      this.setTimeout(this.options.onslide, [index, this.slides[index]])\r\n    },\r\n\r\n    setTitle: function (index) {\r\n      var firstChild = this.slides[index].firstChild\r\n      var text = firstChild.title || firstChild.alt\r\n      var titleElement = this.titleElement\r\n      if (titleElement.length) {\r\n        this.titleElement.empty()\r\n        if (text) {\r\n          titleElement[0].appendChild(document.createTextNode(text))\r\n        }\r\n      }\r\n    },\r\n\r\n    setTimeout: function (func, args, wait) {\r\n      var that = this\r\n      return (\r\n        func &&\r\n        window.setTimeout(function () {\r\n          func.apply(that, args || [])\r\n        }, wait || 0)\r\n      )\r\n    },\r\n\r\n    createElement: function (obj, callback) {\r\n      var element = this.album.renderItem(obj, callback);\r\n      $(element).addClass(this.options.slideContentClass);\r\n      return element;\r\n    },\r\n\r\n    loadElement: function (index) {\r\n      if (!this.elements[index]) {\r\n        if (this.slides[index].firstChild) {\r\n          this.elements[index] = $(this.slides[index]).hasClass(\r\n              this.options.slideErrorClass\r\n            ) ?\r\n            3 :\r\n            2\r\n        } else {\r\n          this.elements[index] = 1 // Loading\r\n          $(this.slides[index]).addClass(this.options.slideLoadingClass)\r\n          this.slides[index].appendChild(\r\n            this.createElement(this.list[index], this.proxyListener)\r\n          )\r\n        }\r\n      }\r\n    },\r\n\r\n    loadElements: function (index) {\r\n      var limit = Math.min(this.num, this.options.preloadRange * 2 + 1)\r\n      var j = index\r\n      var i\r\n      for (i = 0; i < limit; i += 1) {\r\n        // First load the current slide element (0),\r\n        // then the next one (+1),\r\n        // then the previous one (-2),\r\n        // then the next after next (+2), etc.:\r\n        j += i * (i % 2 === 0 ? -1 : 1)\r\n        // Connect the ends of the list to load slide elements for\r\n        // continuous navigation:\r\n        j = this.circle(j)\r\n        this.loadElement(j)\r\n      }\r\n    },\r\n\r\n    unloadElements: function (index) {\r\n      var i, diff\r\n      for (i in this.elements) {\r\n        if (this.elements.hasOwnProperty(i)) {\r\n          diff = Math.abs(index - i)\r\n          if (\r\n            diff > this.options.preloadRange &&\r\n            diff + this.options.preloadRange < this.num\r\n          ) {\r\n            this.unloadSlide(i)\r\n            delete this.elements[i]\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    addSlide: function (index) {\r\n      var slide = this.slidePrototype.cloneNode(false)\r\n      slide.setAttribute('data-index', index)\r\n      this.slidesContainer[0].appendChild(slide)\r\n      this.slides.push(slide)\r\n    },\r\n\r\n    positionSlide: function (index) {\r\n      var slide = this.slides[index]\r\n      slide.style.width = this.slideWidth + 'px'\r\n      if (this.support.transform) {\r\n        slide.style.left = index * -this.slideWidth + 'px'\r\n        this.move(\r\n          index,\r\n          this.index > index ?\r\n          -this.slideWidth :\r\n          this.index < index ? this.slideWidth : 0,\r\n          0\r\n        )\r\n      }\r\n    },\r\n\r\n    initSlides: function (reload) {\r\n      var clearSlides, i\r\n      if (!reload) {\r\n        this.positions = []\r\n        this.positions.length = this.num\r\n        this.elements = {}\r\n        this.imagePrototype = document.createElement('img')\r\n        this.elementPrototype = document.createElement('div')\r\n        this.slidePrototype = document.createElement('div')\r\n        $(this.slidePrototype).addClass(this.options.slideClass)\r\n        this.slides = this.slidesContainer[0].children\r\n        clearSlides =\r\n          this.options.clearSlides || this.slides.length !== this.num\r\n      }\r\n      this.slideWidth = this.container[0].clientWidth\r\n      this.slideHeight = this.container[0].clientHeight\r\n      this.slidesContainer[0].style.width = this.num * this.slideWidth + 'px'\r\n      if (clearSlides) {\r\n        this.resetSlides()\r\n      }\r\n      for (i = 0; i < this.num; i += 1) {\r\n        if (clearSlides) {\r\n          this.addSlide(i)\r\n        }\r\n        this.positionSlide(i)\r\n      }\r\n      // Reposition the slides before and after the given index:\r\n      if (this.options.continuous && this.support.transform) {\r\n        this.move(this.circle(this.index - 1), -this.slideWidth, 0)\r\n        this.move(this.circle(this.index + 1), this.slideWidth, 0)\r\n      }\r\n      if (!this.support.transform) {\r\n        this.slidesContainer[0].style.left =\r\n          this.index * -this.slideWidth + 'px'\r\n      }\r\n    },\r\n\r\n    unloadSlide: function (index) {\r\n      var slide, firstChild\r\n      slide = this.slides[index]\r\n      firstChild = slide.firstChild\r\n      if (firstChild !== null) {\r\n        slide.removeChild(firstChild)\r\n      }\r\n    },\r\n\r\n    unloadAllSlides: function () {\r\n      var i, len\r\n      for (i = 0, len = this.slides.length; i < len; i++) {\r\n        this.unloadSlide(i)\r\n      }\r\n    },\r\n\r\n    toggleControls: function () {\r\n\r\n      var controlsClass = this.options.controlsClass\r\n      if (this.container.hasClass(controlsClass)) {\r\n        this.container.removeClass(controlsClass)\r\n      } else {\r\n        this.container.addClass(controlsClass)\r\n      }\r\n    },\r\n\r\n    toggleSlideshow: function () {\r\n      if (!this.interval) {\r\n        this.play()\r\n      } else {\r\n        this.pause()\r\n      }\r\n    },\r\n\r\n    getNodeIndex: function (element) {\r\n      return parseInt(element.getAttribute('data-index'), 10)\r\n    },\r\n\r\n    initStartIndex: function () {\r\n      var album = this.album,\r\n        index = this.options.index;\r\n      var i\r\n      // Check if the index is given as a list object:\r\n      if (index && typeof index !== 'number') {\r\n        for (i = 0; i < this.num; i += 1) {\r\n          if (\r\n            this.list[i] === index || album.getItemUrl(this.list[i]) === album.getItemUrl(index)) {\r\n            index = i\r\n            break\r\n          }\r\n        }\r\n      }\r\n      // Make sure the index is in the list range:\r\n      this.index = this.circle(parseInt(index, 10) || 0)\r\n    },\r\n\r\n    initEventListeners: function () {\r\n      var that = this\r\n      var slidesContainer = this.slidesContainer\r\n\r\n      function proxyListener(event) {\r\n        var type =\r\n          that.support.transition && that.support.transition.end === event.type ?\r\n          'transitionend' :\r\n          event.type\r\n        that['on' + type](event)\r\n      }\r\n      $(window).on('resize', proxyListener)\r\n      $(document.body).on('keydown', proxyListener)\r\n      this.container.on('click', proxyListener)\r\n      if (this.support.touch) {\r\n        slidesContainer.on(\r\n          'touchstart touchmove touchend touchcancel',\r\n          proxyListener\r\n        )\r\n      } else if (this.options.emulateTouchEvents && this.support.transition) {\r\n        slidesContainer.on(\r\n          'mousedown mousemove mouseup mouseout',\r\n          proxyListener\r\n        )\r\n      }\r\n      if (this.support.transition) {\r\n        slidesContainer.on(this.support.transition.end, proxyListener)\r\n      }\r\n      this.proxyListener = proxyListener\r\n    },\r\n\r\n    destroyEventListeners: function () {\r\n      var slidesContainer = this.slidesContainer\r\n      var proxyListener = this.proxyListener\r\n      $(window).off('resize', proxyListener)\r\n      $(document.body).off('keydown', proxyListener)\r\n      this.container.off('click', proxyListener)\r\n      if (this.support.touch) {\r\n        slidesContainer.off(\r\n          'touchstart touchmove touchend touchcancel',\r\n          proxyListener\r\n        )\r\n      } else if (this.options.emulateTouchEvents && this.support.transition) {\r\n        slidesContainer.off(\r\n          'mousedown mousemove mouseup mouseout',\r\n          proxyListener\r\n        )\r\n      }\r\n      if (this.support.transition) {\r\n        slidesContainer.off(this.support.transition.end, proxyListener)\r\n      }\r\n    },\r\n\r\n    handleOpen: function () {\r\n      if (this.options.onopened) {\r\n        this.options.onopened.call(this)\r\n      }\r\n    },\r\n\r\n    initWidget: function () {\r\n      var that = this\r\n\r\n      function openHandler(event) {\r\n        if (event.target === that.container[0]) {\r\n          that.container.off(that.support.transition.end, openHandler)\r\n          that.handleOpen()\r\n        }\r\n      }\r\n      this.container = $(this.options.container)\r\n      if (!this.container.length) {\r\n        this.console.log(\r\n          'blueimp Gallery: Widget container not found.',\r\n          this.options.container\r\n        )\r\n        return false\r\n      }\r\n      this.slidesContainer = this.container\r\n        .find(this.options.slidesContainer)\r\n        .first()\r\n      if (!this.slidesContainer.length) {\r\n        this.console.log(\r\n          'blueimp Gallery: Slides container not found.',\r\n          this.options.slidesContainer\r\n        )\r\n        return false\r\n      }\r\n      this.titleElement = this.container.find(this.options.titleElement).first()\r\n      if (this.num === 1) {\r\n        this.container.addClass(this.options.singleClass)\r\n      }\r\n      if (this.options.onopen) {\r\n        this.options.onopen.call(this)\r\n      }\r\n      if (this.support.transition && this.options.displayTransition) {\r\n        this.container.on(this.support.transition.end, openHandler)\r\n      } else {\r\n        this.handleOpen()\r\n      }\r\n      if (this.options.hidePageScrollbars) {\r\n        // Hide the page scrollbars:\r\n        this.bodyOverflowStyle = document.body.style.overflow\r\n        document.body.style.overflow = 'hidden'\r\n      }\r\n      this.container[0].style.display = 'block'\r\n      this.initSlides()\r\n      this.container.addClass(this.options.displayClass)\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      // Create a copy of the prototype options:\r\n      this.overrided(langx.mixin({}, SliderView.prototype.options, options));\r\n\r\n      if (this.num < 3) {\r\n        // 1 or 2 slides cannot be displayed continuous,\r\n        // remember the original option by setting to null instead of false:\r\n        this.options.continuous = this.options.continuous ? null : false\r\n      }\r\n      if (!this.support.transition) {\r\n        this.options.emulateTouchEvents = false\r\n      }\r\n      if (this.options.event) {\r\n        this.preventDefault(this.options.event)\r\n      }\r\n    }\r\n  });\r\n\r\n  Album.installPlugin(\"views\", {\r\n    \"name\": \"slider\",\r\n    \"ctor\": SliderView,\r\n    \"templates\": {\r\n      \"default\": '<div class=\"slides\"></div>' +\r\n        '<h3 class=\"title\"></h3>' +\r\n        '<a class=\"prev\">‹</a>' +\r\n        '<a class=\"next\">›</a>' +\r\n        '<a class=\"close\">×</a>' +\r\n        '<a class=\"play-pause\"></a>' +\r\n        '<ol class=\"indicator\"></ol>'\r\n\r\n    }\r\n  });\r\n\r\n  return Album.SliderView = SliderView;\r\n});\ndefine('skylark-ui-album/plugins/views/CarouselView',[\r\n\t'../../Album',\r\n\t'./SliderView'\r\n], function (Album, SliderView) {\r\n\r\n\tvar CarouselView = SliderView.inherit({\r\n\t\tklassName: \"CarouselView\",\r\n\r\n\t\toptions: {\r\n\t\t\thidePageScrollbars: false,\r\n\t\t\ttoggleControlsOnReturn: false,\r\n\t\t\ttoggleSlideshowOnSpace: false,\r\n\t\t\tenableKeyboardNavigation: false,\r\n\t\t\tcloseOnEscape: false,\r\n\t\t\tcloseOnSlideClick: false,\r\n\t\t\tcloseOnSwipeUpOrDown: false,\r\n\t\t\tdisableScroll: false,\r\n\t\t\tstartSlideshow: true\r\n\t\t},\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\tvar options = langx.mixin({}, CarouselView.prototype.options, options);\r\n\t\t\tthis.overrided(options);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tAlbum.installPlugin(\"views\", {\r\n\t\t\"name\": \"carousel\",\r\n\t\t\"ctor\": CarouselView,\r\n\t\t\"templates\": {\r\n\t\t\t\"default\": '<div class=\"slides\"></div>' +\r\n\t\t\t\t'<h3 class=\"title\"></h3>' +\r\n\t\t\t\t'<a class=\"prev\">‹</a>' +\r\n\t\t\t\t'<a class=\"next\">›</a>' +\r\n\t\t\t\t'<a class=\"close\">×</a>' +\r\n\t\t\t\t'<a class=\"play-pause\"></a>' +\r\n\t\t\t\t'<ol class=\"indicator\"></ol>'\r\n\r\n\t\t}\r\n\t});\r\n\r\n\treturn CarouselView;\r\n\r\n});\ndefine('skylark-ui-album/plugins/views/LightBoxView',[\r\n\t'skylark-langx/langx',\r\n\t'../../Album',\r\n\t'./SliderView'\r\n], function (langx, Album, SliderView) {\r\n\r\n\tvar LightBoxView = SliderView.inherit({\r\n\t\tklassName: \"LightBoxView\",\r\n\t\toptions: {\r\n\t\t\t// Hide the page scrollbars:\r\n\t\t\thidePageScrollbars: false,\r\n\r\n\t\t\t// The tag name, Id, element or querySelector of the indicator container:\r\n\t\t\tindicatorContainer: 'ol',\r\n\t\t\t// The class for the active indicator:\r\n\t\t\tactiveIndicatorClass: 'active',\r\n\t\t\t// The list object property (or data attribute) with the thumbnail URL,\r\n\t\t\t// used as alternative to a thumbnail child element:\r\n\t\t\tthumbnailProperty: 'thumbnail',\r\n\t\t\t// Defines if the gallery indicators should display a thumbnail:\r\n\t\t\tthumbnailIndicators: true\r\n\t\t},\r\n\r\n\r\n\t\tinitOptions: function (options) {\r\n\t\t\tvar options = langx.mixin({}, LightBoxView.prototype.options, options);\r\n\t\t\tthis.overrided(options);\r\n\t\t},\r\n\r\n\t\tcreateIndicator: function (obj) {\r\n\t\t\tvar album = this.album,\r\n\t\t\t\tindicator = this.indicatorPrototype.cloneNode(false)\r\n\t\t\tvar title = album.getItemTitle(obj)\r\n\t\t\tvar thumbnailProperty = this.options.thumbnailProperty\r\n\t\t\tvar thumbnailUrl\r\n\t\t\tvar thumbnail\r\n\t\t\tif (this.options.thumbnailIndicators) {\r\n\t\t\t\tif (thumbnailProperty) {\r\n\t\t\t\t\tthumbnailUrl = Album.getItemProperty(obj, thumbnailProperty)\r\n\t\t\t\t}\r\n\t\t\t\tif (thumbnailUrl === undefined) {\r\n\t\t\t\t\tthumbnail = obj.getElementsByTagName && $(obj).find('img')[0]\r\n\t\t\t\t\tif (thumbnail) {\r\n\t\t\t\t\t\tthumbnailUrl = thumbnail.src\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (thumbnailUrl) {\r\n\t\t\t\t\tindicator.style.backgroundImage = 'url(\"' + thumbnailUrl + '\")'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (title) {\r\n\t\t\t\tindicator.title = title;\r\n\t\t\t}\r\n\t\t\treturn indicator;\r\n\t\t},\r\n\r\n\t\taddIndicator: function (index) {\r\n\t\t\tif (this.indicatorContainer.length) {\r\n\t\t\t\tvar indicator = this.createIndicator(this.list[index])\r\n\t\t\t\tindicator.setAttribute('data-index', index)\r\n\t\t\t\tthis.indicatorContainer[0].appendChild(indicator)\r\n\t\t\t\tthis.indicators.push(indicator)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetActiveIndicator: function (index) {\r\n\t\t\tif (this.indicators) {\r\n\t\t\t\tif (this.activeIndicator) {\r\n\t\t\t\t\tthis.activeIndicator.removeClass(this.options.activeIndicatorClass)\r\n\t\t\t\t}\r\n\t\t\t\tthis.activeIndicator = $(this.indicators[index])\r\n\t\t\t\tthis.activeIndicator.addClass(this.options.activeIndicatorClass)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitSlides: function (reload) {\r\n\t\t\tif (!reload) {\r\n\t\t\t\tthis.indicatorContainer = this.container.find(\r\n\t\t\t\t\tthis.options.indicatorContainer\r\n\t\t\t\t)\r\n\t\t\t\tif (this.indicatorContainer.length) {\r\n\t\t\t\t\tthis.indicatorPrototype = document.createElement('li')\r\n\t\t\t\t\tthis.indicators = this.indicatorContainer[0].children\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.overrided(reload);\r\n\t\t},\r\n\r\n\t\taddSlide: function (index) {\r\n\t\t\tthis.overrided(index);\r\n\t\t\tthis.addIndicator(index)\r\n\t\t},\r\n\r\n\t\tresetSlides: function () {\r\n\t\t\tthis.overrided();\r\n\t\t\tthis.indicatorContainer.empty();\r\n\t\t\tthis.indicators = [];\r\n\t\t},\r\n\r\n\t\thandleClick: function (event) {\r\n\t\t\tvar target = event.target || event.srcElement\r\n\t\t\tvar parent = target.parentNode\r\n\t\t\tif (parent === this.indicatorContainer[0]) {\r\n\t\t\t\t// Click on indicator element\r\n\t\t\t\tthis.preventDefault(event)\r\n\t\t\t\tthis.slide(this.getNodeIndex(target))\r\n\t\t\t} else if (parent.parentNode === this.indicatorContainer[0]) {\r\n\t\t\t\t// Click on indicator child element\r\n\t\t\t\tthis.preventDefault(event)\r\n\t\t\t\tthis.slide(this.getNodeIndex(parent))\r\n\t\t\t} else {\r\n\t\t\t\treturn this.overrided(event)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thandleSlide: function (index) {\r\n\t\t\tthis.overrided(index)\r\n\t\t\tthis.setActiveIndicator(index)\r\n\t\t},\r\n\r\n\t\thandleClose: function () {\r\n\t\t\tif (this.activeIndicator) {\r\n\t\t\t\tthis.activeIndicator.removeClass(this.options.activeIndicatorClass)\r\n\t\t\t}\r\n\t\t\tthis.overrided();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tAlbum.installPlugin(\"views\", {\r\n\t\t\"name\": \"lightbox\",\r\n\t\t\"ctor\": LightBoxView,\r\n\t\t\"templates\": {\r\n\t\t\t\"default\": '<div class=\"slides\"></div>' +\r\n\t\t\t\t'<h3 class=\"title\"></h3>' +\r\n\t\t\t\t'<a class=\"prev\">‹</a>' +\r\n\t\t\t\t'<a class=\"next\">›</a>' +\r\n\t\t\t\t'<a class=\"close\">×</a>' +\r\n\t\t\t\t'<ol class=\"indicator\"></ol>'\r\n\t\t}\r\n\t});\r\n\r\n\treturn LightBoxView;\r\n\r\n});\ndefine('skylark-ui-album/main',[\r\n    \"./Album\",\r\n    \"./helper\",\r\n    \"./plugins/items/image\",\r\n    \"./plugins/items/video\",\r\n    \"./plugins/items/vimeo\",\r\n    \"./plugins/items/youtube\",\r\n    \"./plugins/views/SliderView\",\r\n    \"./plugins/views/CarouselView\",\r\n    \"./plugins/views/LightBoxView\"\r\n], function (Album) {\r\n    return Album;\r\n});\ndefine('skylark-ui-album', ['skylark-ui-album/main'], function (main) { return main; });\n\n"]}