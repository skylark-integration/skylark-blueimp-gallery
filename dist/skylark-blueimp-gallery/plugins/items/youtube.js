/**
 * skylark-blueimp-gallery - The skylark album widgets.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/noder","skylark-utils-dom/query","../../Gallery","./video"],function(e,t,a,i,o){"use strict";var s=e.Evented.inherit({klassName:"YouTubePlayer",init:function(e,t,a){this.videoId=e,this.playerVars=t,this.clickToPlay=a,this.element=document.createElement("div")},canPlayType:function(){return!0},loadAPI:function(){var e,t=this,a=window.onYouTubeIframeAPIReady,i="https://www.youtube.com/iframe_api",o=document.getElementsByTagName("script"),s=o.length;for(window.onYouTubeIframeAPIReady=function(){a&&a.apply(this),t.playOnReady&&t.play()};s;)if(o[s-=1].src===i)return;(e=document.createElement("script")).src=i,o[0].parentNode.insertBefore(e,o[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){i.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){this.stateChange!==YT.PlayerState.PAUSED&&this.stateChange!==YT.PlayerState.ENDED||(this.listeners.pause(),delete this.playStatus)},onStateChange:function(e){switch(e.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=e.data},onError:function(e){this.trigger("error",e)},play:function(){var e=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){e.onReady()},onStateChange:function(t){e.onStateChange(t)},onError:function(t){e.onError(t)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),n=o.ctor.inherit({klassName:"YouTubeItemFactory",YouTubePlayer:s,options:{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0},initOptions:function(t){this.overrided(),this.options=e.mixin(this.options,n.prototype.options,t)},render:function(e,t){var a=this.options,i=this.getItemProperty(e,a.youTubeVideoIdProperty);if(i)return void 0===this.getItemProperty(e,a.urlProperty)&&(e[a.urlProperty]="//www.youtube.com/watch?v="+i),void 0===this.getItemProperty(e,a.videoPosterProperty)&&(e[a.videoPosterProperty]="//img.youtube.com/vi/"+i+"/maxresdefault.jpg"),this.overrided(e,t,new s(i,a.youTubePlayerVars,a.youTubeClickToPlay))}}),r={name:"youtube",mimeType:"youtube",ctor:n};return i.installPlugin("items",r),r});
//# sourceMappingURL=../../sourcemaps/plugins/items/youtube.js.map
