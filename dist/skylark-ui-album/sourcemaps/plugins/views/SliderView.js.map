{"version":3,"sources":["plugins/views/SliderView.js"],"names":["define","langx","$","Album","SliderView","ViewBase","inherit","klassName","options","container","slidesContainer","titleElement","displayClass","singleClass","leftEdgeClass","rightEdgeClass","playingClass","slideClass","slideLoadingClass","slideErrorClass","slideContentClass","toggleClass","prevClass","nextClass","closeClass","playPauseClass","displayTransition","clearSlides","toggleControlsOnReturn","toggleControlsOnSlideClick","toggleSlideshowOnSpace","enableKeyboardNavigation","closeOnEscape","closeOnSlideClick","closeOnSwipeUpOrDown","emulateTouchEvents","stopTouchEventsPropagation","hidePageScrollbars","disableScroll","carousel","continuous","unloadElements","startSlideshow","slideshowInterval","index","preloadRange","transitionSpeed","slideshowTransitionSpeed","undefined","event","onopen","onopened","onslide","onslideend","onslidecomplete","onclose","onclosed","console","window","log","support","element","elementTests","prop","translateZ","transition","document","body","appendChild","name","slice","style","getComputedStyle","getPropertyValue","prefix","transform","translate","backgroundSize","contain","cover","removeChild","touch","ontouchstart","DocumentTouch","transitions","webkitTransition","end","MozTransition","OTransition","hasOwnProperty","on","createElement","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelRequestAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","init","album","this","overrided","list","items","el","num","length","initStartIndex","initWidget","initEventListeners","ontransitionend","play","slide","to","speed","clearTimeout","timeout","direction","naturalDirection","diff","circle","Math","abs","positions","slideWidth","move","animate","getIndex","getNumber","prev","next","time","that","interval","elements","setTimeout","animationFrameId","call","addClass","pause","removeClass","add","i","concat","Array","prototype","addSlide","positionSlide","initSlides","resetSlides","empty","unloadAllSlides","slides","handleClose","destroyEventListeners","display","overflow","bodyOverflowStyle","close","closeHandler","target","off","dist","translateX","x","y","translateY","from","left","start","Date","getTime","timer","setInterval","timeElap","clearInterval","floor","preventDefault","returnValue","stopPropagation","cancelBubble","onresize","onmousedown","which","nodeName","originalEvent","touches","pageX","pageY","onmousemove","touchStart","ontouchmove","onmouseup","ontouchend","onmouseout","related","relatedTarget","contains","now","isScrolling","touchDelta","touchDeltaX","indices","scale","push","unshift","pop","indexForward","indexBackward","distanceForward","distanceBackward","isShortDuration","Number","isValidSlide","isPastBounds","isValidClose","slideHeight","ontouchcancel","oncomplete","srcElement","parent","parentNode","getNodeIndex","type","clientHeight","maxHeight","onload","onerror","onkeydown","keyCode","toggleControls","stopImmediatePropagation","toggleSlideshow","handleClick","isTarget","className","hasClass","onclick","updateEdgeClasses","handleSlide","loadElements","setTitle","firstChild","text","title","alt","createTextNode","func","args","wait","apply","obj","callback","renderItem","loadElement","proxyListener","limit","min","j","unloadSlide","slidePrototype","cloneNode","setAttribute","width","reload","imagePrototype","elementPrototype","children","clientWidth","len","controlsClass","parseInt","getAttribute","getItemUrl","handleOpen","openHandler","find","first","initOptions","mixin","installPlugin","ctor","templates","default"],"mappings":"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","file":"../../../plugins/views/SliderView.js","sourcesContent":["/* global define, window, document, DocumentTouch */\r\n\r\ndefine([\r\n  'skylark-langx/langx',\r\n  '../../helper',\r\n  '../../Album'\r\n], function (langx, $, Album) {\r\n  'use strict'\r\n  var SliderView = Album.ViewBase.inherit({\r\n    klassName: \"SliderView\",\r\n    options: {\r\n      // The Id, element or querySelector of the album view:\r\n      container: null,\r\n      // The tag name, Id, element or querySelector of the slides container:\r\n      slidesContainer: 'div',\r\n      // The tag name, Id, element or querySelector of the title element:\r\n      titleElement: 'h3',\r\n      // The class to add when the gallery is visible:\r\n      displayClass: 'skylarkui-album-display',\r\n      // The class to add when the gallery only displays one element:\r\n      singleClass: 'skylarkui-album-single',\r\n      // The class to add when the left edge has been reached:\r\n      leftEdgeClass: 'skylarkui-album-left',\r\n      // The class to add when the right edge has been reached:\r\n      rightEdgeClass: 'skylarkui-album-right',\r\n      // The class to add when the automatic slideshow is active:\r\n      playingClass: 'skylarkui-album-playing',\r\n      // The class for all slides:\r\n      slideClass: 'slide',\r\n      // The slide class for loading elements:\r\n      slideLoadingClass: 'slide-loading',\r\n      // The slide class for elements that failed to load:\r\n      slideErrorClass: 'slide-error',\r\n      // The class for the content element loaded into each slide:\r\n      slideContentClass: 'slide-content',\r\n      // The class for the \"toggle\" control:\r\n      toggleClass: 'toggle',\r\n      // The class for the \"prev\" control:\r\n      prevClass: 'prev',\r\n      // The class for the \"next\" control:\r\n      nextClass: 'next',\r\n      // The class for the \"close\" control:\r\n      closeClass: 'close',\r\n      // The class for the \"play-pause\" toggle control:\r\n      playPauseClass: 'play-pause',\r\n      // The list object property (or data attribute) with the object type:\r\n      //--- typeProperty: 'type',\r\n      // The list object property (or data attribute) with the object title:\r\n      //--- titleProperty: 'title',\r\n      // The list object property (or data attribute) with the object alt text:\r\n      //--- altTextProperty: 'alt',\r\n      // The list object property (or data attribute) with the object URL:\r\n      //--- urlProperty: 'href',\r\n      // The list object property (or data attribute) with the object srcset URL(s):\r\n      //--- srcsetProperty: 'urlset',\r\n      // The gallery listens for transitionend events before triggering the\r\n      // opened and closed events, unless the following option is set to false:\r\n      displayTransition: true,\r\n      // Defines if the gallery slides are cleared from the gallery modal,\r\n      // or reused for the next gallery initialization:\r\n      clearSlides: true,\r\n      // Defines if images should be stretched to fill the available space,\r\n      // while maintaining their aspect ratio (will only be enabled for browsers\r\n      // supporting background-size=\"contain\", which excludes IE < 9).\r\n      // Set to \"cover\", to make images cover all available space (requires\r\n      // support for background-size=\"cover\", which excludes IE < 9):\r\n      //--- stretchImages: false,\r\n      // Toggle the controls on pressing the Return key:\r\n      toggleControlsOnReturn: true,\r\n      // Toggle the controls on slide click:\r\n      toggleControlsOnSlideClick: true,\r\n      // Toggle the automatic slideshow interval on pressing the Space key:\r\n      toggleSlideshowOnSpace: true,\r\n      // Navigate the gallery by pressing left and right on the keyboard:\r\n      enableKeyboardNavigation: true,\r\n      // Close the gallery on pressing the Esc key:\r\n      closeOnEscape: true,\r\n      // Close the gallery when clicking on an empty slide area:\r\n      closeOnSlideClick: true,\r\n      // Close the gallery by swiping up or down:\r\n      closeOnSwipeUpOrDown: true,\r\n      // Emulate touch events on mouse-pointer devices such as desktop browsers:\r\n      emulateTouchEvents: true,\r\n      // Stop touch events from bubbling up to ancestor elements of the Gallery:\r\n      stopTouchEventsPropagation: false,\r\n      // Hide the page scrollbars:\r\n      hidePageScrollbars: false,\r\n      // Stops any touches on the container from scrolling the page:\r\n      disableScroll: true,\r\n      // Carousel mode (shortcut for carousel specific options):\r\n      carousel: false,\r\n      // Allow continuous navigation, moving from last to first\r\n      // and from first to last slide:\r\n      continuous: true,\r\n      // Remove elements outside of the preload range from the DOM:\r\n      unloadElements: true,\r\n      // Start with the automatic slideshow:\r\n      startSlideshow: false,\r\n      // Delay in milliseconds between slides for the automatic slideshow:\r\n      slideshowInterval: 5000,\r\n      // The starting index as integer.\r\n      // Can also be an object of the given list,\r\n      // or an equal object with the same url property:\r\n      index: 0,\r\n      // The number of elements to load around the current index:\r\n      preloadRange: 2,\r\n      // The transition speed between slide changes in milliseconds:\r\n      transitionSpeed: 400,\r\n      // The transition speed for automatic slide changes, set to an integer\r\n      // greater 0 to override the default transition speed:\r\n      slideshowTransitionSpeed: undefined,\r\n      // The event object for which the default action will be canceled\r\n      // on Gallery initialization (e.g. the click event to open the Gallery):\r\n      event: undefined,\r\n      // Callback function executed when the Gallery is initialized.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onopen: undefined,\r\n      // Callback function executed when the Gallery has been initialized\r\n      // and the initialization transition has been completed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onopened: undefined,\r\n      // Callback function executed on slide change.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // current index and slide as arguments:\r\n      onslide: undefined,\r\n      // Callback function executed after the slide change transition.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // current index and slide as arguments:\r\n      onslideend: undefined,\r\n      // Callback function executed on slide content load.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // slide index and slide element as arguments:\r\n      onslidecomplete: undefined,\r\n      // Callback function executed when the Gallery is about to be closed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onclose: undefined,\r\n      // Callback function executed when the Gallery has been closed\r\n      // and the closing transition has been completed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onclosed: undefined\r\n    },\r\n\r\n    /*---\r\n    carouselOptions: {\r\n      hidePageScrollbars: false,\r\n      toggleControlsOnReturn: false,\r\n      toggleSlideshowOnSpace: false,\r\n      enableKeyboardNavigation: false,\r\n      closeOnEscape: false,\r\n      closeOnSlideClick: false,\r\n      closeOnSwipeUpOrDown: false,\r\n      disableScroll: false,\r\n      startSlideshow: true\r\n    },\r\n    */\r\n\r\n    console: window.console && typeof window.console.log === 'function' ?\r\n      window.console : {\r\n        log: function () {}\r\n      },\r\n\r\n    // Detect touch, transition, transform and background-size support:\r\n    support: (function (element) {\r\n      var support = {\r\n        touch: window.ontouchstart !== undefined ||\r\n          (window.DocumentTouch && document instanceof DocumentTouch)\r\n      }\r\n      var transitions = {\r\n        webkitTransition: {\r\n          end: 'webkitTransitionEnd',\r\n          prefix: '-webkit-'\r\n        },\r\n        MozTransition: {\r\n          end: 'transitionend',\r\n          prefix: '-moz-'\r\n        },\r\n        OTransition: {\r\n          end: 'otransitionend',\r\n          prefix: '-o-'\r\n        },\r\n        transition: {\r\n          end: 'transitionend',\r\n          prefix: ''\r\n        }\r\n      }\r\n      var prop\r\n      for (prop in transitions) {\r\n        if (\r\n          transitions.hasOwnProperty(prop) &&\r\n          element.style[prop] !== undefined\r\n        ) {\r\n          support.transition = transitions[prop]\r\n          support.transition.name = prop\r\n          break\r\n        }\r\n      }\r\n\r\n      function elementTests() {\r\n        var transition = support.transition\r\n        var prop\r\n        var translateZ\r\n        document.body.appendChild(element)\r\n        if (transition) {\r\n          prop = transition.name.slice(0, -9) + 'ransform'\r\n          if (element.style[prop] !== undefined) {\r\n            element.style[prop] = 'translateZ(0)'\r\n            translateZ = window\r\n              .getComputedStyle(element)\r\n              .getPropertyValue(transition.prefix + 'transform')\r\n            support.transform = {\r\n              prefix: transition.prefix,\r\n              name: prop,\r\n              translate: true,\r\n              translateZ: !!translateZ && translateZ !== 'none'\r\n            }\r\n          }\r\n        }\r\n        if (element.style.backgroundSize !== undefined) {\r\n          support.backgroundSize = {}\r\n          element.style.backgroundSize = 'contain'\r\n          support.backgroundSize.contain =\r\n            window\r\n            .getComputedStyle(element)\r\n            .getPropertyValue('background-size') === 'contain'\r\n          element.style.backgroundSize = 'cover'\r\n          support.backgroundSize.cover =\r\n            window\r\n            .getComputedStyle(element)\r\n            .getPropertyValue('background-size') === 'cover'\r\n        }\r\n        document.body.removeChild(element)\r\n      }\r\n      if (document.body) {\r\n        elementTests()\r\n      } else {\r\n        $(document).on('DOMContentLoaded', elementTests)\r\n      }\r\n      return support\r\n      // Test element, has to be standard HTML and must not be hidden\r\n      // for the CSS3 tests using window.getComputedStyle to be applicable:\r\n    })(document.createElement('div')),\r\n\r\n    requestAnimationFrame: window.requestAnimationFrame ||\r\n      window.webkitRequestAnimationFrame ||\r\n      window.mozRequestAnimationFrame,\r\n\r\n    cancelAnimationFrame: window.cancelAnimationFrame ||\r\n      window.webkitCancelRequestAnimationFrame ||\r\n      window.webkitCancelAnimationFrame ||\r\n      window.mozCancelAnimationFrame,\r\n\r\n    init: function (album, options) {\r\n      this.overrided(album, options);\r\n\r\n      this.list = this.album.items;\r\n      this.options.container = this.album.el;\r\n      this.num = this.list.length;\r\n\r\n      this.initStartIndex()\r\n      if (this.initWidget() === false) {\r\n        return false\r\n      }\r\n      this.initEventListeners()\r\n      // Load the slide at the given index:\r\n      this.onslide(this.index)\r\n      // Manually trigger the slideend event for the initial slide:\r\n      this.ontransitionend()\r\n      // Start the automatic slideshow if applicable:\r\n      if (this.options.startSlideshow) {\r\n        this.play()\r\n      }\r\n    },\r\n\r\n    slide: function (to, speed) {\r\n      window.clearTimeout(this.timeout)\r\n      var index = this.index\r\n      var direction\r\n      var naturalDirection\r\n      var diff\r\n      if (index === to || this.num === 1) {\r\n        return\r\n      }\r\n      if (!speed) {\r\n        speed = this.options.transitionSpeed\r\n      }\r\n      if (this.support.transform) {\r\n        if (!this.options.continuous) {\r\n          to = this.circle(to)\r\n        }\r\n        // 1: backward, -1: forward:\r\n        direction = Math.abs(index - to) / (index - to)\r\n        // Get the actual position of the slide:\r\n        if (this.options.continuous) {\r\n          naturalDirection = direction\r\n          direction = -this.positions[this.circle(to)] / this.slideWidth\r\n          // If going forward but to < index, use to = slides.length + to\r\n          // If going backward but to > index, use to = -slides.length + to\r\n          if (direction !== naturalDirection) {\r\n            to = -direction * this.num + to\r\n          }\r\n        }\r\n        diff = Math.abs(index - to) - 1\r\n        // Move all the slides between index and to in the right direction:\r\n        while (diff) {\r\n          diff -= 1\r\n          this.move(\r\n            this.circle((to > index ? to : index) - diff - 1),\r\n            this.slideWidth * direction,\r\n            0\r\n          )\r\n        }\r\n        to = this.circle(to)\r\n        this.move(index, this.slideWidth * direction, speed)\r\n        this.move(to, 0, speed)\r\n        if (this.options.continuous) {\r\n          this.move(\r\n            this.circle(to - direction),\r\n            -(this.slideWidth * direction),\r\n            0\r\n          )\r\n        }\r\n      } else {\r\n        to = this.circle(to)\r\n        this.animate(index * -this.slideWidth, to * -this.slideWidth, speed)\r\n      }\r\n      this.onslide(to)\r\n    },\r\n\r\n    getIndex: function () {\r\n      return this.index\r\n    },\r\n\r\n    getNumber: function () {\r\n      return this.num\r\n    },\r\n\r\n    prev: function () {\r\n      if (this.options.continuous || this.index) {\r\n        this.slide(this.index - 1)\r\n      }\r\n    },\r\n\r\n    next: function () {\r\n      if (this.options.continuous || this.index < this.num - 1) {\r\n        this.slide(this.index + 1)\r\n      }\r\n    },\r\n\r\n    play: function (time) {\r\n      var that = this\r\n      window.clearTimeout(this.timeout)\r\n      this.interval = time || this.options.slideshowInterval\r\n      if (this.elements[this.index] > 1) {\r\n        this.timeout = this.setTimeout(\r\n          (!this.requestAnimationFrame && this.slide) ||\r\n          function (to, speed) {\r\n            that.animationFrameId = that.requestAnimationFrame.call(\r\n              window,\r\n              function () {\r\n                that.slide(to, speed)\r\n              }\r\n            )\r\n          },\r\n          [this.index + 1, this.options.slideshowTransitionSpeed],\r\n          this.interval\r\n        )\r\n      }\r\n      this.container.addClass(this.options.playingClass)\r\n    },\r\n\r\n    pause: function () {\r\n      window.clearTimeout(this.timeout)\r\n      this.interval = null\r\n      if (this.cancelAnimationFrame) {\r\n        this.cancelAnimationFrame.call(window, this.animationFrameId)\r\n        this.animationFrameId = null\r\n      }\r\n      this.container.removeClass(this.options.playingClass)\r\n    },\r\n\r\n    add: function (list) {\r\n      var i\r\n      if (!list.concat) {\r\n        // Make a real array out of the list to add:\r\n        list = Array.prototype.slice.call(list)\r\n      }\r\n      if (!this.list.concat) {\r\n        // Make a real array out of the Gallery list:\r\n        this.list = Array.prototype.slice.call(this.list)\r\n      }\r\n      this.list = this.list.concat(list)\r\n      this.num = this.list.length\r\n      if (this.num > 2 && this.options.continuous === null) {\r\n        this.options.continuous = true\r\n        this.container.removeClass(this.options.leftEdgeClass)\r\n      }\r\n      this.container\r\n        .removeClass(this.options.rightEdgeClass)\r\n        .removeClass(this.options.singleClass)\r\n      for (i = this.num - list.length; i < this.num; i += 1) {\r\n        this.addSlide(i)\r\n        this.positionSlide(i)\r\n      }\r\n      this.positions.length = this.num\r\n      this.initSlides(true)\r\n    },\r\n\r\n    resetSlides: function () {\r\n      this.slidesContainer.empty()\r\n      this.unloadAllSlides()\r\n      this.slides = []\r\n    },\r\n\r\n    handleClose: function () {\r\n      var options = this.options\r\n      this.destroyEventListeners()\r\n      // Cancel the slideshow:\r\n      this.pause()\r\n      this.container[0].style.display = 'none'\r\n      this.container\r\n        .removeClass(options.displayClass)\r\n        .removeClass(options.singleClass)\r\n        .removeClass(options.leftEdgeClass)\r\n        .removeClass(options.rightEdgeClass)\r\n      if (options.hidePageScrollbars) {\r\n        document.body.style.overflow = this.bodyOverflowStyle\r\n      }\r\n      if (this.options.clearSlides) {\r\n        this.resetSlides()\r\n      }\r\n      if (this.options.onclosed) {\r\n        this.options.onclosed.call(this)\r\n      }\r\n    },\r\n\r\n    close: function () {\r\n      var that = this\r\n\r\n      function closeHandler(event) {\r\n        if (event.target === that.container[0]) {\r\n          that.container.off(that.support.transition.end, closeHandler)\r\n          that.handleClose()\r\n        }\r\n      }\r\n      if (this.options.onclose) {\r\n        this.options.onclose.call(this)\r\n      }\r\n      if (this.support.transition && this.options.displayTransition) {\r\n        this.container.on(this.support.transition.end, closeHandler)\r\n        this.container.removeClass(this.options.displayClass)\r\n      } else {\r\n        this.handleClose()\r\n      }\r\n    },\r\n\r\n    circle: function (index) {\r\n      // Always return a number inside of the slides index range:\r\n      return (this.num + index % this.num) % this.num\r\n    },\r\n\r\n    move: function (index, dist, speed) {\r\n      this.translateX(index, dist, speed)\r\n      this.positions[index] = dist\r\n    },\r\n\r\n    translate: function (index, x, y, speed) {\r\n      var style = this.slides[index].style\r\n      var transition = this.support.transition\r\n      var transform = this.support.transform\r\n      style[transition.name + 'Duration'] = speed + 'ms'\r\n      style[transform.name] =\r\n        'translate(' +\r\n        x +\r\n        'px, ' +\r\n        y +\r\n        'px)' +\r\n        (transform.translateZ ? ' translateZ(0)' : '')\r\n    },\r\n\r\n    translateX: function (index, x, speed) {\r\n      this.translate(index, x, 0, speed)\r\n    },\r\n\r\n    translateY: function (index, y, speed) {\r\n      this.translate(index, 0, y, speed)\r\n    },\r\n\r\n    animate: function (from, to, speed) {\r\n      if (!speed) {\r\n        this.slidesContainer[0].style.left = to + 'px'\r\n        return\r\n      }\r\n      var that = this\r\n      var start = new Date().getTime()\r\n      var timer = window.setInterval(function () {\r\n        var timeElap = new Date().getTime() - start\r\n        if (timeElap > speed) {\r\n          that.slidesContainer[0].style.left = to + 'px'\r\n          that.ontransitionend()\r\n          window.clearInterval(timer)\r\n          return\r\n        }\r\n        that.slidesContainer[0].style.left =\r\n          (to - from) * (Math.floor(timeElap / speed * 100) / 100) + from + 'px'\r\n      }, 4)\r\n    },\r\n\r\n    preventDefault: function (event) {\r\n      if (event.preventDefault) {\r\n        event.preventDefault()\r\n      } else {\r\n        event.returnValue = false\r\n      }\r\n    },\r\n\r\n    stopPropagation: function (event) {\r\n      if (event.stopPropagation) {\r\n        event.stopPropagation()\r\n      } else {\r\n        event.cancelBubble = true\r\n      }\r\n    },\r\n\r\n    onresize: function () {\r\n      this.initSlides(true)\r\n    },\r\n\r\n    onmousedown: function (event) {\r\n      // Trigger on clicks of the left mouse button only\r\n      // and exclude video & audio elements:\r\n      if (\r\n        event.which &&\r\n        event.which === 1 &&\r\n        event.target.nodeName !== 'VIDEO' &&\r\n        event.target.nodeName !== 'AUDIO'\r\n      ) {\r\n        // Preventing the default mousedown action is required\r\n        // to make touch emulation work with Firefox:\r\n        event.preventDefault();\r\n        (event.originalEvent || event).touches = [{\r\n          pageX: event.pageX,\r\n          pageY: event.pageY\r\n        }]\r\n        this.ontouchstart(event)\r\n      }\r\n    },\r\n\r\n    onmousemove: function (event) {\r\n      if (this.touchStart) {;\r\n        (event.originalEvent || event).touches = [{\r\n          pageX: event.pageX,\r\n          pageY: event.pageY\r\n        }]\r\n        this.ontouchmove(event)\r\n      }\r\n    },\r\n\r\n    onmouseup: function (event) {\r\n      if (this.touchStart) {\r\n        this.ontouchend(event)\r\n        delete this.touchStart\r\n      }\r\n    },\r\n\r\n    onmouseout: function (event) {\r\n      if (this.touchStart) {\r\n        var target = event.target\r\n        var related = event.relatedTarget\r\n        if (!related || (related !== target && !$.contains(target, related))) {\r\n          this.onmouseup(event)\r\n        }\r\n      }\r\n    },\r\n\r\n    ontouchstart: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      // jQuery doesn't copy touch event properties by default,\r\n      // so we have to access the originalEvent object:\r\n      var touches = (event.originalEvent || event).touches[0]\r\n      this.touchStart = {\r\n        // Remember the initial touch coordinates:\r\n        x: touches.pageX,\r\n        y: touches.pageY,\r\n        // Store the time to determine touch duration:\r\n        time: Date.now()\r\n      }\r\n      // Helper variable to detect scroll movement:\r\n      this.isScrolling = undefined\r\n      // Reset delta values:\r\n      this.touchDelta = {}\r\n    },\r\n\r\n    ontouchmove: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      // jQuery doesn't copy touch event properties by default,\r\n      // so we have to access the originalEvent object:\r\n      var touches = (event.originalEvent || event).touches[0]\r\n      var scale = (event.originalEvent || event).scale\r\n      var index = this.index\r\n      var touchDeltaX\r\n      var indices\r\n      // Ensure this is a one touch swipe and not, e.g. a pinch:\r\n      if (touches.length > 1 || (scale && scale !== 1)) {\r\n        return\r\n      }\r\n      if (this.options.disableScroll) {\r\n        event.preventDefault()\r\n      }\r\n      // Measure change in x and y coordinates:\r\n      this.touchDelta = {\r\n        x: touches.pageX - this.touchStart.x,\r\n        y: touches.pageY - this.touchStart.y\r\n      }\r\n      touchDeltaX = this.touchDelta.x\r\n      // Detect if this is a vertical scroll movement (run only once per touch):\r\n      if (this.isScrolling === undefined) {\r\n        this.isScrolling =\r\n          this.isScrolling ||\r\n          Math.abs(touchDeltaX) < Math.abs(this.touchDelta.y)\r\n      }\r\n      if (!this.isScrolling) {\r\n        // Always prevent horizontal scroll:\r\n        event.preventDefault()\r\n        // Stop the slideshow:\r\n        window.clearTimeout(this.timeout)\r\n        if (this.options.continuous) {\r\n          indices = [this.circle(index + 1), index, this.circle(index - 1)]\r\n        } else {\r\n          // Increase resistance if first slide and sliding left\r\n          // or last slide and sliding right:\r\n          this.touchDelta.x = touchDeltaX =\r\n            touchDeltaX /\r\n            ((!index && touchDeltaX > 0) ||\r\n              (index === this.num - 1 && touchDeltaX < 0) ?\r\n              Math.abs(touchDeltaX) / this.slideWidth + 1 :\r\n              1)\r\n          indices = [index]\r\n          if (index) {\r\n            indices.push(index - 1)\r\n          }\r\n          if (index < this.num - 1) {\r\n            indices.unshift(index + 1)\r\n          }\r\n        }\r\n        while (indices.length) {\r\n          index = indices.pop()\r\n          this.translateX(index, touchDeltaX + this.positions[index], 0)\r\n        }\r\n      } else {\r\n        this.translateY(index, this.touchDelta.y + this.positions[index], 0)\r\n      }\r\n    },\r\n\r\n    ontouchend: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        this.stopPropagation(event)\r\n      }\r\n      var index = this.index\r\n      var speed = this.options.transitionSpeed\r\n      var slideWidth = this.slideWidth\r\n      var isShortDuration = Number(Date.now() - this.touchStart.time) < 250\r\n      // Determine if slide attempt triggers next/prev slide:\r\n      var isValidSlide =\r\n        (isShortDuration && Math.abs(this.touchDelta.x) > 20) ||\r\n        Math.abs(this.touchDelta.x) > slideWidth / 2\r\n      // Determine if slide attempt is past start or end:\r\n      var isPastBounds =\r\n        (!index && this.touchDelta.x > 0) ||\r\n        (index === this.num - 1 && this.touchDelta.x < 0)\r\n      var isValidClose = !isValidSlide &&\r\n        this.options.closeOnSwipeUpOrDown &&\r\n        ((isShortDuration && Math.abs(this.touchDelta.y) > 20) ||\r\n          Math.abs(this.touchDelta.y) > this.slideHeight / 2)\r\n      var direction\r\n      var indexForward\r\n      var indexBackward\r\n      var distanceForward\r\n      var distanceBackward\r\n      if (this.options.continuous) {\r\n        isPastBounds = false\r\n      }\r\n      // Determine direction of swipe (true: right, false: left):\r\n      direction = this.touchDelta.x < 0 ? -1 : 1\r\n      if (!this.isScrolling) {\r\n        if (isValidSlide && !isPastBounds) {\r\n          indexForward = index + direction\r\n          indexBackward = index - direction\r\n          distanceForward = slideWidth * direction\r\n          distanceBackward = -slideWidth * direction\r\n          if (this.options.continuous) {\r\n            this.move(this.circle(indexForward), distanceForward, 0)\r\n            this.move(this.circle(index - 2 * direction), distanceBackward, 0)\r\n          } else if (indexForward >= 0 && indexForward < this.num) {\r\n            this.move(indexForward, distanceForward, 0)\r\n          }\r\n          this.move(index, this.positions[index] + distanceForward, speed)\r\n          this.move(\r\n            this.circle(indexBackward),\r\n            this.positions[this.circle(indexBackward)] + distanceForward,\r\n            speed\r\n          )\r\n          index = this.circle(indexBackward)\r\n          this.onslide(index)\r\n        } else {\r\n          // Move back into position\r\n          if (this.options.continuous) {\r\n            this.move(this.circle(index - 1), -slideWidth, speed)\r\n            this.move(index, 0, speed)\r\n            this.move(this.circle(index + 1), slideWidth, speed)\r\n          } else {\r\n            if (index) {\r\n              this.move(index - 1, -slideWidth, speed)\r\n            }\r\n            this.move(index, 0, speed)\r\n            if (index < this.num - 1) {\r\n              this.move(index + 1, slideWidth, speed)\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (isValidClose) {\r\n          this.close()\r\n        } else {\r\n          // Move back into position\r\n          this.translateY(index, 0, speed)\r\n        }\r\n      }\r\n    },\r\n\r\n    ontouchcancel: function (event) {\r\n      if (this.touchStart) {\r\n        this.ontouchend(event)\r\n        delete this.touchStart\r\n      }\r\n    },\r\n\r\n    ontransitionend: function (event) {\r\n      var slide = this.slides[this.index]\r\n      if (!event || slide === event.target) {\r\n        if (this.interval) {\r\n          this.play()\r\n        }\r\n        this.setTimeout(this.options.onslideend, [this.index, slide])\r\n      }\r\n    },\r\n\r\n    oncomplete: function (event) {\r\n      var target = event.target || event.srcElement\r\n      var parent = target && target.parentNode\r\n      var index\r\n      if (!target || !parent) {\r\n        return\r\n      }\r\n      index = this.getNodeIndex(parent)\r\n      $(parent).removeClass(this.options.slideLoadingClass)\r\n      if (event.type === 'error') {\r\n        $(parent).addClass(this.options.slideErrorClass)\r\n        this.elements[index] = 3 // Fail\r\n      } else {\r\n        this.elements[index] = 2 // Done\r\n      }\r\n      // Fix for IE7's lack of support for percentage max-height:\r\n      if (target.clientHeight > this.container[0].clientHeight) {\r\n        target.style.maxHeight = this.container[0].clientHeight\r\n      }\r\n      if (this.interval && this.slides[this.index] === parent) {\r\n        this.play()\r\n      }\r\n      this.setTimeout(this.options.onslidecomplete, [index, parent])\r\n    },\r\n\r\n    onload: function (event) {\r\n      this.oncomplete(event)\r\n    },\r\n\r\n    onerror: function (event) {\r\n      this.oncomplete(event)\r\n    },\r\n\r\n    onkeydown: function (event) {\r\n      switch (event.which || event.keyCode) {\r\n        case 13: // Return\r\n          if (this.options.toggleControlsOnReturn) {\r\n            this.preventDefault(event)\r\n            this.toggleControls()\r\n          }\r\n          break\r\n        case 27: // Esc\r\n          if (this.options.closeOnEscape) {\r\n            this.close()\r\n            // prevent Esc from closing other things\r\n            event.stopImmediatePropagation()\r\n          }\r\n          break\r\n        case 32: // Space\r\n          if (this.options.toggleSlideshowOnSpace) {\r\n            this.preventDefault(event)\r\n            this.toggleSlideshow()\r\n          }\r\n          break\r\n        case 37: // Left\r\n          if (this.options.enableKeyboardNavigation) {\r\n            this.preventDefault(event)\r\n            this.prev()\r\n          }\r\n          break\r\n        case 39: // Right\r\n          if (this.options.enableKeyboardNavigation) {\r\n            this.preventDefault(event)\r\n            this.next()\r\n          }\r\n          break\r\n      }\r\n    },\r\n\r\n    handleClick: function (event) {\r\n      var options = this.options\r\n      var target = event.target || event.srcElement\r\n      var parent = target.parentNode\r\n\r\n      function isTarget(className) {\r\n        return $(target).hasClass(className) || $(parent).hasClass(className)\r\n      }\r\n      if (isTarget(options.toggleClass)) {\r\n        // Click on \"toggle\" control\r\n        this.preventDefault(event)\r\n        this.toggleControls()\r\n      } else if (isTarget(options.prevClass)) {\r\n        // Click on \"prev\" control\r\n        this.preventDefault(event)\r\n        this.prev()\r\n      } else if (isTarget(options.nextClass)) {\r\n        // Click on \"next\" control\r\n        this.preventDefault(event)\r\n        this.next()\r\n      } else if (isTarget(options.closeClass)) {\r\n        // Click on \"close\" control\r\n        this.preventDefault(event)\r\n        this.close()\r\n      } else if (isTarget(options.playPauseClass)) {\r\n        // Click on \"play-pause\" control\r\n        this.preventDefault(event)\r\n        this.toggleSlideshow()\r\n      } else if (parent === this.slidesContainer[0]) {\r\n        // Click on slide background\r\n        if (options.closeOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.close()\r\n        } else if (options.toggleControlsOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.toggleControls()\r\n        }\r\n      } else if (\r\n        parent.parentNode &&\r\n        parent.parentNode === this.slidesContainer[0]\r\n      ) {\r\n        // Click on displayed element\r\n        if (options.toggleControlsOnSlideClick) {\r\n          this.preventDefault(event)\r\n          this.toggleControls()\r\n        }\r\n      }\r\n    },\r\n\r\n    onclick: function (event) {\r\n      if (\r\n        this.options.emulateTouchEvents &&\r\n        this.touchDelta &&\r\n        (Math.abs(this.touchDelta.x) > 20 || Math.abs(this.touchDelta.y) > 20)\r\n      ) {\r\n        delete this.touchDelta\r\n        return\r\n      }\r\n      return this.handleClick(event)\r\n    },\r\n\r\n    updateEdgeClasses: function (index) {\r\n      if (!index) {\r\n        this.container.addClass(this.options.leftEdgeClass)\r\n      } else {\r\n        this.container.removeClass(this.options.leftEdgeClass)\r\n      }\r\n      if (index === this.num - 1) {\r\n        this.container.addClass(this.options.rightEdgeClass)\r\n      } else {\r\n        this.container.removeClass(this.options.rightEdgeClass)\r\n      }\r\n    },\r\n\r\n    handleSlide: function (index) {\r\n      if (!this.options.continuous) {\r\n        this.updateEdgeClasses(index)\r\n      }\r\n      this.loadElements(index)\r\n      if (this.options.unloadElements) {\r\n        this.unloadElements(index)\r\n      }\r\n      this.setTitle(index)\r\n    },\r\n\r\n    onslide: function (index) {\r\n      this.index = index\r\n      this.handleSlide(index)\r\n      this.setTimeout(this.options.onslide, [index, this.slides[index]])\r\n    },\r\n\r\n    setTitle: function (index) {\r\n      var firstChild = this.slides[index].firstChild\r\n      var text = firstChild.title || firstChild.alt\r\n      var titleElement = this.titleElement\r\n      if (titleElement.length) {\r\n        this.titleElement.empty()\r\n        if (text) {\r\n          titleElement[0].appendChild(document.createTextNode(text))\r\n        }\r\n      }\r\n    },\r\n\r\n    setTimeout: function (func, args, wait) {\r\n      var that = this\r\n      return (\r\n        func &&\r\n        window.setTimeout(function () {\r\n          func.apply(that, args || [])\r\n        }, wait || 0)\r\n      )\r\n    },\r\n\r\n    createElement: function (obj, callback) {\r\n      var element = this.album.renderItem(obj, callback);\r\n      $(element).addClass(this.options.slideContentClass);\r\n      return element;\r\n    },\r\n\r\n    loadElement: function (index) {\r\n      if (!this.elements[index]) {\r\n        if (this.slides[index].firstChild) {\r\n          this.elements[index] = $(this.slides[index]).hasClass(\r\n              this.options.slideErrorClass\r\n            ) ?\r\n            3 :\r\n            2\r\n        } else {\r\n          this.elements[index] = 1 // Loading\r\n          $(this.slides[index]).addClass(this.options.slideLoadingClass)\r\n          this.slides[index].appendChild(\r\n            this.createElement(this.list[index], this.proxyListener)\r\n          )\r\n        }\r\n      }\r\n    },\r\n\r\n    loadElements: function (index) {\r\n      var limit = Math.min(this.num, this.options.preloadRange * 2 + 1)\r\n      var j = index\r\n      var i\r\n      for (i = 0; i < limit; i += 1) {\r\n        // First load the current slide element (0),\r\n        // then the next one (+1),\r\n        // then the previous one (-2),\r\n        // then the next after next (+2), etc.:\r\n        j += i * (i % 2 === 0 ? -1 : 1)\r\n        // Connect the ends of the list to load slide elements for\r\n        // continuous navigation:\r\n        j = this.circle(j)\r\n        this.loadElement(j)\r\n      }\r\n    },\r\n\r\n    unloadElements: function (index) {\r\n      var i, diff\r\n      for (i in this.elements) {\r\n        if (this.elements.hasOwnProperty(i)) {\r\n          diff = Math.abs(index - i)\r\n          if (\r\n            diff > this.options.preloadRange &&\r\n            diff + this.options.preloadRange < this.num\r\n          ) {\r\n            this.unloadSlide(i)\r\n            delete this.elements[i]\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    addSlide: function (index) {\r\n      var slide = this.slidePrototype.cloneNode(false)\r\n      slide.setAttribute('data-index', index)\r\n      this.slidesContainer[0].appendChild(slide)\r\n      this.slides.push(slide)\r\n    },\r\n\r\n    positionSlide: function (index) {\r\n      var slide = this.slides[index]\r\n      slide.style.width = this.slideWidth + 'px'\r\n      if (this.support.transform) {\r\n        slide.style.left = index * -this.slideWidth + 'px'\r\n        this.move(\r\n          index,\r\n          this.index > index ?\r\n          -this.slideWidth :\r\n          this.index < index ? this.slideWidth : 0,\r\n          0\r\n        )\r\n      }\r\n    },\r\n\r\n    initSlides: function (reload) {\r\n      var clearSlides, i\r\n      if (!reload) {\r\n        this.positions = []\r\n        this.positions.length = this.num\r\n        this.elements = {}\r\n        this.imagePrototype = document.createElement('img')\r\n        this.elementPrototype = document.createElement('div')\r\n        this.slidePrototype = document.createElement('div')\r\n        $(this.slidePrototype).addClass(this.options.slideClass)\r\n        this.slides = this.slidesContainer[0].children\r\n        clearSlides =\r\n          this.options.clearSlides || this.slides.length !== this.num\r\n      }\r\n      this.slideWidth = this.container[0].clientWidth\r\n      this.slideHeight = this.container[0].clientHeight\r\n      this.slidesContainer[0].style.width = this.num * this.slideWidth + 'px'\r\n      if (clearSlides) {\r\n        this.resetSlides()\r\n      }\r\n      for (i = 0; i < this.num; i += 1) {\r\n        if (clearSlides) {\r\n          this.addSlide(i)\r\n        }\r\n        this.positionSlide(i)\r\n      }\r\n      // Reposition the slides before and after the given index:\r\n      if (this.options.continuous && this.support.transform) {\r\n        this.move(this.circle(this.index - 1), -this.slideWidth, 0)\r\n        this.move(this.circle(this.index + 1), this.slideWidth, 0)\r\n      }\r\n      if (!this.support.transform) {\r\n        this.slidesContainer[0].style.left =\r\n          this.index * -this.slideWidth + 'px'\r\n      }\r\n    },\r\n\r\n    unloadSlide: function (index) {\r\n      var slide, firstChild\r\n      slide = this.slides[index]\r\n      firstChild = slide.firstChild\r\n      if (firstChild !== null) {\r\n        slide.removeChild(firstChild)\r\n      }\r\n    },\r\n\r\n    unloadAllSlides: function () {\r\n      var i, len\r\n      for (i = 0, len = this.slides.length; i < len; i++) {\r\n        this.unloadSlide(i)\r\n      }\r\n    },\r\n\r\n    toggleControls: function () {\r\n\r\n      var controlsClass = this.options.controlsClass\r\n      if (this.container.hasClass(controlsClass)) {\r\n        this.container.removeClass(controlsClass)\r\n      } else {\r\n        this.container.addClass(controlsClass)\r\n      }\r\n    },\r\n\r\n    toggleSlideshow: function () {\r\n      if (!this.interval) {\r\n        this.play()\r\n      } else {\r\n        this.pause()\r\n      }\r\n    },\r\n\r\n    getNodeIndex: function (element) {\r\n      return parseInt(element.getAttribute('data-index'), 10)\r\n    },\r\n\r\n    initStartIndex: function () {\r\n      var album = this.album,\r\n        index = this.options.index;\r\n      var i\r\n      // Check if the index is given as a list object:\r\n      if (index && typeof index !== 'number') {\r\n        for (i = 0; i < this.num; i += 1) {\r\n          if (\r\n            this.list[i] === index || album.getItemUrl(this.list[i]) === album.getItemUrl(index)) {\r\n            index = i\r\n            break\r\n          }\r\n        }\r\n      }\r\n      // Make sure the index is in the list range:\r\n      this.index = this.circle(parseInt(index, 10) || 0)\r\n    },\r\n\r\n    initEventListeners: function () {\r\n      var that = this\r\n      var slidesContainer = this.slidesContainer\r\n\r\n      function proxyListener(event) {\r\n        var type =\r\n          that.support.transition && that.support.transition.end === event.type ?\r\n          'transitionend' :\r\n          event.type\r\n        that['on' + type](event)\r\n      }\r\n      $(window).on('resize', proxyListener)\r\n      $(document.body).on('keydown', proxyListener)\r\n      this.container.on('click', proxyListener)\r\n      if (this.support.touch) {\r\n        slidesContainer.on(\r\n          'touchstart touchmove touchend touchcancel',\r\n          proxyListener\r\n        )\r\n      } else if (this.options.emulateTouchEvents && this.support.transition) {\r\n        slidesContainer.on(\r\n          'mousedown mousemove mouseup mouseout',\r\n          proxyListener\r\n        )\r\n      }\r\n      if (this.support.transition) {\r\n        slidesContainer.on(this.support.transition.end, proxyListener)\r\n      }\r\n      this.proxyListener = proxyListener\r\n    },\r\n\r\n    destroyEventListeners: function () {\r\n      var slidesContainer = this.slidesContainer\r\n      var proxyListener = this.proxyListener\r\n      $(window).off('resize', proxyListener)\r\n      $(document.body).off('keydown', proxyListener)\r\n      this.container.off('click', proxyListener)\r\n      if (this.support.touch) {\r\n        slidesContainer.off(\r\n          'touchstart touchmove touchend touchcancel',\r\n          proxyListener\r\n        )\r\n      } else if (this.options.emulateTouchEvents && this.support.transition) {\r\n        slidesContainer.off(\r\n          'mousedown mousemove mouseup mouseout',\r\n          proxyListener\r\n        )\r\n      }\r\n      if (this.support.transition) {\r\n        slidesContainer.off(this.support.transition.end, proxyListener)\r\n      }\r\n    },\r\n\r\n    handleOpen: function () {\r\n      if (this.options.onopened) {\r\n        this.options.onopened.call(this)\r\n      }\r\n    },\r\n\r\n    initWidget: function () {\r\n      var that = this\r\n\r\n      function openHandler(event) {\r\n        if (event.target === that.container[0]) {\r\n          that.container.off(that.support.transition.end, openHandler)\r\n          that.handleOpen()\r\n        }\r\n      }\r\n      this.container = $(this.options.container)\r\n      if (!this.container.length) {\r\n        this.console.log(\r\n          'blueimp Gallery: Widget container not found.',\r\n          this.options.container\r\n        )\r\n        return false\r\n      }\r\n      this.slidesContainer = this.container\r\n        .find(this.options.slidesContainer)\r\n        .first()\r\n      if (!this.slidesContainer.length) {\r\n        this.console.log(\r\n          'blueimp Gallery: Slides container not found.',\r\n          this.options.slidesContainer\r\n        )\r\n        return false\r\n      }\r\n      this.titleElement = this.container.find(this.options.titleElement).first()\r\n      if (this.num === 1) {\r\n        this.container.addClass(this.options.singleClass)\r\n      }\r\n      if (this.options.onopen) {\r\n        this.options.onopen.call(this)\r\n      }\r\n      if (this.support.transition && this.options.displayTransition) {\r\n        this.container.on(this.support.transition.end, openHandler)\r\n      } else {\r\n        this.handleOpen()\r\n      }\r\n      if (this.options.hidePageScrollbars) {\r\n        // Hide the page scrollbars:\r\n        this.bodyOverflowStyle = document.body.style.overflow\r\n        document.body.style.overflow = 'hidden'\r\n      }\r\n      this.container[0].style.display = 'block'\r\n      this.initSlides()\r\n      this.container.addClass(this.options.displayClass)\r\n    },\r\n\r\n    initOptions: function (options) {\r\n      // Create a copy of the prototype options:\r\n      this.overrided(langx.mixin({}, SliderView.prototype.options, options));\r\n\r\n      if (this.num < 3) {\r\n        // 1 or 2 slides cannot be displayed continuous,\r\n        // remember the original option by setting to null instead of false:\r\n        this.options.continuous = this.options.continuous ? null : false\r\n      }\r\n      if (!this.support.transition) {\r\n        this.options.emulateTouchEvents = false\r\n      }\r\n      if (this.options.event) {\r\n        this.preventDefault(this.options.event)\r\n      }\r\n    }\r\n  });\r\n\r\n  Album.installPlugin(\"views\", {\r\n    \"name\": \"slider\",\r\n    \"ctor\": SliderView,\r\n    \"templates\": {\r\n      \"default\": '<div class=\"slides\"></div>' +\r\n        '<h3 class=\"title\"></h3>' +\r\n        '<a class=\"prev\"></a>' +\r\n        '<a class=\"next\"></a>' +\r\n        '<a class=\"close\"></a>' +\r\n        '<a class=\"play-pause\"></a>' +\r\n        '<ol class=\"indicator\"></ol>'\r\n\r\n    }\r\n  });\r\n\r\n  return Album.SliderView = SliderView;\r\n});"]}