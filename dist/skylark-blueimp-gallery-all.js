/**
 * skylark-blueimp-gallery - The skylark album widgets.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var n=e.define,require=e.require,r="function"==typeof n&&n.amd,s=!r&&"undefined"!=typeof exports;if(!r&&!n){var o={};n=e.define=function(t,e,n){"function"==typeof n?(o[t]={factory:n,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var n=e.split("/"),i=t.split("/");n.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?n.pop():n.push(i[r]));return n.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):o[t]={factory:null,resolved:!0,exports:n}},require=e.require=function(t){if(!o.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=o[t];if(!module.resolved){var n=[];module.deps.forEach(function(t){n.push(require(t))}),module.exports=module.factory.apply(e,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-langx-ns/_attach",[],function(){return function(t,e,n){"string"==typeof e&&(e=e.split("."));for(var i=e.length,r=t,s=0,o=e[s++];s<i;)r=r[o]=r[o]||{},o=e[s++];return r[o]=n}}),t("skylark-langx-ns/ns",["./_attach"],function(t){var e={attach:function(n,i){return t(e,n,i)}};return e}),t("skylark-langx-ns/main",["./ns"],function(t){return t}),t("skylark-langx-ns",["skylark-langx-ns/main"],function(t){return t}),t("skylark-langx/skylark",["skylark-langx-ns"],function(t){return t}),t("skylark-langx-types/types",["skylark-langx-ns"],function(t){var e,n=Array.isArray,i={}.toString,r=(e={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),function(t){return null==t?String(t):e[i.call(t)]||"object"}),s=n||function(t){return object&&object.constructor===Array};function o(t){var e;for(e in t)if(null!==t[e])return!1;return!0}function a(t){return"function"==r(t)}function l(t){return t&&t.nodeType}function u(t){return"number"==typeof t}function h(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function c(t){return"string"==typeof t}function f(t){return t&&t==t.window}function d(t){return"symbol"==typeof t||isObjectLike(t)&&objectToString.call(t)==symbolTag}var p=1/0,m=1.7976931348623157e308,y=NaN,g=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,k=/^0o[0-7]+$/i,w=parseInt;function b(t){if(!t)return 0===t?t:0;if((t=_(t))===p||t===-p){var e=t<0?-1:1;return e*m}return t==t?t:0}function _(t){if("number"==typeof t)return t;if(d(t))return y;if(h(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=h(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(g,"");var n=x.test(t);return n||k.test(t)?w(t.slice(2),n?2:8):v.test(t)?y:+t}return t.attach("langx.types",{isArray:s,isArrayLike:function(t){return!c(t)&&!l(t)&&"number"==typeof t.length&&!a(t)},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===i.call(t)},isDefined:function(t){return void 0!==t},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isElement:function(t){return!(!t||1!==t.nodeType)},isEmpty:o,isEmptyObject:o,isFunction:a,isHtmlNode:l,isNaN:function(t){return isNaN(t)},isNull:function(t){return null===t},isNumber:u,isNumeric:u,isObject:h,isPlainObject:function(t){return h(t)&&!f(t)&&Object.getPrototypeOf(t)==Object.prototype},isString:c,isSameOrigin:function(t){if(t){var e=location.protocol+"//"+location.hostname;return location.port&&(e+=":"+location.port),t.startsWith(e)}},isSymbol:d,isUndefined:function(t){return void 0===t},isWindow:f,type:r,toFinite:b,toNumber:_,toInteger:function(t){var e=b(t),n=e%1;return e==e?n?e-n:e:0}})}),t("skylark-langx-types/main",["./types"],function(t){return t}),t("skylark-langx-types",["skylark-langx-types/main"],function(t){return t}),t("skylark-langx-objects/objects",["skylark-langx-ns","skylark-langx-types"],function(t,e){var n,i,r=Object.prototype.hasOwnProperty,s=Array.prototype.slice,o=e.isBoolean,a=e.isFunction,l=e.isObject,u=e.isPlainObject,h=e.isArray,c=e.isArrayLike,f=e.isString,d=e.toInteger;var p,m,y="undefined"!=typeof Symbol?Symbol.prototype:null;function g(t){if(!l(t))return[];var e=[];for(var n in t)e.push(n);return e}function v(t,e){if(!h(e))return null!=t&&r.call(t,e);for(var n=e.length,i=0;i<n;i++){var s=e[i];if(null==t||!r.call(t,s))return!1;t=t[s]}return!!n}function x(t,e,n,i){for(var r in e)i&&void 0!==t[r]||(n&&u(e[r])?(u(t[r])||(t[r]={}),x(t[r],e[r],n,i)):void 0!==e[r]&&(t[r]=e[r]));return t}function k(t){var e=s.call(arguments,0),n=e.shift(),i=!1;return o(e[e.length-1])&&(i=e.pop()),{target:n,sources:e,deep:i}}function w(){var t=k.apply(this,arguments);return t.sources.forEach(function(e){x(t.target,e,t.deep,!1)}),t.target}function b(t){for(var e=g(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}return n=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var s=typeof t;return("function"===s||"object"===s||"object"==typeof e)&&i(t,e,n,r)},i=function(t,e,i,r){var s=toString.call(t);if(s!==toString.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return y.valueOf.call(t)===y.valueOf.call(e)}var o="[object Array]"===s;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var l=t.constructor,u=e.constructor;if(l!==u&&!(a(l)&&l instanceof l&&a(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],r=r||[];for(var h=i.length;h--;)if(i[h]===t)return r[h]===e;if(i.push(t),r.push(e),o){if((h=t.length)!==e.length)return!1;for(;h--;)if(!n(t[h],e[h],i,r))return!1}else{var c,f=Object.keys(t);if(h=f.length,Object.keys(e).length!==h)return!1;for(;h--;)if(c=f[h],void 0===e[c]||!n(t[c],e[c],i,r))return!1}return i.pop(),r.pop(),!0},t.attach("langx.objects",{allKeys:g,attach:t.attach,clone:function t(e,n){var i;if(void 0===e||null===e)i=e;else if(n&&e.clone)i=e.clone();else if(h(e)){i=[];for(var r=0;r<e.length;r++)i.push(t(e[r]))}else if(u(e))for(var s in i={},e)i[s]=t(e[s]);else i=e;return i},defaults:(p=g,m=!0,function(t){var e=arguments.length;if(m&&(t=Object(t)),e<2||null==t)return t;for(var n=1;n<e;n++)for(var i=arguments[n],r=p(i),s=r.length,o=0;o<s;o++){var a=r[o];m&&void 0!==t[a]||(t[a]=i[a])}return t}),each:function(t,e,n){var i,r,s,o;if(t)if(void 0===(i=t.length)){for(r in t)if(t.hasOwnProperty(r)&&(o=t[r],!1===(n?e.call(o,o,r):e.call(o,r,o))))break}else for(s=0;s<i&&(o=t[s],!1!==(n?e.call(o,o,s):e.call(o,s,o)));s++);return this},extend:function(t){var e,n=s.call(arguments,1);"boolean"==typeof t&&(e=t,t=n.shift());0==n.length&&(n=[t],t=this);return n.forEach(function(n){w(t,n,e)}),t},has:v,isEqual:function(t,e){return n(t,e)},includes:function(t,e,n,i){t=c(t)?t:b(t),n=n&&!i?d(n):0;var r=t.length;n<0&&(n=nativeMax(r+n,0));return f(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&baseIndexOf(t,e,n)>-1},isMatch:function(t,e){var n=n(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var o=n[s];if(e[o]!==r[o]||!(o in r))return!1}return!0},keys:function(t){if(l(t))return[];var e=[];for(var n in t)v(t,n)&&e.push(n);return e},mixin:w,omit:function(t,e,n){if(!t)return null;for(var i=w({},t),r=1;r<arguments.length;r++){var s=arguments[r];s in t&&delete i[s]}return i},pick:function(t,e,n){if(!t)return null;for(var i={},r=1;r<arguments.length;r++){var s=arguments[r];s in t&&(i[s]=t[s])}return i},removeItem:function(t,e){if(h(t)){var n=t.indexOf(e);-1!=n&&t.splice(n,1)}else if(u(t))for(var i in t)if(t[i]==e){delete t[i];break}return this},result:function(t,e,n){h(e)||(e=e.split("."));var i=e.length;if(!i)return a(n)?n.call(t):n;for(var r=0;r<i;r++){var s=null==t?void 0:t[e[r]];void 0===s&&(s=n,r=i),t=a(s)?s.call(t):s}return t},safeMixin:function(){var t=k.apply(this,arguments);return t.sources.forEach(function(e){x(t.target,e,t.deep,!0)}),t.target},scall:function(t,e,n,i){if(t&&t[e]){var r=s.call(arguments,2);return t[e].apply(t,r)}},values:b})}),t("skylark-langx-objects/main",["./objects"],function(t){return t}),t("skylark-langx-objects",["skylark-langx-objects/main"],function(t){return t}),t("skylark-langx-arrays/arrays",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects"],function(t,e,n){var i=Array.prototype.filter,r=Array.prototype.find,s=e.isArrayLike;function o(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function a(t){return t!=t}function l(t){if(s(t)){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(s(i))for(var r=0;r<i.length;r++)e.push(i[r]);else e.push(i)}return e}return t}function u(t,e,n){return s(t)?(n||[]).concat(Array.prototype.slice.call(t,e||0)):[t]}return t.attach("langx.arrays",{baseFindIndex:o,baseIndexOf:function(t,e,n){if(e!=e)return o(t,a,n);var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1},compact:function(t){return i.call(t,function(t){return null!=t})},first:function(t,e){return e?t.slice(0,e):t[0]},filter:function(t,e){return i.call(t,e)},find:function(t,e){return r.call(t,e)},flatten:l,grep:function(t,e){var i=[];return n.each(t,function(t,n){e(n,t)&&i.push(n)}),i},inArray:function(t,e){if(!e)return-1;var n;if(e.indexOf)return e.indexOf(t);n=e.length;for(;n--;)if(e[n]===t)return n;return-1},makeArray:u,toArray:u,merge:function(t,e){var n=e.length,i=t.length,r=0;if("number"==typeof n)for(;r<n;r++)t[i++]=e[r];else for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t},forEach:function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n)},map:function(t,e){var n,i,r,o=[];if(s(t))for(i=0;i<t.length;i++)null!=(n=e.call(t[i],t[i],i))&&o.push(n);else for(r in t)null!=(n=e.call(t[r],t[r],r))&&o.push(n);return l(o)},reduce:function(t,e,n){return Array.prototype.reduce.call(t,e,n)},uniq:function(t){return i.call(t,function(e,n){return t.indexOf(e)==n})}})}),t("skylark-langx-arrays/main",["./arrays"],function(t){return t}),t("skylark-langx-arrays",["skylark-langx-arrays/main"],function(t){return t}),t("skylark-langx/arrays",["skylark-langx-arrays"],function(t){return t}),t("skylark-langx-klass/klass",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays"],function(t,e,n,i){var r=i.uniq,s=n.has,o=n.mixin,a=e.isArray,l=e.isDefined;var u=function(){function t(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function n(i,u,h,c){a(u)&&(c=h,h=u,u=null),u=u||Object,l(h)&&!a(h)&&(c=h,h=!1);var f=u;h&&(h=function(t,e){var n=[];return e.forEach(function(t){if(s(t,"__mixins__"))throw new Error("nested mixins");for(var e=[];t;)e.unshift(t),t=t.superclass;n=n.concat(e)}),(n=(n=r(n)).filter(function(e){for(var n=t;n;){if(e===n)return!1;if(s(n,"__mixins__"))for(var i=n.__mixins__,r=0;r<i.length;r++)if(i[r]===e)return!1;n=n.superclass}return!0})).length>0&&n}(f,h)),h&&(f=function(t,e){for(var n=t,i=0;i<e.length;i++){var r=new Function;r.prototype=Object.create(n.prototype),r.__proto__=n,r.superclass=null,o(r.prototype,e[i].prototype),r.prototype.__mixin__=e[i],n=r}return n}(f,h));var d=i.klassName||"",p=new Function("return function "+d+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return p.prototype=Object.create(f.prototype),p.prototype.constructor=p,p.superclass=u,p.__proto__=f,p._constructor||(p._constructor=t),h&&(p.__mixins__=h),p.partial||(p.partial=function(t,n){return function(t,n,i){var r=t.prototype,s=t.superclass.prototype,o=i&&i.noOverrided;i&&i.overrides;for(var a in n)if("constructor"!==a){var l=n[a];"function"==typeof n[a]?r[a]=l._constructor||o||"function"!=typeof s[a]?l:function(t,e,n){return function(){var t=this.overrided;this.overrided=n;var i=e.apply(this,arguments);return this.overrided=t,i}}(0,l,s[a]):e.isPlainObject(l)&&null!==l&&l.get?Object.defineProperty(r,a,l):r[a]=l}return t}(this,t,n)}),p.inherit||(p.inherit=function(t,e,i){return n(t,this,e,i)}),p.partial(i,c),p}}();return t.attach("langx.klass",u)}),t("skylark-langx-klass/main",["./klass"],function(t){return t}),t("skylark-langx-klass",["skylark-langx-klass/main"],function(t){return t}),t("skylark-langx/klass",["skylark-langx-klass"],function(t){return t}),t("skylark-langx/ArrayStore",["./klass"],function(t){var e=function(t){if(!t)return t;var n=!!t.then;function i(i){t[i]=function(){var r=arguments,s=Deferred.when(t,function(t){return e(Array.prototype[i].apply(t,r))});if("forEach"!==i||n)return s}}return n&&(t=Object.delegate(t)),i("forEach"),i("filter"),i("map"),null==t.total&&(t.total=Deferred.when(t,function(t){return t.length})),t},n=t({klassName:"ArrayStore",queryEngine:function(t,e){switch(typeof t){default:throw new Error("Can not query with a "+typeof t);case"object":case"undefined":var n=t;t=function(t){for(var e in n){var i=n[e];if(i&&i.test){if(!i.test(t[e],t))return!1}else if(i!=t[e])return!1}return!0};break;case"string":if(!this[t])throw new Error("No filter function "+t+" was found in store");t=this[t];case"function":}function i(n){var i=function(t,e,n){var i,r=0,s=t&&t.length||0,o=[];s&&"string"==typeof t&&(t=t.split(""));"string"==typeof e&&(e=cache[e]||buildFn(e));if(n)for(;r<s;++r)i=t[r],e.call(n,i,r,t)&&o.push(i);else for(;r<s;++r)i=t[r],e(i,r,t)&&o.push(i);return o}(n,t),r=e&&e.sort;if(r&&i.sort("function"==typeof r?r:function(t,e){for(var n,i=0;n=r[i];i++){var s=t[n.attribute],o=e[n.attribute];if(s=null!=s?s.valueOf():s,o=null!=o?o.valueOf():o,s!=o)return!!n.descending==(null==s||s>o)?-1:1}return 0}),e&&(e.start||e.count)){var s=i.length;(i=i.slice(e.start||0,(e.start||0)+(e.count||1/0))).total=s}return i}return i.matches=t,i},idProperty:"id",get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,e){var n=this.data,i=this.index,r=this.idProperty,s=t[r]=e&&"id"in e?e.id:r in t?t[r]:Math.random();if(s in i){if(e&&!1===e.overwrite)throw new Error("Object already exists");n[i[s]]=t}else i[s]=n.push(t)-1;return s},add:function(t,e){return(e=e||{}).overwrite=!1,this.put(t,e)},remove:function(t){var e=this.index,n=this.data;if(t in e)return n.splice(e[t],1),this.setData(n),!0},query:function(t,n){return e(this.queryEngine(t,n)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var e=0,n=t.length;e<n;e++)this.index[t[e][this.idProperty]]=e},init:function(t){for(var e in t)this[e]=t[e];this.setData(this.data||[])}});return n}),t("skylark-langx-aspect/aspect",["skylark-langx-ns"],function(t){var e,n=0;function i(t){return function(i,r,s,o){var a,l=i[r];l&&l.target==i||(i[r]=a=function(){for(var t=n,i=arguments,r=a.before;r;)i=r.advice.apply(this,i)||i,r=r.next;if(a.around)var s=a.around.advice(this,i);for(var o=a.after;o&&o.id<t;){if(o.receiveArguments){var l=o.advice.apply(this,i);s=l===e?s:l}else s=o.advice.call(this,s,i);o=o.next}return s},l&&(a.around={advice:function(t,e){return l.apply(t,e)}}),a.target=i);var u=function(t,e,i,r){var s,o=t[e],a="around"==e;if(a){var l=i(function(){return o.advice(this,arguments)});s={remove:function(){l&&(l=t=i=null)},advice:function(t,e){return l?l.apply(t,e):o.advice(t,e)}}}else s={remove:function(){if(s.advice){var n=s.previous,r=s.next;r||n?(n?n.next=r:t[e]=r,r&&(r.previous=n)):delete t[e],t=i=s.advice=null}},id:n++,advice:i,receiveArguments:r};if(o&&!a)if("after"==e){for(;o.next&&(o=o.next););o.next=s,s.previous=o}else"before"==e&&(t[e]=s,s.next=o,o.previous=s);else t[e]=s;return s}(a||l,t,s,o);return s=null,u}}return t.attach("langx.aspect",{after:i("after"),around:i("around"),before:i("before")})}),t("skylark-langx-aspect/main",["./aspect"],function(t){return t}),t("skylark-langx-aspect",["skylark-langx-aspect/main"],function(t){return t}),t("skylark-langx/aspect",["skylark-langx-aspect"],function(t){return t}),t("skylark-langx-funcs/funcs",["skylark-langx-ns"],function(t,e,n){return t.attach("langx.funcs",{noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1}})}),t("skylark-langx-funcs/debounce",["./funcs"],function(t){return t.debounce=function(t,e){var n;return function(){var i=this,r=arguments;function s(){n&&clearTimeout(n),n=void 0}return s(),n=setTimeout(function(){n=null,t.apply(i,r)},e),{stop:s}}}}),t("skylark-langx-funcs/defer",["./funcs"],function(t){return t.defer=function(t){var e,n={stop:null};requestAnimationFrame?(e=requestAnimationFrame(t),n.stop=function(){return cancelAnimationFrame(e)}):(e=setTimeoutout(t),n.stop=function(){return clearTimeout(e)});return n}}),t("skylark-langx-funcs/delegate",["skylark-langx-objects","./funcs"],function(t,e){var n=t.mixin,i=function(){function t(){}return function(e,i){t.prototype=e;var r=new t;return t.prototype=null,i&&n(r,i),r}}();return e.delegate=i}),t("skylark-langx-funcs/loop",["./funcs"],function(t){function e(t){this.callback=t,this.running=!1,this.id=-1}return e.prototype.start=function(){if(!this.running){this.running=!0;var t=this;!function e(){t.callback();t.running&&(t.id=requestAnimationFrame(e))}()}},e.prototype.stop=function(){this.running=!1,cancelAnimationFrame(this.id)},t.loop=function(t){return new e(t)}}),t("skylark-langx-funcs/negate",["./funcs"],function(t){return t.negate=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(...e){return!t.apply(this,e)}}}),t("skylark-langx-funcs/proxy",["skylark-langx-types","./funcs"],function(t,e){var n=Array.prototype.slice,i=t.isFunction,r=t.isString;return e.bind=e.proxy=function t(e,s){var o=2 in arguments&&n.call(arguments,2);if(i(e)){return function(){return e.apply(s,o?o.concat(n.call(arguments)):arguments)}}if(r(s))return o?(o.unshift(e[s],e),t.apply(null,o)):t(e[s],e);throw new TypeError("expected function")}}),t("skylark-langx-funcs/template",["./funcs"],function(t){Array.prototype.slice;var e={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},n=/(.)^/,i={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},r=/\\|'|\r|\n|\t|\u2028|\u2029/g;function s(t,s,o){var a;o=objects.defaults({},o,e);var l=RegExp([(o.escape||n).source,(o.interpolate||n).source,(o.evaluate||n).source].join("|")+"|$","g"),u=0,h="__p+='";t.replace(l,function(e,n,s,o,a){return h+=t.slice(u,a).replace(r,function(t){return"\\"+i[t]}),n&&(h+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),s&&(h+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),o&&(h+="';\n"+o+"\n__p+='"),u=a+e.length,e}),h+="';\n",o.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{a=new Function(o.variable||"obj","_",h)}catch(t){throw t.source=h,t}if(s)return a(s,this);var c=proxy(function(t){return a.call(this,t,this)},this),f=o.variable||"obj";return c.source="function("+f+"){\n"+h+"}",c}return s.templateSettings=t.templateSettings=e,t.template=s}),t("skylark-langx-funcs/main",["./funcs","./debounce","./defer","./delegate","./loop","./negate","./proxy","./template"],function(t){return t}),t("skylark-langx-funcs",["skylark-langx-funcs/main"],function(t){return t}),t("skylark-langx-async/Deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(t,e,n){"use strict";var i=Array.prototype.slice,r=e.proxy,s=t.makeArray,o=n.result,a=n.mixin;a(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});var l=function(){var t=this;this.promise=u(new Promise(function(e,n){t._resolve=e,t._reject=n}))};function u(t){if(t.isResolved)return t;var e=!0,n=!1,i=!1,r=t.then(function(t){return i=!0,e=!1,t},function(t){throw n=!0,e=!1,t});r.isResolved=function(){return i},r.isPending=function(){return e},r.isRejected=function(){return n},r.state=function(){return i?"resolved":n?"rejected":"pending"};var s=[],o=[];return r.then=function(t,e,n){return n&&this.progress(n),u(Promise.prototype.then.call(this,t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)},e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)}))},r.progress=function(t){return s.forEach(function(e){t(e)}),o.push(t),this},r.pipe=r.then,r.notify=function(t){try{return s.push(t),o.forEach(function(e){return e(t)})}catch(t){this.reject(t)}return this},r}return l.prototype.resolve=function(t){var e=i.call(arguments);return this.resolveWith(null,e)},l.prototype.resolveWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._resolve(e),this._resolved=!0,this},l.prototype.notify=function(t){var e=o(this,"promise");return e.notify(t),this},l.prototype.reject=function(t){var e=i.call(arguments);return this.rejectWith(null,e)},l.prototype.rejectWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._reject(e),this._rejected=!0,this},l.prototype.isResolved=function(){var t=o(this,"promise");return t.isResolved()},l.prototype.isRejected=function(){var t=o(this,"promise");return t.isRejected()},l.prototype.state=function(){var t=o(this,"promise");return t.state()},l.prototype.then=function(t,e,n){var i=o(this,"promise");return i.then(t,e,n)},l.prototype.progress=function(t){var e=o(this,"promise");return e.progress(t)},l.prototype.catch=function(t){var e=o(this,"promise");return e.catch(t)},l.prototype.always=function(){var t=o(this,"promise");return t.always.apply(t,arguments),this},l.prototype.done=function(){var t=o(this,"promise");return t.done.apply(t,arguments),this},l.prototype.fail=function(t){var e=o(this,"promise");return e.fail(t),this},l.all=function(t){var e=new l;return Promise.all(t).then(e.resolve.bind(e),e.reject.bind(e)),o(e,"promise")},l.first=function(t){return u(Promise.race(t))},l.when=function(t,e,n,i){var s=t&&"function"==typeof t.then,o=s&&t instanceof Promise;if(!s)return arguments.length>1?e?e(t):t:(new l).resolve(t);if(!o){var a=new l(t.cancel);t.then(r(a.resolve,a),r(a.reject,a),a.notify),t=a.promise}return e||n||i?t.then(e,n,i):t},l.reject=function(t){var e=new l;return e.reject(t),e.promise},l.immediate=l.resolve=function(t){var e=new l;return e.resolve.apply(e,arguments),e.promise},l.promise=function(t){var e=new l;return t(e.resolve.bind(e),e.reject.bind(e),e.progress.bind(e)),e.promise},l}),t("skylark-langx-async/async",["skylark-langx-ns","skylark-langx-objects","./Deferred"],function(t,e,n){var i=e.each,r={Deferred:n,parallel:function(t,e,r){var s=[];return r=r||null,e=e||[],i(t,function(t,n){s.push(n.apply(r,e))}),n.all(s)},series:function(t,e,r){var s=[],o=new n,a=o.promise;return r=r||null,e=e||[],o.resolve(),i(t,function(t,n){a=a.then(function(){return n.apply(r,e)}),s.push(a)}),n.all(s)},waterful:function(t,e,r){var s=new n,o=s.promise;return r=r||null,e=e||[],s.resolveWith(r,e),i(t,function(t,e){o=o.then(e)}),o}};return t.attach("langx.async",r)}),t("skylark-langx-async/main",["./async"],function(t){return t}),t("skylark-langx-async",["skylark-langx-async/main"],function(t){return t}),t("skylark-langx/async",["skylark-langx-async"],function(t){return t}),t("skylark-langx-binary/binary",["skylark-langx-ns"],function(t){"use strict";return t.attach("langx.binary",{fromBase64:function(t){for(var e,n,i,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=t.length/4*3,a=new ArrayBuffer(o),l=new Uint8Array(a),u=0,h=0;u<o;u+=3)e=s.indexOf(t.charAt(h++)),n=s.indexOf(t.charAt(h++)),i=s.indexOf(t.charAt(h++)),r=s.indexOf(t.charAt(h++)),l[u]=e<<2|n>>4,64!==i&&(l[u+1]=(15&n)<<4|i>>2),64!==r&&(l[u+2]=(3&i)<<6|r);return a},fromBinaryString:function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n},fromBuffer:function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;i++)n[i]=t[i];return e}})}),t("skylark-langx-binary/main",["./binary"],function(t){return t}),t("skylark-langx-binary",["skylark-langx-binary/main"],function(t){return t}),t("skylark-langx/binary",["skylark-langx-binary"],function(t){return t}),t("skylark-langx-datetimes/datetimes",["skylark-langx-ns"],function(t){return t.attach("langx.datetimes",{parseMilliSeconds:function(t){var e=t.split(" "),n=parseInt(e[0]);if(isNaN(n))return 0;switch(e[1].trim().replace(/\./g,"")){case"minutes":case"minute":case"min":case"mm":case"m":return 6e4*n;case"hours":case"hour":case"HH":case"hh":case"h":case"H":return 36e5*n;case"seconds":case"second":case"sec":case"ss":case"s":return 1e3*n;case"days":case"day":case"DD":case"dd":case"d":return 864e5*n;case"months":case"month":case"MM":case"M":return 24192e5*n;case"weeks":case"week":case"W":case"w":return 6048e5*n;case"years":case"year":case"yyyy":case"yy":case"y":return 31536e6*n;default:return 0}}})}),t("skylark-langx-datetimes/main",["./datetimes"],function(t){return t}),t("skylark-langx-datetimes",["skylark-langx-datetimes/main"],function(t){return t}),t("skylark-langx/datetimes",["skylark-langx-datetimes"],function(t){return t}),t("skylark-langx/Deferred",["skylark-langx-async"],function(t){return t.Deferred}),t("skylark-langx-events/events",["skylark-langx-ns"],function(t){return t.attach("langx.events",{})}),t("skylark-langx-hoster/hoster",["skylark-langx-ns"],function(t){var e={isBrowser:!0,isNode:null,global:this,browser:null,node:null};"object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(e.isNode=!0,e.isBrowser=!1),e.global=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();var n=null;if(Object.defineProperty(e,"document",function(){if(!n){var t="undefined"==typeof window?require("html-element"):window;n=t.document}return n}),void 0===e.global.CustomEvent&&(e.global.CustomEvent=function(t,e){this.type=t,this.props=e}),Object.defineProperty(e,"document",function(){if(!n){var t="undefined"==typeof window?require("html-element"):window;n=t.document}return n}),e.isBrowser){var i=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(navigator.userAgent),r=e.browser={};i.browser&&(r[i.browser]=!0,r.version=i.version),r.chrome?r.webkit=!0:r.webkit&&(r.safari=!0)}return e.detects={},t.attach("langx.hoster",e)}),t("skylark-langx-hoster/detects/mobile",["../hoster"],function(t){var e=/iPhone/i,n=/iPod/i,i=/iPad/i,r=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,o=/Android/i,a=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,u=/Windows Phone/i,h=/\bWindows(?:.+)ARM\b/i,c=/BlackBerry/i,f=/BB10/i,d=/Opera Mini/i,p=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/Mobile(?:.+)Firefox\b/i,y=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};return t.detects.mobile=function(t){var g={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?g.userAgent=t:t&&t.userAgent&&(g={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):g={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var v=g.userAgent,x=v.split("[FBAN");void 0!==x[1]&&(v=x[0]);void 0!==(x=v.split("Twitter"))[1]&&(v=x[0]);var k=function(t){return function(e){return e.test(t)}}(v),w={apple:{phone:k(e)&&!k(u),ipod:k(n),tablet:!k(e)&&(k(i)||y(g))&&!k(u),universal:k(r),device:(k(e)||k(n)||k(i)||k(r)||y(g))&&!k(u)},amazon:{phone:k(a),tablet:!k(a)&&k(l),device:k(a)||k(l)},android:{phone:!k(u)&&k(a)||!k(u)&&k(s),tablet:!k(u)&&!k(a)&&!k(s)&&(k(l)||k(o)),device:!k(u)&&(k(a)||k(l)||k(s)||k(o))||k(/\bokhttp\b/i)},windows:{phone:k(u),tablet:k(h),device:k(u)||k(h)},other:{blackberry:k(c),blackberry10:k(f),opera:k(d),firefox:k(m),chrome:k(p),device:k(c)||k(f)||k(d)||k(m)||k(p)},any:!1,phone:!1,tablet:!1};return w.any=w.apple.device||w.android.device||w.windows.device||w.other.device,w.phone=w.apple.phone||w.android.phone||w.windows.phone,w.tablet=w.apple.tablet||w.android.tablet||w.windows.tablet,w}}),t("skylark-langx-hoster/isMobile",["./hoster","./detects/mobile"],function(t,e){return void 0==t.isMobile&&(t.isMobile=e()),t.isMobile}),t("skylark-langx-hoster/main",["./hoster","./isMobile"],function(t){return t}),t("skylark-langx-hoster",["skylark-langx-hoster/main"],function(t){return t}),t("skylark-langx-events/Event",["skylark-langx-objects","skylark-langx-funcs","skylark-langx-klass","skylark-langx-hoster","./events"],function(t,e,n,i){var r={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function s(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),t.each(r,function(t,r){var s=i[t];n[t]=function(){return this[r]=e.returnTrue,s&&s.apply(i,arguments)},n[r]=e.returnFalse})),n}class o extends CustomEvent{constructor(e,n){super(e,n),t.safeMixin(this,n),s(this)}}return o.compatible=s,i.Event=o}),t("skylark-langx-events/Listener",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event"],function(t,e,n,i,r,s){Array.prototype.slice;var o=n.compact,a=(t.isDefined,t.isPlainObject,t.isFunction,t.isBoolean),l=t.isString,u=t.isEmptyObject,h=(e.mixin,e.safeMixin,i({listenTo:function(e,n,i,r){if(!e)return this;if(a(i)&&(r=i,i=null),t.isPlainObject(n)){var s=n;for(var o in s)this.listenTo(e,o,s[o],r);return this}i||(i="handleEvent"),l(i)&&(i=this[i]),r?e.one(n,i,this):e.on(n,i,this);for(var u,h=this._listeningTo||(this._listeningTo=[]),c=0;c<h.length;c++)if(h[c].obj==e){u=h[c];break}u||h.push(u={obj:e,events:{}});var f=u.events,d=f[n]=f[n]||[];return-1==d.indexOf(i)&&d.push(i),this},listenToOnce:function(t,e,n){return this.listenTo(t,e,n,1)},unlistenTo:function(t,e,n){var i=this._listeningTo;if(!i)return this;l(n)&&(n=this[n]);for(var r=0;r<i.length;r++){var s=i[r];if(!t||t==s.obj){var a=s.events;for(var h in a)if(!e||e==h){for(var c=a[h],f=0;f<c.length;f++)n&&n!=c[r]||(s.obj.off(h,c[r],this),c[r]=null);c=a[h]=o(c),u(c)&&(a[h]=null)}u(a)&&(i[r]=null)}}return i=this._listeningTo=o(i),u(i)&&(this._listeningTo=null),this}}));return r.Listener=h}),t("skylark-langx-events/Emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event","./Listener"],function(t,e,n,i,r,s,o){var a=Array.prototype.slice,l=n.compact,u=t.isDefined,h=t.isPlainObject,c=t.isFunction,f=t.isString,d=(t.isEmptyObject,e.mixin);e.safeMixin;function p(t){var e=(""+t).split(".");return{name:e[0],ns:e.slice(1).join(" ")}}var m=o.inherit({_prepareArgs:function(t,e){return e=u(e)?[t].concat(e):[t]},on:function(t,e,n,i,r,s){var o=this,a=this._hub||(this._hub={});if(h(t))return r=i,each(t,function(t,i){o.on(t,e,n,i,r,s)}),this;if(f(e)||c(i)||(r=i,i=n,n=e,e=void 0),c(n)&&(r=i,i=n,n=null),!i)throw new Error("No callback function");if(!c(i))throw new Error("The callback  is not afunction");return f(t)&&(t=t.split(/\s/)),t.forEach(function(t){var o=p(t),l=o.name,u=o.ns;(a[l]||(a[l]=[])).push({fn:i,selector:e,data:n,ctx:r,ns:u,one:s})}),this},one:function(t,e,n,i,r){return this.on(t,e,n,i,r,1)},emit:function(t){if(!this._hub)return this;var e=this;f(t)&&(t=new s(t)),Object.defineProperty(t,"target",{value:this});var n=a.call(arguments,1);return n=this._prepareArgs(t,n),[t.type||t.name,"all"].forEach(function(i){var r=p(i),s=r.name,o=r.ns,a=e._hub[s];if(a){for(var u=a.length,h=!1,c=0;c<u;c++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var f=a[c];(!o||f.ns&&f.ns.startsWith(o))&&(t.data?f.data&&(t.data=d({},f.data,t.data)):t.data=f.data||null,f.fn.apply(f.ctx,n),f.one&&(a[c]=null,h=!0))}h&&(e._hub[i]=l(a))}}),this},listened:function(t){var e=(this._hub||(this._events={}))[t]||[];return e.length>0},off:function(t,e){var n=this._hub||(this._hub={});return f(t)&&(t=t.split(/\s/)),t.forEach(function(t){var i=p(t),r=i.name,s=i.ns,o=n[r];if(o){var a=[];if(e||s)for(var l=0,u=o.length;l<u;l++)e&&o[l].fn!==e&&o[l].fn._!==e?a.push(o[l]):!s||o[l].ns&&0==o[l].ns.indexOf(s)||a.push(o[l]);a.length?n[r]=a:delete n[r]}}),this},trigger:function(){return this.emit.apply(this,arguments)}});return r.Emitter=m}),t("skylark-langx-events/createEvent",["./events","./Event"],function(t,e){return t.createEvent=function(t,n){return new e(t,n)}}),t("skylark-langx-events/main",["./events","./Event","./Listener","./Emitter","./createEvent"],function(t){return t}),t("skylark-langx-events",["skylark-langx-events/main"],function(t){return t}),t("skylark-langx/Emitter",["skylark-langx-events"],function(t){return t.Emitter}),t("skylark-langx/Evented",["./Emitter"],function(t){return t}),t("skylark-langx/events",["skylark-langx-events"],function(t){return t}),t("skylark-langx/funcs",["skylark-langx-funcs"],function(t){return t}),t("skylark-langx/hoster",["skylark-langx-hoster"],function(t){return t}),t("skylark-langx-maths/maths",["skylark-langx-ns","skylark-langx-types"],function(t,e){for(var n=[],i=0;i<256;i++)n[i]=(i<16?"0":"")+i.toString(16);var r={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*r.DEG2RAD},radToDeg:function(t){return t*r.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+i)/2),h=o((e+i)/2),c=s((e-i)/2),f=o((e-i)/2),d=s((i-e)/2),p=o((i-e)/2);"XYX"===r?t.set(a*h,l*c,l*f,a*u):"YZY"===r?t.set(l*f,a*h,l*c,a*u):"ZXZ"===r?t.set(l*c,l*f,a*h,a*u):"XZX"===r?t.set(a*h,l*p,l*d,a*u):"YXY"===r?t.set(l*d,a*h,l*p,a*u):"ZYZ"===r?t.set(l*p,l*d,a*h,a*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return t.attach("langx.maths",r)}),t("skylark-langx-maths/main",["./maths"],function(t){return t}),t("skylark-langx-maths",["skylark-langx-maths/main"],function(t){return t}),t("skylark-langx/maths",["skylark-langx-maths"],function(t){return t}),t("skylark-langx-numerics/numerics",["skylark-langx-ns","skylark-langx-types"],function(t,e){return t.attach("langx.numerics",{toFinite:e.toFinite,toNumber:e.toNumber,toInteger:e.toInteger})}),t("skylark-langx-numerics/maths",["skylark-langx-ns","skylark-langx-types","./numerics"],function(t,e,n){for(var i=[],r=0;r<256;r++)i[r]=(r<16?"0":"")+r.toString(16);var s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+i)/2),h=o((e+i)/2),c=s((e-i)/2),f=o((e-i)/2),d=s((i-e)/2),p=o((i-e)/2);"XYX"===r?t.set(a*h,l*c,l*f,a*u):"YZY"===r?t.set(l*f,a*h,l*c,a*u):"ZXZ"===r?t.set(l*c,l*f,a*h,a*u):"XZX"===r?t.set(a*h,l*p,l*d,a*u):"YXY"===r?t.set(l*d,a*h,l*p,a*u):"ZYZ"===r?t.set(l*p,l*d,a*h,a*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return n.maths=s}),t("skylark-langx-numerics/Quaternion",["skylark-langx-klass","./numerics","./maths"],function(t,e,n){var i=t({klassName:"Quaternion",x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("mathsQuaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,s=t.order,o=Math.cos,a=Math.sin,l=o(n/2),u=o(i/2),h=o(r/2),c=a(n/2),f=a(i/2),d=a(r/2);return"XYZ"===s?(this._x=c*u*h+l*f*d,this._y=l*f*h-c*u*d,this._z=l*u*d+c*f*h,this._w=l*u*h-c*f*d):"YXZ"===s?(this._x=c*u*h+l*f*d,this._y=l*f*h-c*u*d,this._z=l*u*d-c*f*h,this._w=l*u*h+c*f*d):"ZXY"===s?(this._x=c*u*h-l*f*d,this._y=l*f*h+c*u*d,this._z=l*u*d+c*f*h,this._w=l*u*h-c*f*d):"ZYX"===s?(this._x=c*u*h-l*f*d,this._y=l*f*h+c*u*d,this._z=l*u*d-c*f*h,this._w=l*u*h+c*f*d):"YZX"===s?(this._x=c*u*h+l*f*d,this._y=l*f*h+c*u*d,this._z=l*u*d-c*f*h,this._w=l*u*h-c*f*d):"XZY"===s&&(this._x=c*u*h-l*f*d,this._y=l*f*h-c*u*d,this._z=l*u*d+c*f*h,this._w=l*u*h+c*f*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],h=n[6],c=n[10],f=i+a+c;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(h-l)*e,this._y=(s-u)*e,this._z=(o-r)*e):i>a&&i>c?(e=2*Math.sqrt(1+i-a-c),this._w=(h-l)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(s+u)/e):a>c?(e=2*Math.sqrt(1+a-i-c),this._w=(s-u)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(l+h)/e):(e=2*Math.sqrt(1+c-i-a),this._w=(o-r)/e,this._x=(s+u)/e,this._y=(l+h)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(n.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("mathsQuaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,u=e._w;return this._x=n*u+s*o+i*l-r*a,this._y=i*u+s*a+r*o-n*l,this._z=r*u+s*l+n*a-i*o,this._w=s*u-n*o-i*a-r*l,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,s=this._w,o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var a=1-o*o;if(a<=Number.EPSILON){var l=1-e;return this._w=l*s+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(a),h=Math.atan2(u,o),c=Math.sin((1-e)*h)/u,f=Math.sin(e*h)/u;return this._w=s*c+this._w*f,this._x=n*c+this._x*f,this._y=i*c+this._y*f,this._z=r*c+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}});return Object.assign(i,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,s,o){var a=n[i+0],l=n[i+1],u=n[i+2],h=n[i+3],c=r[s+0],f=r[s+1],d=r[s+2],p=r[s+3];if(h!==p||a!==c||l!==f||u!==d){var m=1-o,y=a*c+l*f+u*d+h*p,g=y>=0?1:-1,v=1-y*y;if(v>Number.EPSILON){var x=Math.sqrt(v),k=Math.atan2(x,y*g);m=Math.sin(m*k)/x,o=Math.sin(o*k)/x}var w=o*g;if(a=a*m+c*w,l=l*m+f*w,u=u*m+d*w,h=h*m+p*w,m===1-o){var b=1/Math.sqrt(a*a+l*l+u*u+h*h);a*=b,l*=b,u*=b,h*=b}}t[e]=a,t[e+1]=l,t[e+2]=u,t[e+3]=h}}),Object.assign(i.prototype,{}),e.Quaternion=i}),t("skylark-langx-numerics/Vector3",["skylark-langx-klass","./numerics","./maths","./Quaternion"],function(t,e,n,i){var r=new i,s=t({klassName:"Vector3",set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("mathsVector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("mathsVector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("mathsVector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("mathsVector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(r.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(r.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,u=a*n+o*e-r*i,h=a*i+r*n-s*e,c=-r*e-s*n-o*i;return this.x=l*a+c*-r+u*-o-h*-s,this.y=u*a+c*-s+h*-r-l*-o,this.z=h*a+c*-o+l*-s-u*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("mathsVector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return o.copy(this).projectOnVector(t),this.sub(o)},reflect:function(t){return this.sub(o.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(MathUtils.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("mathsVector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},_construct:function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}}),o=new s;return e.Vector3=s}),t("skylark-langx-numerics/Matrix4",["skylark-langx-klass","./numerics","./Vector3"],function(t,e,n){var i=new n,r=new n(0,0,0),s=new n(1,1,1),o=new n,a=new n,l=new n,u=t({set:function(t,e,n,i,r,s,o,a,l,u,h,c,f,d,p,m){var y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=i,y[1]=r,y[5]=s,y[9]=o,y[13]=a,y[2]=l,y[6]=u,y[10]=h,y[14]=c,y[3]=f,y[7]=d,y[11]=p,y[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/i.setFromMatrixColumn(t,0).length(),s=1/i.setFromMatrixColumn(t,1).length(),o=1/i.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("mathsMatrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),u=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){var c=s*u,f=s*h,d=o*u,p=o*h;e[0]=a*u,e[4]=-a*h,e[8]=l,e[1]=f+d*l,e[5]=c-p*l,e[9]=-o*a,e[2]=p-c*l,e[6]=d+f*l,e[10]=s*a}else if("YXZ"===t.order){var m=a*u,y=a*h,g=l*u,v=l*h;e[0]=m+v*o,e[4]=g*o-y,e[8]=s*l,e[1]=s*h,e[5]=s*u,e[9]=-o,e[2]=y*o-g,e[6]=v+m*o,e[10]=s*a}else if("ZXY"===t.order){var m=a*u,y=a*h,g=l*u,v=l*h;e[0]=m-v*o,e[4]=-s*h,e[8]=g+y*o,e[1]=y+g*o,e[5]=s*u,e[9]=v-m*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){var c=s*u,f=s*h,d=o*u,p=o*h;e[0]=a*u,e[4]=d*l-f,e[8]=c*l+p,e[1]=a*h,e[5]=p*l+c,e[9]=f*l-d,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){var x=s*a,k=s*l,w=o*a,b=o*l;e[0]=a*u,e[4]=b-x*h,e[8]=w*h+k,e[1]=h,e[5]=s*u,e[9]=-o*u,e[2]=-l*u,e[6]=k*h+w,e[10]=x-b*h}else if("XZY"===t.order){var x=s*a,k=s*l,w=o*a,b=o*l;e[0]=a*u,e[4]=-h,e[8]=l*u,e[1]=x*h+b,e[5]=s*u,e[9]=k*h-w,e[2]=w*h-k,e[6]=o*u,e[10]=b*h+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(r,t,s)},lookAt:function(t,e,n){var i=this.elements;return l.subVectors(t,e),0===l.lengthSq()&&(l.z=1),l.normalize(),o.crossVectors(n,l),0===o.lengthSq()&&(1===Math.abs(n.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),o.crossVectors(n,l)),o.normalize(),a.crossVectors(l,o),i[0]=o.x,i[4]=a.x,i[8]=l.x,i[1]=o.y,i[5]=a.y,i[9]=l.y,i[2]=o.z,i[6]=a.z,i[10]=l.z,this},multiply:function(t,e){return void 0!==e?(console.warn("mathsMatrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],u=n[1],h=n[5],c=n[9],f=n[13],d=n[2],p=n[6],m=n[10],y=n[14],g=n[3],v=n[7],x=n[11],k=n[15],w=i[0],b=i[4],_=i[8],C=i[12],M=i[1],S=i[5],E=i[9],P=i[13],z=i[2],T=i[6],A=i[10],O=i[14],I=i[3],N=i[7],D=i[11],F=i[15];return r[0]=s*w+o*M+a*z+l*I,r[4]=s*b+o*S+a*T+l*N,r[8]=s*_+o*E+a*A+l*D,r[12]=s*C+o*P+a*O+l*F,r[1]=u*w+h*M+c*z+f*I,r[5]=u*b+h*S+c*T+f*N,r[9]=u*_+h*E+c*A+f*D,r[13]=u*C+h*P+c*O+f*F,r[2]=d*w+p*M+m*z+y*I,r[6]=d*b+p*S+m*T+y*N,r[10]=d*_+p*E+m*A+y*D,r[14]=d*C+p*P+m*O+y*F,r[3]=g*w+v*M+x*z+k*I,r[7]=g*b+v*S+x*T+k*N,r[11]=g*_+v*E+x*A+k*D,r[15]=g*C+v*P+x*O+k*F,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],u=t[2],h=t[6],c=t[10],f=t[14],d=t[3],p=t[7],m=t[11],y=t[15];return d*(+r*a*h-i*l*h-r*o*c+n*l*c+i*o*f-n*a*f)+p*(+e*a*f-e*l*c+r*s*c-i*s*f+i*l*u-r*a*u)+m*(+e*l*h-e*o*f-r*s*h+n*s*f+r*o*u-n*l*u)+y*(-i*o*u-e*a*h+e*o*c+i*s*h-n*s*c+n*a*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn("mathsMatrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],u=i[5],h=i[6],c=i[7],f=i[8],d=i[9],p=i[10],m=i[11],y=i[12],g=i[13],v=i[14],x=i[15],k=d*v*c-g*p*c+g*h*m-u*v*m-d*h*x+u*p*x,w=y*p*c-f*v*c-y*h*m+l*v*m+f*h*x-l*p*x,b=f*g*c-y*d*c+y*u*m-l*g*m-f*u*x+l*d*x,_=y*d*h-f*g*h-y*u*p+l*g*p+f*u*v-l*d*v,C=r*k+s*w+o*b+a*_;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var M=1/C;return n[0]=k*M,n[1]=(g*p*a-d*v*a-g*o*m+s*v*m+d*o*x-s*p*x)*M,n[2]=(u*v*a-g*h*a+g*o*c-s*v*c-u*o*x+s*h*x)*M,n[3]=(d*h*a-u*p*a-d*o*c+s*p*c+u*o*m-s*h*m)*M,n[4]=w*M,n[5]=(f*v*a-y*p*a+y*o*m-r*v*m-f*o*x+r*p*x)*M,n[6]=(y*h*a-l*v*a-y*o*c+r*v*c+l*o*x-r*h*x)*M,n[7]=(l*p*a-f*h*a+f*o*c-r*p*c-l*o*m+r*h*m)*M,n[8]=b*M,n[9]=(y*d*a-f*g*a-y*s*m+r*g*m+f*s*x-r*d*x)*M,n[10]=(l*g*a-y*u*a+y*s*c-r*g*c-l*s*x+r*u*x)*M,n[11]=(f*u*a-l*d*a-f*s*c+r*d*c+l*s*m-r*u*m)*M,n[12]=_*M,n[13]=(f*g*o-y*d*o+y*s*p-r*g*p-f*s*v+r*d*v)*M,n[14]=(y*u*o-l*g*o-y*s*h+r*g*h+l*s*v-r*u*v)*M,n[15]=(l*d*o-f*u*o+f*s*h-r*d*h-l*s*p+r*u*p)*M,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,u=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,u*o+n,u*a-i*s,0,l*a-i*o,u*a+i*s,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,u=s+s,h=o+o,c=r*l,f=r*u,d=r*h,p=s*u,m=s*h,y=o*h,g=a*l,v=a*u,x=a*h,k=n.x,w=n.y,b=n.z;return i[0]=(1-(p+y))*k,i[1]=(f+x)*k,i[2]=(d-v)*k,i[3]=0,i[4]=(f-x)*w,i[5]=(1-(c+y))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(d+v)*b,i[9]=(m-g)*b,i[10]=(1-(c+p))*b,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var r=this.elements,s=i.set(r[0],r[1],r[2]).length(),o=i.set(r[4],r[5],r[6]).length(),a=i.set(r[8],r[9],r[10]).length(),l=this.determinant();l<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],h.copy(this);var u=1/s,c=1/o,f=1/a;return h.elements[0]*=u,h.elements[1]*=u,h.elements[2]*=u,h.elements[4]*=c,h.elements[5]*=c,h.elements[6]*=c,h.elements[8]*=f,h.elements[9]*=f,h.elements[10]*=f,e.setFromRotationMatrix(h),n.x=s,n.y=o,n.z=a,this},makePerspective:function(t,e,n,i,r,s){void 0===s&&console.warn("mathsMatrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(e-t),l=2*r/(n-i),u=(e+t)/(e-t),h=(n+i)/(n-i),c=-(s+r)/(s-r),f=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,s){var o=this.elements,a=1/(e-t),l=1/(n-i),u=1/(s-r),h=(e+t)*a,c=(n+i)*l,f=(s+r)*u;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},_construct:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("mathsMatrix4: the constructor no longer reads arguments. use .set() instead.")}}),h=new u;return e.Matrix4=u}),t("skylark-langx-numerics/Euler",["skylark-langx-klass","./numerics","./maths","./Quaternion","./Vector3","./Matrix4"],function(t,e,n,i,r,s){var o=new s,a=new i,l=t({x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var r=n.clamp,s=t.elements,o=s[0],a=s[4],l=s[8],u=s[1],h=s[5],c=s[9],f=s[2],d=s[6],p=s[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-f,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,h))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-c,h),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(l,p))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,h),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return o.makeRotationFromQuaternion(t),this.setFromRotationMatrix(o,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return a.setFromEuler(this),this.setFromQuaternion(a,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new r(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||l.DefaultOrder}});return l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l.DefaultOrder="XYZ",e.Euler=l}),t("skylark-langx-numerics/Matrix3",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Matrix3",isMatrix3:!0,set:function(t,e,n,i,r,s,o,a,l){var u=this.elements;return u[0]=t,u[1]=i,u[2]=o,u[3]=e,u[4]=r,u[5]=a,u[6]=n,u[7]=s,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],u=n[4],h=n[7],c=n[2],f=n[5],d=n[8],p=i[0],m=i[3],y=i[6],g=i[1],v=i[4],x=i[7],k=i[2],w=i[5],b=i[8];return r[0]=s*p+o*g+a*k,r[3]=s*m+o*v+a*w,r[6]=s*y+o*x+a*b,r[1]=l*p+u*g+h*k,r[4]=l*m+u*v+h*w,r[7]=l*y+u*x+h*b,r[2]=c*p+f*g+d*k,r[5]=c*m+f*v+d*w,r[8]=c*y+f*x+d*b,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8];return e*s*u-e*o*l-n*r*u+n*o*a+i*r*l-i*s*a},getInverse:function(t,e){void 0!==e&&console.warn("mathsMatrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements,i=this.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],u=n[5],h=n[6],c=n[7],f=n[8],d=f*l-u*c,p=u*h-f*a,m=c*a-l*h,y=r*d+s*p+o*m;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);var g=1/y;return i[0]=d*g,i[1]=(o*c-f*s)*g,i[2]=(u*s-o*l)*g,i[3]=p*g,i[4]=(f*r-o*h)*g,i[5]=(o*a-u*r)*g,i[6]=m*g,i[7]=(s*h-c*r)*g,i[8]=(l*r-s*a)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,s,o){var a=Math.cos(r),l=Math.sin(r);this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],s=i[3],o=i[6],a=i[1],l=i[4],u=i[7];return i[0]=e*r+n*a,i[3]=e*s+n*l,i[6]=e*o+n*u,i[1]=-n*r+e*a,i[4]=-n*s+e*l,i[7]=-n*o+e*u,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},_construct:function(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("Matrix3: the constructor no longer reads arguments. use .set() instead.")}});return e.Matrix3=n}),t("skylark-langx-numerics/Transform",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Transform",value:{get:function(){return this._.value}}});return e.Transform=n}),t("skylark-langx-numerics/MatrixTransform",["./numerics","./Transform"],function(t,e){var n=e.inherit({klassName:"MatrixTransform",value:{get:function(){return this.matrix.clone()}},matrix:{get:function(){return this._.matrix}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t){var e=this._={};e.matrix=t}});return t.MatrixTransform=n}),t("skylark-langx-numerics/Plane",["skylark-langx-klass","./numerics","./Matrix3","./Vector3"],function(t,e,n,i){var r=new i,s=new i,o=new n,a=t({klassName:"Plane",set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var i=r.subVectors(n,e).cross(s.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("mathsPlane: .projectPoint() target is now required"),e=new i),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("mathsPlane: .intersectLine() target is now required"),e=new i);var n=t.delta(r),s=this.normal.dot(n);if(0===s)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/s;return o<0||o>1?void 0:e.copy(n).multiplyScalar(o).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("mathsPlane: .coplanarPoint() target is now required"),t=new i),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||o.getNormalMatrix(t),i=this.coplanarPoint(r).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},_construct:function(t,e){this.normal=void 0!==t?t:new i(1,0,0),this.constant=void 0!==e?e:0}});return e.Plane=a}),t("skylark-langx-numerics/RotateTransform",["./numerics","./Transform","./MatrixTransform"],function(t,e,n){var i=t.RotateTransform=e.inherit({klassName:"RotateTransform",value:{get:function(){return n.rotateAt(this.angle,this.centerX,this.centerY)}},angle:{get:function(){return this._.angle}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,e,n){var i=this._={};i.angle=t||0,i.centerX=e||0,i.centerY=n||0}});return i}),t("skylark-langx-numerics/ScaleTransform",["./numerics","./Transform","./MatrixTransform"],function(t,e,n){var i=e.inherit({klassName:"ScaleTransform",value:{get:function(){return n.scaleAt(this.scaleX,this.scaleY,this.centerX,this.centerY)}},scaleX:{get:function(){return this._.scaleX}},scaleY:{get:function(){return this._.scaleY}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,e,n,i){var r=this._={};r.scaleX=t||1,r.scaleY=e||1,r.centerX=n||0,r.centerY=i||0}});return t.ScaleTransform=i}),t("skylark-langx-numerics/SkewTransform",["./numerics","./Transform","./MatrixTransform"],function(t,e,n){var i=e.inherit({klassName:"SkewTransform",value:{get:function(){return n.scaleAt(this.skewX,this.skewY)}},skewX:{get:function(){return this._.skewX}},skewY:{get:function(){return this._.skewY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,e){var n=this._={};n.skewX=t||0,n.skewY=e||0}});return t.SkewTransform=i}),t("skylark-langx-numerics/Vector2",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Vector2",set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this},_construct:function(t,e){this.x=t||0,this.y=e||0}});return e.Vector2=n}),t("skylark-langx-numerics/TransformMatrix",["skylark-langx-klass","./numerics","./Vector2"],function(t,e,n){var i=Math.PI/180,r={},s=function(t){return r[t]||(r[t]=Math.PI*t/180)},o=t({klassName:"TransformMatrix",_multiplyPoint:function(t){var e=this._,i=t.x*e.m11+t.y*e.m21+e.dx,r=t.x*e.m12+t.y*e.m22+e.dy;return new n(i,r)},m11:{get:function(){return this._.m11}},m12:{get:function(){return this._.m12}},m21:{get:function(){return this._.m21}},m22:{get:function(){return this._.m22}},dx:{get:function(){return this._.dx}},dy:{get:function(){return this._.dy}},alpha:{get:function(){return this._.alpha}},shadow:{get:function(){return this._.shadow}},compositeOperation:{get:function(){return this._.compositeOperation}},multiplyPoint:function(t){return this._multiplyPoint(t)},multiplyRectangle:function(t){if(this.isIdentity())return t.clone();var e=this.multiplyPoint(t.leftTop),n=this.multiplyPoint(t.leftBottom),i=this.multiplyPoint(t.right),r=this.multiplyPoint(t.rightBottom),s=Math.min(e.x,n.x,i.x,r.x),o=Math.min(e.y,n.y,i.y,r.y),a=Math.max(e.x,n.x,i.x,r.x),l=Math.max(e.y,n.y,i.y,r.y);return new Rect(s,o,a-s,l-o)},prepend:function(t,e,n,i,r,s){var o=this.dx;if(1!=t||0!=e||0!=n||1!=i){var a=this.m11,l=this.m21;this.m11=a*t+this.m12*n,this.m12=a*e+this.m12*i,this.m21=l*t+this.m22*n,this.m22=l*e+this.m22*i}return this.dx=o*t+this.dy*n+r,this.dy=o*e+this.dy*i+s,this},append:function(t,e,n,i,r,s){var o=this.m11,a=this.m12,l=this.m21,u=this.m22;return this.m11=t*o+e*l,this.m12=t*a+e*u,this.m21=n*o+i*l,this.m22=n*a+i*u,this.dx=r*o+s*l+this.dx,this.dy=r*a+s*u+this.dy,this},prependMatrix:function(t){return this.prepend(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},appendMatrix:function(t){return this.append(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},prependTransform:function(t,e,n,r,s,o,a,l,u){if(s%360)var h=s*i,c=Math.cos(h),f=Math.sin(h);else c=1,f=0;return(l||u)&&(this.dx-=l,this.dy-=u),o||a?(o*=i,a*=i,this.prepend(c*n,f*n,-f*r,c*r,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),t,e)):this.prepend(c*n,f*n,-f*r,c*r,t,e),this},appendTransform:function(t,e,n,r,s,o,a,l,u){if(s%360)var h=s*i,c=Math.cos(h),f=Math.sin(h);else c=1,f=0;return o||a?(o*=i,a*=i,this.append(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),t,e),this.append(c*n,f*n,-f*r,c*r,0,0)):this.append(c*n,f*n,-f*r,c*r,t,e),(l||u)&&(this.dx-=l*this.m11+u*this.m21,this.dy-=l*this.m12+u*this.m22),this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m11,r=this.m21,s=this.dx;return this.m11=i*e-this.m12*n,this.m12=i*n+this.m12*e,this.m21=r*e-this.m22*n,this.m22=r*n+this.m22*e,this.dx=s*e-this.dy*n,this.dy=s*n+this.dy*e,this},skew:function(t,e){return t*=i,e*=i,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},scale:function(t,e){return this.m11*=t,this.m22*=e,this.dx*=t,this.dy*=e,this},translate:function(t,e){return this.dx+=t,this.dy+=e,this},identity:function(){return this.alpha=this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0,this.shadow=this.compositeOperation=null,this},invert:function(){var t=this.m11,e=this.m12,n=this.m21,i=this.m22,r=this.dx,s=t*i-e*n;return this.m11=i/s,this.m12=-e/s,this.m21=-n/s,this.m22=t/s,this.dx=(n*this.dy-i*r)/s,this.dy=-(t*this.dy-e*r)/s,this},isIdentity:function(){return 0==this.dx&&0==this.dy&&1==this.m11&&0==this.m12&&0==this.m21&&1==this.m22},decompose:function(t){null==t&&(t={}),t.x=this.dx,t.y=this.dy,t.scaleX=Math.sqrt(this.m11*this.m11+this.m12*this.m12),t.scaleY=Math.sqrt(this.m21*this.m21+this.m22*this.m22);var e=Math.atan2(-this.m21,this.m22),n=Math.atan2(this.m12,this.m11);return e==n?(t.rotation=n/i,this.m11<0&&this.m22>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=e/i,t.skewY=n/i),t},reinitialize:function(t,e,n,i,r,s,o,a,l){return this._initialize(t,e,n,i,r,s),this.alpha=o||1,this.shadow=a,this.compositeOperation=l,this},appendProperties:function(t,e,n){return this.alpha*=t,this.shadow=e||this.shadow,this.compositeOperation=n||this.compositeOperation,this},prependProperties:function(t,e,n){return this.alpha*=t,this.shadow=this.shadow||e,this.compositeOperation=this.compositeOperation||n,this},multiply:function(t){var e=this.m11,n=this.m12,i=this.m21,r=this.m22,s=this.dx,o=this.dy,a=t;return this.m11=e*a.m11+i*a.m12,this.m12=n*a.m11+r*a.m12,this.m21=e*a.m21+i*a.m22,this.m22=n*a.m21+r*a.m22,this.dx=e*a.dx+i*a.dy+s,this.dy=n*a.dx+r*a.dy+o,this},clone:function(){var t=this._,e=new o(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy);return e.shadow=this.shadow,e.alpha=this.alpha,e.compositeOperation=this.compositeOperation,e},toString:function(){var t=this._;return"[TransformMatrix (m11="+t.m11+" m12="+t.m12+" m21="+t.m21+" m22="+t.m22+" dx="+t.dx+" dy="+t.dy+")]"},_construct:function(t,e,n,i,r,s){var o=this._={};o.m11=t||1,o.m12=e||0,o.m21=n||0,o.m22=i||1,o.dx=r||0,o.dy=s||0}});return Object.assign(o,{translate:function(t,e){return new o(1,0,0,1,t,e)},scale:function(t,e){return new o(t,0,0,e||t,0,0)},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return new o(e,n,-n,e,0,0)},rotateg:function(t){return this.rotate(s(t))},skewX:function(t){var e=Math.tan(t);return new o(1,0,e,1)},skewXg:function(t){return this.skewX(s(t))},skewY:function(t){var e=Math.tan(t);return new o(1,e,0,1)},skewYg:function(t){return this.skewY(s(t))},reflect:function(t,e){1==arguments.length&&(e=t.y,t=t.x);var n=t*t,i=e*e,r=n+i,s=2*n/r-1,a=2*t*e/r,l=a,u=2*i/r-1;return new o(s,l,a,u)},project:function(t,e){var n=t*t,i=e*e,r=n+i,s=n/r,a=t*e/r;return yx=a,yy=i/r,new o(s,yx,a,yy)},_sandwich:function(t,e,n){return this.translate(e,n).multiply(t).multiply(this.translate(-e,-n))},scaleAt:function(t,e,n,i){switch(arguments.length){case 4:return this._sandwich(this.scale(t,e),n,i);case 3:return"number"==typeof n?this._sandwich(this.scale(t),e,n):this._sandwich(this.scale(t,e),n.x,n.y)}return this._sandwich(this.scale(t),e.x,e.y)},rotateAt:function(t,e,n){return arguments.length>2?this._sandwich(this.rotate(t),e,n):this._sandwich(this.rotate(t),e.x,e.y)},rotategAt:function(t,e,n){return arguments.length>2?this._sandwich(this.rotateg(t),e,n):this._sandwich(this.rotateg(t),e.x,e.y)},skewXAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewX(t),e,n):this._sandwich(this.skewX(t),e.x,e.y)},skewXgAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewXg(t),e,n):this._sandwich(this.skewXg(t),e.x,e.y)},skewYAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewY(t),e,n):this._sandwich(this.skewY(t),e.x,e.y)},skewYgAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewYg(t),e,n):this._sandwich(this.skewYg(t),e.x,e.y)}}),e.TransformMatrix=o}),t("skylark-langx-numerics/TranslateTransform",["./numerics","./Transform","./MatrixTransform"],function(t,e,n,i,r){var s=e.inherit({klassName:"TranslateTransform",value:{get:function(){return n.scaleAt(this.x,this.y)}},x:{get:function(){return this._.x}},y:{get:function(){return this._.y}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,e){var n=this._;n.x=t||0,n.y=e||0}});return t.TranslateTransform=s}),t("skylark-langx-numerics/Vector4",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Vector4",set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,s=t.elements,o=s[0],a=s[4],l=s[8],u=s[1],h=s[5],c=s[9],f=s[2],d=s[6],p=s[10];if(Math.abs(a-u)<.01&&Math.abs(l-f)<.01&&Math.abs(c-d)<.01){if(Math.abs(a+u)<.1&&Math.abs(l+f)<.1&&Math.abs(c+d)<.1&&Math.abs(o+h+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,y=(h+1)/2,g=(p+1)/2,v=(a+u)/4,x=(l+f)/4,k=(c+d)/4;return m>y&&m>g?m<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(m),i=v/n,r=x/n):y>g?y<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(y),n=v/i,r=k/i):g<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=x/r,i=k/r),this.set(n,i,r,e),this}var w=Math.sqrt((d-c)*(d-c)+(l-f)*(l-f)+(u-a)*(u-a));return Math.abs(w)<.001&&(w=1),this.x=(d-c)/w,this.y=(l-f)/w,this.z=(u-a)/w,this.w=Math.acos((o+h+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},_construct:function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}});return e.Vector4=n}),t("skylark-langx-numerics/main",["./numerics","./Euler","./maths","./Matrix3","./Matrix4","./MatrixTransform","./Plane","./Quaternion","./RotateTransform","./ScaleTransform","./SkewTransform","./Transform","./TransformMatrix","./TranslateTransform","./Vector2","./Vector3","./Vector4"],function(t){return t}),t("skylark-langx-numerics",["skylark-langx-numerics/main"],function(t){return t}),t("skylark-langx/numerics",["skylark-langx-numerics"],function(t){return t}),t("skylark-langx/objects",["skylark-langx-objects"],function(t){return t}),t("skylark-langx-strings/strings",["skylark-langx-ns"],function(t){var e=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"});function n(t){return e[t]}var i=/[&<>"'`=]/g;var r=0;function s(t,e){var n,i,r,s,o,a,l,u=arguments.callee;return u.cache[t]||(u.cache[t]=(n=t,i=/^[\w\-]+$/.test(t)?u.get(t):(n="template(string)",t),r=1,s=("try { "+(u.variable?"var "+u.variable+" = this.stash;":"with (this.stash) { ")+"this.ret += '"+i.replace(/<%/g,"").replace(/%>/g,"").replace(/'(?![^\x11\x13]+?\x13)/g,"\\x27").replace(/^\s*|\s*$/g,"").replace(/\n|\r\n/g,function(){return"';\nthis.line = "+ ++r+"; this.ret += '\\n"}).replace(/\x11=raw(.+?)\x13/g,"' + ($1) + '").replace(/\x11=(.+?)\x13/g,"' + this.escapeHTML($1) + '").replace(/\x11(.+?)\x13/g,"'; $1; this.ret += '")+"'; "+(u.variable?"":"}")+"return this.ret;} catch (e) { throw 'TemplateError: ' + e + ' (on "+n+"' + ' line ' + this.line + ')'; } //@ sourceURL="+n+"\n").replace(/this\.ret \+= '';/g,""),o=new Function(s),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#x22;","'":"&#x27;"},l=function(t){return(""+t).replace(/[&<>\'\"]/g,function(t){return a[t]})},function(t){return o.call(u.context={escapeHTML:l,line:1,ret:"",stash:t})})),e?u.cache[t](e):u.cache[t]}return s.cache={},s.get=function(t){return document.getElementById(t).innerHTML},t.attach("langx.strings",{camelCase:function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},deserializeValue:function(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(e){return t}},escapeHTML:function(t){if(null==t)return"";if(!t)return String(t);return t.toString().replace(i,n)},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})},ltrim:function(t){return t.replace(/^\s+/,"")},lowerFirst:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},rtrim:function(t){return t.replace(/\s+$/,"")},serializeValue:function(t){return JSON.stringify(t)},substitute:function(t,e,n,i){function r(t,e){if(t.match(/\./)){var n,i=function(t,e){var r=t.pop();return r?e[r]?i(t,n=e[r]):null:n};return i(t.split(".").reverse(),e)}return e[t]}return i=i||window,n=n?proxy(i,n):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,s,o){var a=r(s,e);return o&&(a=r(o,i).call(i,a,s)),n(a,s).toString()})},slugify:function(t){t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var e="a/_,:;",n=0,i=e.length;n<i;n++)t=t.replace(new RegExp(e.charAt(n),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(n));return t=t.replace(/\s+/g,"-").replace(/-+/g,"-")},trim:function(t){return null==t?"":String.prototype.trim.call(t)},uniqueId:function(t){var e=++r+"";return t?t+e:e},upperFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})}),t("skylark-langx-strings/base64",["./strings"],function(t){return t.base64={decode:function(t,e){e=null!=e&&e;var n,i,r,s,o,a,l,u="",h=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(;h<t.length;)s=this._keyStr.indexOf(t.charAt(h++)),o=this._keyStr.indexOf(t.charAt(h++)),a=this._keyStr.indexOf(t.charAt(h++)),l=this._keyStr.indexOf(t.charAt(h++)),n=s<<2|o>>4,i=(15&o)<<4|a>>2,r=(3&a)<<6|l,u+=String.fromCharCode(n),64!=a&&(u+=String.fromCharCode(i)),64!=l&&(u+=String.fromCharCode(r));e||(u=function(t){var e="",n=0,i=c1=c2=0;for(;n<t.length;)(i=t.charCodeAt(n))<128?(e+=String.fromCharCode(i),n++):i>191&&i<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return e}(u));return u},encode:function(t,e){var n,i,r,s,o,a,l,u="",h=0;(e=null!=e&&e)||(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}(t));for(;h<t.length;)n=t.charCodeAt(h++),i=t.charCodeAt(h++),r=t.charCodeAt(h++),s=n>>2,o=(3&n)<<4|i>>4,a=(15&i)<<2|r>>6,l=63&r,isNaN(i)?a=l=64:isNaN(r)&&(l=64),u=u+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(l);return u}}}),t("skylark-langx-strings/main",["./strings","./base64"],function(t){return t}),t("skylark-langx-strings",["skylark-langx-strings/main"],function(t){return t}),t("skylark-langx/strings",["skylark-langx-strings"],function(t){return t}),t("skylark-langx/Stateful",["./Evented","./strings","./objects"],function(t,e,n){var i=n.isEqual,r=n.mixin,s=n.result,o=n.isEmptyObject,a=n.clone,l=e.uniqueId,u=t.inherit({_construct:function(t,e){var n=t||{};e||(e={}),this.cid=l(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var i=s(this,"defaults");n=r({},i,n),this.set(n,e),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return a(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,e,n){if(null==t)return this;var r;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;var s=n.unset,o=n.silent,l=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=a(this.attributes),this.changed={});var h=this.attributes,c=this.changed,f=this._previousAttributes;for(var d in r)e=r[d],i(h[d],e)||l.push(d),i(f[d],e)?delete c[d]:c[d]=e,s?delete h[d]:h[d]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!o){l.length&&(this._pending=n);for(var p=0;p<l.length;p++)this.trigger("change:"+l[p],this,h[l[p]],n)}if(u)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,r({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,r({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&a(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var r in t){var s=t[r];i(e[r],s)||(n[r]=s)}return!o(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},r({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=r({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,r(e,{validationError:n})),!1)}});return u}),t("skylark-langx-topic/topic",["skylark-langx-ns","skylark-langx-events"],function(t,e){var n=new e.Emitter;return t.attach("langx.topic",{publish:function(t,e,i){var r=[].slice.call(arguments,1);return n.trigger({type:t,data:r})},subscribe:function(t,e,i){var r=function(t){e.apply(i,t.data)};return n.on(t,r),{remove:function(){n.off(t,r)}}}})}),t("skylark-langx-topic/main",["./topic"],function(t){return t}),t("skylark-langx-topic",["skylark-langx-topic/main"],function(t){return t}),t("skylark-langx/topic",["skylark-langx-topic"],function(t){return t}),t("skylark-langx/types",["skylark-langx-types"],function(t){return t}),t("skylark-langx/langx",["./skylark","./arrays","./ArrayStore","./aspect","./async","./binary","./datetimes","./Deferred","./Emitter","./Evented","./events","./funcs","./hoster","./klass","./maths","./numerics","./objects","./Stateful","./strings","./topic","./types"],function(t,e,n,i,r,s,o,a,l,u,h,c,f,d,p,m,y,g,v,x,k){"use strict";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var w=y.mixin,b=(y.safeMixin,k.isFunction);var _=1;function C(){return C}return w(C,{createEvent:l.createEvent,funcArg:function(t,e,n,i){return b(e)?e.call(t,n,i):e},getQueryParams:function(t){var e=(t=t||window.location.href).split("?"),n={};e.length>1&&e[1].split("&").forEach(function(t){var e=t.split("=");n[e[0]]=e[1]});return n},toPixel:function(t){return parseFloat(t)||0},uid:function(t){return t._uid||(t._uid=_++)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),w(C,e,i,o,c,m,y,v,k,{ArrayStore:n,async:r,Deferred:a,Emitter:l,Evented:u,hoster:f,klass:d,Stateful:g,topic:x}),t.langx=C}),t("skylark-domx-browser/browser",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){"use strict";var n,i,r=e.hoster.browser,s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},o=null,a="",l="",u={},h={},c=/^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,f=window.document,d=f.createElement("div"),p=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.matchesSelector,m=d.requestFullscreen||d.webkitRequestFullscreen||d.mozRequestFullScreen||d.msRequestFullscreen,y=(f.exitFullscreen||f.webkitCancelFullScreen||f.mozCancelFullScreen||f.msExitFullscreen,d.style);for(var g in y){var v=g.match(i||c);if(v){i||(n=v[1],i=new RegExp("^("+n+")(.*)$"),n,a="-"+n.toLowerCase()+"-",l=n.toLowerCase()),u[e.lowerFirst(v[2])]=g;var x=e.dasherize(v[2]);h[x]=a+x,s[g]&&(o=s[g])}}return o||void 0!==y.transition&&(o=s.transition),e.mixin(r,{css3PropPrefix:a,isIE:!!/msie/i.exec(window.navigator.userAgent),normalizeStyleProperty:function(t){return u[t]||t},normalizeCssProperty:function(t){return h[t]||t},normalizeCssEvent:function(t){return l?l+t:t.toLowerCase()},matchesSelector:p,requestFullScreen:m,exitFullscreen:m,location:function(){return window.location},support:{}}),o&&(r.support.transition={end:o}),r.support.cssPointerEvents=(d.style.cssText="pointer-events:auto","auto"===d.style.pointerEvents),d=null,t.attach("domx.browser",r)}),t("skylark-domx-browser/main",["./browser"],function(t){return t}),t("skylark-domx-browser",["skylark-domx-browser/main"],function(t){return t}),t("skylark-domx-noder/noder",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser"],function(t,e,n){var i=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),r=/^\s*<(\w+|!)[^>]*>/,s=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,o=document.createElement("div"),a=document.createElement("table"),l=document.createElement("tbody"),u=document.createElement("tr"),h={tr:l,tbody:a,thead:a,tfoot:a,td:u,th:u,"*":o},c=/^(?:body|html)$/i,f=Array.prototype.map,d=Array.prototype.slice;function p(t,n){return e.isArrayLike(t)||(t=[t]),n&&(t=f.call(t,function(t){return t.cloneNode(!0)})),e.flatten(t)}function m(t,e){var n=t.nodeName&&t.nodeName.toLowerCase();return void 0!==e?n===e.toLowerCase():n}function y(t,n){if(e.isFunction(t))return t.apply(n,[]);if(e.isArrayLike(t)){for(var i,r=0;r<t.length;r++)e.isFunction(t[r])&&(t[r]=t[r].apply(n,[]),e.isArrayLike(t[r])&&(i=!0));i&&(t=e.flatten(t))}return t}function g(t,e,n){e=y(e,t);for(var i=t,r=p(e,n),s=0;s<r.length;s++)i.appendChild(r[s]);return this}function v(t,e,n){var i;if(i=/svg/i.test(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t),e)for(var r in e)i.setAttribute(r,e[r]);return n&&g(n,i),i}var x=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;function k(t,e,n){if(n)return t.parentNode===e;if(document.documentElement.contains)return e.contains(t);for(;t;){if(e===t)return!0;t=t.parentNode}return!1}function w(t){return t?9==t.nodeType?t:t.ownerDocument:document}function b(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||b(t.parentNode)))}function _(){return _}return e.mixin(_,{active:function(t){var e;t=t||document;try{e=t.activeElement}catch(n){e=t.body}e||(e=t.body);e.nodeName||(e=t.body);return e},after:function(t,e,n){e=y(e,t);var i=(s=t).parentNode;if(i)for(var r=p(e,n),s=s.nextSibling,o=0;o<r.length;o++)s?i.insertBefore(r[o],s):i.appendChild(r[o]);return this},append:g,before:function(t,e,n){e=y(e,t);var i=t,r=i.parentNode;if(r)for(var s=p(e,n),o=0;o<s.length;o++)r.insertBefore(s[o],i);return this},blur:function(t){t.blur()},body:function(){return document.body},clone:function(t,e){var n,r=this;if(!i||1!==t.nodeType||e)return t.cloneNode(e);if(!e)return n=document.createElement(t.nodeName),each(r.getAttribs(t),function(e){r.setAttrib(n,e.nodeName,r.getAttrib(t,e.nodeName))}),n},contains:function(t,e){return k(e,t)},contents:function(t){if(m(t,"iframe"))return t.contentDocument;return t.childNodes},createElement:v,createFragment:function(t){if(t=e.trim(t),s.test(t))return[v(RegExp.$1)];var n=r.test(t)&&RegExp.$1;n in h||(n="*");var i=h[n];return i.innerHTML=function(t){for(var e=t.split("/>"),n="",i=0;i<e.length-1;i++){var r=e[i].split("<");n+=e[i]+"></"+r[r.length-1].split(" ")[0]+">"}return n+e[e.length-1]}(""+t),dom=d.call(i.childNodes),dom.forEach(function(t){i.removeChild(t)}),dom},createTextNode:function(t){return document.createTextNode(t)},doc:function(){return document},empty:function(t){for(;t.hasChildNodes();){var e=t.firstChild;t.removeChild(e)}return this},generateId:function(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;for(;n--;)i+=e.charCodeAt(n);return i.toString(36)},fullScreen:function(t){if(!1===t)n.exitFullScreen.apply(document);else{if(!t)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.requestFullScreen.apply(t),t}},focusable:function(t,e){var n,i,r,s,o,a=t.nodeName.toLowerCase();if("area"===a)return n=t.parentNode,i=n.name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&((r=$("img[usemap='#"+i+"']")).length>0&&r.is(":visible"));/^(input|select|textarea|button|object)$/.test(a)?(s=!t.disabled)&&(o=$(t).closest("fieldset")[0])&&(s=!o.disabled):s="a"===a&&t.href||e;return s&&$(t).is(":visible")&&visible($(t))},fromPoint:function(t,e){return document.elementFromPoint(t,e)},html:function(t,n){if(void 0===n)return t.innerHTML;if(this.empty(t),n=n||"",e.isString(n)&&(n=n.replace(x,"<$1></$2>")),e.isString(n)||e.isNumber(n))t.innerHTML=n;else if(e.isArrayLike(n))for(var i=0;i<n.length;i++)t.appendChild(n[i]);else t.appendChild(n);return this},isActive:function(t){return t===document.activeElement&&(t.type||t.href)},isChildOf:k,isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isEditable:b,isInDocument:function(t){return t===document.body||document.body.contains(t)},isInput:function(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||b(t)},isWindow:e.isWindow,nodeName:m,offsetParent:function(t){var e=t.offsetParent||document.body;for(;e&&!c.test(e.nodeName)&&"static"==document.defaultView.getComputedStyle(e).position;)e=e.offsetParent;return e},ownerDoc:w,ownerWindow:function(t){var e=w(t);return e.defaultView||e.parentWindow},prepend:function(t,e,n){for(var i=t,r=i.firstChild,s=p(e,n),o=0;o<s.length;o++)r?i.insertBefore(s[o],r):i.appendChild(s[o]);return this},reflow:function(t){null==el&&(t=document);return t.offsetHeight,this},remove:function(t){if(t&&t.parentNode)try{t.parentNode.removeChild(t)}catch(t){console.warn("The node is already removed",t)}return this},removeChild:function(t,n){e.isArrayLike(n)||(n=[n]);for(var i=0;i<n.length;i++)t.removeChild(n[i]);return this},replace:function(t,e){return e.parentNode.replaceChild(t,e),this},selectable:function(t,e){if(void 0===t||void 0===t.style)return;t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off"},traverse:function t(e,n){n(e);for(var i=0,r=e.childNodes.length;i<r;i++)t(e.childNodes[i],n);return this},reverse:function(t){for(var e=t.firstChild,n=t.children.length-1;n>0;n--)if(n>0){var i=t.children[n];t.insertBefore(i,e)}},wrapper:function(t,n){e.isString(n)&&(n=this.createFragment(n).firstChild);t.parentNode.insertBefore(n,t),n.appendChild(t)},wrapperInner:function(t,e){var n=d.call(t.childNodes);t.appendChild(e);for(var i=0;i<n.length;i++)e.appendChild(n[i]);return this},unwrap:function(t){var e=t.parentNode;if(e){if(this.isDoc(e.parentNode))return;e.parentNode.insertBefore(t,e)}}}),t.attach("domx.noder",_)}),t("skylark-domx-styler/styler",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){Array.prototype.every;var n=Array.prototype.forEach,i=e.camelCase,r=e.dasherize;function s(t,e){return"number"!=typeof e||o[r(t)]?e:e+"px"}var o={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},a={};function l(t){return t in a?a[t]:a[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function u(t,e){var n=t.className||"",i=n&&void 0!==n.baseVal;if(void 0===e)return i?n.baseVal:n;i?n.baseVal=e:t.className=e}var h={};function c(t,n){if(!n)return this;var i=u(t);return(e.isString(n)?n.split(/\s+/g):n).forEach(function(t){var e=l(t);i.match(e)||(i+=(i?" ":"")+t)}),u(t,i),this}function f(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)}function d(t,e){var n=l(e);return t.className&&t.className.match(n)}function p(t,n){if(n){var i=u(t);(e.isString(n)?n.split(/\s+/g):n).forEach(function(t){var e=l(t);i.match(e)&&(i=i.replace(e," "))}),u(t,i.trim())}else u(t,"");return this}var m=function(){return m};return e.mixin(m,{autocssfix:!1,cssHooks:{},addClass:c,className:u,css:function(t,o,a){if(void 0==a){var l=f(t);if(void 0==o)return l;if(e.isString(o))return t.style[i(o)]||l.getPropertyValue(r(o));if(e.isArrayLike(o)){var u={};return n.call(o,function(e){u[e]=t.style[i(e)]||l.getPropertyValue(r(e))}),u}}var h="";if("string"==typeof o)a||0===a?h=r(o)+":"+s(o,a):t.style.removeProperty(r(o));else for(key in o)void 0!==o[key]&&(o[key]||0===o[key]?h+=r(key)+":"+s(key,o[key])+";":t.style.removeProperty(r(key)));return t.style.cssText+=";"+h,this},disabled:function(t,e){if(arguments.length<2)return!!this.dom.disabled;return t.disabled=e,this},hasClass:d,hide:function(t){return m.css(t,"display","none"),this},isInvisible:function(t){return"none"==m.css(t,"display")||0==m.css(t,"opacity")||"hidden"==m.css(t,"visibility")},removeClass:p,show:function(t){m.css(t,"display",""),"none"==m.css(t,"display")&&m.css(t,"display",function(t){var e,n;h[t]||(e=document.createElement(t),document.body.appendChild(e),n=f(e).getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),h[t]=n);return h[t]}(t.nodeName));return this},toggleClass:function(t,e,n){return e.split(/\s+/g).forEach(function(e){void 0===n&&(n=!d(t,e)),n?c(t,e):p(t,e)}),this}}),t.attach("domx.styler",m)}),t("skylark-domx-styler/main",["./styler"],function(t,e,n){return t}),t("skylark-domx-styler",["skylark-domx-styler/main"],function(t){return t}),t("skylark-domx-noder/overlay",["skylark-domx-styler","./noder"],function(t,e){return e.overlay=function(n,i){var r=e.createElement("div",i);return t.css(r,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2147483647,opacity:.7}),n.appendChild(r),r}}),t("skylark-domx-noder/throb",["skylark-langx/langx","skylark-domx-styler","./noder"],function(t,e,n){return n.throb=function(t,i){(i=i||{}).text,i.style;var r,s=i.time,o=i.callback,a=n.createElement("div",{class:i.className||"throbber"}),l=function(){r&&(clearTimeout(r),r=null),a&&(n.remove(a),a=null)};i.style&&e.css(a,i.style);var u=i.content||'<span class="throb"></span>';n.html(a,u),t.appendChild(a),s&&(r=setTimeout(function(){l(),o&&o()},s));return{throbber:a,remove:l,update:function(t){t&&t.text&&a&&(textNode.nodeValue=t.text)}}}}),t("skylark-domx-noder/main",["./noder","./overlay","./throb"],function(t){return t}),t("skylark-domx-noder",["skylark-domx-noder/main"],function(t){return t}),t("skylark-domx-finder/finder",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-styler"],function(t,e,n,r,s){var o={},a=Array.prototype.filter,l=Array.prototype.slice,u=n.matchesSelector;(function(){var t,e,n,i,r,s={},o={},a=/\\/g,l=function(n,r){if(null==n)return null;if(!0===n.Slick)return n;n=(""+n).replace(/^\s+|\s+$/g,"");var a=(i=!!r)?o:s;if(a[n])return a[n];for(t={Slick:!0,expressions:[],raw:n,reverse:function(){return l(this.raw,!0)}},e=-1;n!=(n=n.replace(f,d)););return t.length=t.expressions.length,a[t.raw]=i?h(t):t},u=function(t){return"!"===t?" ":" "===t?"!":/^!/.test(t)?t.replace(/^!/,""):"!"+t},h=function(t){for(var e=t.expressions,n=0;n<e.length;n++){for(var i=e[n],r={parts:[],tag:"*",combinator:u(i[0].combinator)},s=0;s<i.length;s++){var o=i[s];o.reverseCombinator||(o.reverseCombinator=" "),o.combinator=o.reverseCombinator,delete o.reverseCombinator}i.reverse().push(r)}return t},c=(r=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,function(t){return t.replace(r,"\\")}),f=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+c(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function d(r,s,o,l,h,f,d,p,m,y,g,v,x,k,w,b){if((s||-1===e)&&(t.expressions[++e]=[],n=-1,s))return"";if(o||l||-1===n){o=o||" ";var _=t.expressions[e];i&&_[n]&&(_[n].reverseCombinator=u(o)),_[++n]={combinator:o,tag:"*"}}var C=t.expressions[e][n];if(h)C.tag=h.replace(a,"");else if(f)C.id=f.replace(a,"");else if(d)d=d.replace(a,""),C.classList||(C.classList=[]),C.classes||(C.classes=[]),C.classList.push(d),C.classes.push({value:d,regexp:new RegExp("(^|\\s)"+c(d)+"(\\s|$)")});else if(x)b=(b=b||w)?b.replace(a,""):null,C.pseudos||(C.pseudos=[]),C.pseudos.push({key:x.replace(a,""),value:b,type:1==v.length?"class":"element"});else if(p){var M,S;switch(p=p.replace(a,""),g=(g||"").replace(a,""),m){case"^=":S=new RegExp("^"+c(g));break;case"$=":S=new RegExp(c(g)+"$");break;case"~=":S=new RegExp("(^|\\s)"+c(g)+"(\\s|$)");break;case"|=":S=new RegExp("^"+c(g)+"(-|$)");break;case"=":M=function(t){return g==t};break;case"*=":M=function(t){return t&&t.indexOf(g)>-1};break;case"!=":M=function(t){return g!=t};break;default:M=function(t){return!!t}}""==g&&/^[*$^]=$/.test(m)&&(M=function(){return!1}),M||(M=function(t){return t&&S.test(t)}),C.attributes||(C.attributes=[]),C.attributes.push({key:p,operator:m,value:g,test:M})}return""}var p=this.Slick||{};p.parse=function(t){return l(t)},p.escapeRegExp=c,this.Slick||(this.Slick=p)}).apply(o);var h=/^(?:input|select|textarea|button)$/i,c=/^h\d$/i,l=Array.prototype.slice;o.parseSelector=o.Slick.parse;var f=o.pseudos={button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},checked:function(t){return!!t.checked},contains:function(t,e,n,i){if($(this).text().indexOf(i)>-1)return this},disabled:function(t){return!!t.disabled},enabled:function(t){return!t.disabled},eq:function(t,e,n,i){return e==i},even:function(t,e,n,i){return e%2==0},focus:function(t){return document.activeElement===t&&(t.href||t.type||t.tabindex)},focusable:function(t){return r.focusable(t,null!=t.tabindex)},first:function(t,e){return 0===e},gt:function(t,e,n,i){return e>i},has:function(t,e,n,i){return k(t,i)},header:function(t){return c.test(t.nodeName)},hidden:function(t){return!o.pseudos.visible(t)},input:function(t){return h.test(t.nodeName)},last:function(t,e,n){return e===n.length-1},lt:function(t,e,n,i){return e<i},not:function(t,e,n,i){return!_(t,i)},odd:function(t,e,n,i){return e%2==1},parent:function(t){return!!t.parentElement},selected:function(t){return!!t.selected},tabbable:function(t){var e=t.tabindex,n=null!=e;return(!n||e>=0)&&r.focusable(element,n)},text:function(t){return"text"===t.type},visible:function(t){return t.offsetWidth&&t.offsetWidth},empty:function(t){return!t.hasChildNodes()}};function d(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function p(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}for(i in["first","eq","last"].forEach(function(t){f[t].isArrayFilter=!0}),f.nth=f.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f[i]=d(i);for(i in{submit:!0,reset:!0})f[i]=p(i);function m(t,n,i){for(var r=[],s=i&&e.isString(i);(t=t.parentElement)&&9!==t.nodeType;){if(i)if(s){if(_(t,i))break}else if(e.isArrayLike(i)){if(e.inArray(t,i)>-1)break}else if(t==i)break;n&&!_(t,n)||r.push(t)}return r}function y(t,e){for(var n=t.childNodes,i=[],r=0;r<n.length;r++){var t=n[r];1==t.nodeType&&i.push(t)}return e&&(i=o.filter(i,e)),i}function g(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentElement===n&&_(t,e):_(t,e))||i&&t===n)return t;if(t===n)break}while(t=S(t))}return null}function v(t,e){try{return l.call(t.querySelectorAll(e))}catch(t){}return o.query(t,e)}function x(t,e){try{return t.querySelector(e)}catch(t){}var n=o.query(t,e);return n.length>0?n[0]:null}function k(t,e){return e||(e=t,t=document.body),_(t,e)?t:x(t,e)}function w(t,e,n){for(var i=t.childNodes,r=i[0];r;){if(1==r.nodeType){if(!e||_(r,e))return r;if(n)break}r=r.nextSibling}return null}function b(t,e,n){for(var i=t.childNodes,r=i[i.length-1];r;){if(1==r.nodeType){if(!e||_(r,e))return r;if(n)break}r=r.previousSibling}return null}function _(t,n){if(!n||!t||1!==t.nodeType)return!1;if(e.isString(n)){try{return u.call(t,n.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(t){}return o.match(t,n)}return e.isArrayLike(n)?e.inArray(t,n)>-1:e.isPlainObject(n)?o.check(t,n):t===n}function C(t,e,n){for(var i=t.nextSibling;i;){if(1==i.nodeType){if(!e||_(i,e))return i;if(n)break}i=i.nextSibling}return null}function M(t,e){for(var n=t.nextSibling,i=[];n;)1==n.nodeType&&(e&&!_(n,e)||i.push(n)),n=n.nextSibling;return i}function S(t,e){var n=t.host&&t!==document&&t.host.nodeType?t.host:t.parentElement;return!n||e&&!_(n,e)?null:n}function E(t,e,n){for(var i=t.previousSibling;i;){if(1==i.nodeType){if(!e||_(i,e))return i;if(n)break}i=i.previousSibling}return null}function P(t,e){for(var n=t.previousSibling,i=[];n;)1==n.nodeType&&(e&&!_(n,e)||i.push(n)),n=n.previousSibling;return i}function z(t,e){for(var n=t.parentElement.firstChild,i=[];n;)1==n.nodeType&&n!==t&&(e&&!_(n,e)||i.push(n)),n=n.nextSibling;return i}o.divide=function(t){var e,n,i,r,s,o="",a=[];if((n=t.id)&&(o+="#"+n),i=t.classes)for(var l=i.length;l--;)o+="."+i[l].value;if(r=t.attributes)for(var l=0;l<r.length;l++)r[l].operator?o+="["+r[l].key+r[l].operator+JSON.stringify(r[l].value)+"]":o+="["+r[l].key+"]";if(s=t.pseudos)for(l=s.length;l--;)part=s[l],this.pseudos[part.key]?a.push(part):void 0!==part.value&&(o+=":"+part.key+"("+JSON.stringify(part));return(e=t.tag)&&"*"!==e&&(o=e.toUpperCase()+o),o||(o="*"),{nativeSelector:o,customPseudos:a}},o.check=function(t,e,n,i,r){var s,o,a,l,h,c,f,d,p;if(!r){if(s=e.tag){var m=t.nodeName.toUpperCase();if("*"==s){if(m<"@")return!1}else if(m!=(s||"").toUpperCase())return!1}if((o=e.id)&&t.getAttribute("id")!=o)return!1;if(a=e.classes)for(c=a.length;c--;)if(!(d=t.getAttribute("class"))||!a[c].regexp.test(d))return!1;if(l=e.attributes)for(c=l.length;c--;)if((f=l[c]).operator?!f.test(t.getAttribute(f.key)):!t.hasAttribute(f.key))return!1}if(h=e.pseudos)for(c=h.length;c--;)if(f=h[c],p=this.pseudos[f.key]){if((r&&p.isArrayFilter||!r&&!p.isArrayFilter)&&!p(t,n,i,f.value))return!1}else if(!r&&!u.call(t,f.key))return!1;return!0},o.match=function(t,n){var i;if(!(i=e.isString(n)?o.Slick.parse(n):n))return!0;var r,s,a=i.expressions,l=0;for(r=0;s=a[r];r++)if(1==s.length){var u=s[0];if(this.check(t,u))return!0;l++}if(l==i.length)return!1;var h,c=this.query(document,i);for(r=0;h=c[r++];)if(h===t)return!0;return!1},o.filterSingle=function(t,e){var n=a.call(t,function(n,i){return o.check(n,e,i,t,!1)});return n=a.call(n,function(t,i){return o.check(t,e,i,n,!0)})},o.filter=function(t,n){if(!e.isString(n))return o.filterSingle(t,n);var i,r,s=o.Slick.parse(n).expressions,a=[];for(i=0;r=s[i];i++){if(1!=r.length)throw new Error("not supported selector:"+n);var l=r[0],u=o.filterSingle(t,l);a=e.uniq(a.concat(u))}return a},o.combine=function(t,e){var n,i=e.combinator,r=e,s=[];switch(i){case">":s=y(t,r);break;case"+":(n=C(t,r,!0))&&s.push(n);break;case"^":(n=w(t,r,!0))&&s.push(n);break;case"~":s=M(t,r);break;case"++":var u=E(t,r,!0),h=C(t,r,!0);u&&s.push(u),h&&s.push(h);break;case"~~":s=z(t,r);break;case"!":s=m(t,r);break;case"!>":(n=S(t,r))&&s.push(n);break;case"!+":s=E(t,r,!0);break;case"!^":(n=b(t,r,!0))&&s.push(n);break;case"!~":s=P(t,r);break;default:var c=this.divide(e);if(s=l.call(t.querySelectorAll(c.nativeSelector)),c.customPseudos)for(var f=c.customPseudos.length-1;f>=0;f--)s=a.call(s,function(t,e){return o.check(t,{pseudos:[c.customPseudos[f]]},e,s,!1)}),s=a.call(s,function(t,e){return o.check(t,{pseudos:[c.customPseudos[f]]},e,s,!0)})}return s},o.query=function(t,n,i){for(var r,s,a=this.Slick.parse(n),l=[],u=a.expressions,h=0;r=u[h];h++){for(var c,f=[t],d=0;s=r[d];d++)(c=e.map(f,function(t,e){return o.combine(t,s)}))&&(f=c);c&&(l=l.concat(c))}return l};var T=function(){return T};return e.mixin(T,{ancestor:function(t,n,i){var r=i&&e.isString(i);for(;t=t.parentElement;){if(_(t,n))return t;if(i)if(r){if(_(t,i))break}else if(t==i)break}return null},ancestors:m,byId:function(t,e){return(e=e||r.doc()).getElementById(t)},childAt:function(t,n,i){var r=0,o=t.children;i=e.mixin({ignoreHidden:!0,excluding:null,closesting:null},i);for(var a=0;a<o.length;a++){var l=o[a];if((!i.ignoreHidden||"none"!==s.css(l))&&((!i.excluding||!i.excluding.includes(l))&&(!i.closesting||g(l,i.closesting,t,!1)))){if(r===n)return l;r++}}return null},children:y,closest:g,descendant:x,descendants:v,find:k,findAll:function(t,e){e||(e=t,t=document.body);return v(t,e)},firstChild:w,index:function(t,n){var i=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)e.isString(n)?_(t,n)&&i++:e.isFunction(n)&&n(t)&&i++,i++;return i},lastChild:b,matches:_,nextSibling:C,nextSiblings:M,parent:S,previousSibling:E,previousSiblings:P,pseudos:o.pseudos,siblings:z}),t.attach("domx.finder",T)}),t("skylark-domx-finder/main",["./finder"],function(t){return t}),t("skylark-domx-finder",["skylark-domx-finder/main"],function(t){return t}),t("skylark-domx-data/data",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-finder","skylark-domx-noder"],function(t,e,n,i){var r=Array.prototype.map,s=(Array.prototype.filter,e.camelCase),o=e.deserializeValue,a=/([A-Z])/g,l={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};var u={option:{get:function(t){var e=t.getAttribute("value");return null!=e?e:(m(t).match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}},select:{get:function(t){var e,n,r,s=t.options,o=t.selectedIndex,a="select-one"===t.type,l=a?null:[],u=a?o+1:s.length;for(r=o<0?u:a?o:0;r<u;r++)if((n=s[r]).selected&&!n.disabled&&(!n.parentNode.disabled||!i.nodeName(n.parentNode,"optgroup"))){if(e=y(n),a)return e;l.push(e)}return l},set:function(t,n){for(var i,r,s=t.options,o=e.makeArray(n),a=s.length;a--;)((r=s[a]).selected=e.inArray(u.option.get(r),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}};function h(t,e,n){if(void 0===n){if("object"==typeof e){for(var i in e)h(t,i,e[i]);return this}return t.getAttribute?t.getAttribute(e):t[e]}return t.setAttribute?t.setAttribute(e,n):t[e]=n,this}function c(t,n){var i=t._$_store;return!i&&n&&(i=t._$_store=function(t){var n={};return e.each(t.attributes||[],function(t,e){0==e.name.indexOf("data-")&&(n[s(e.name.replace("data-",""))]=o(e.value))}),n}(t)),i}function f(t,e,n){var i=c(t,!0);i[s(e)]=n}function d(t,n,i){if(void 0===i){if("object"==typeof n){for(var r in n)f(t,r,n[r]);return this}return function(t,n){if(void 0===n)return c(t,!0);var i=c(t);if(i){if(n in i)return i[n];var r=s(n);if(r in i)return i[r]}var o="data-"+n.replace(a,"-$1").toLowerCase(),l=h(t,o);return e.isString(l)||(l=void 0),l}(t,n)}return f(t,n,i),this}function p(t){t._$_store&&delete t._$_store}function m(t,e){return void 0===e?t.textContent:(t.textContent=null==e?"":""+e,this)}function y(t,n){var i=u[t.type]||u[t.nodeName.toLowerCase()];if(void 0===n)return i&&"get"in i&&void 0!==(ret=i.get(t,"value"))?ret:(ret=t.value,"string"==typeof ret?ret.replace(/\r/g,""):null==ret?"":ret);null==n?n="":"number"==typeof n?n+="":e.isArray(n)&&(n=e.map(n,function(t){return null==t?"":t+""})),i&&"set"in i&&void 0!==i.set(t,n,"value")||(t.value=n)}function g(){return g}return e.each(["radio","checkbox"],function(){u[this]={set:function(t,n){if(e.isArray(n))return t.checked=e.inArray(y(t),n)>-1}}}),n.pseudos.data=function(t,e,n,i){return!!d(t,i||n[3])},e.mixin(g,{aria:function(t,e,n){return this.attr(t,"aria-"+e,n)},attr:h,cleanData:p,data:d,pluck:function(t,e){return r.call(t,function(t){return t[e]})},prop:function(t,e,n){return e=l[e]||e,void 0===n?t[e]:(t[e]=n,this)},removeAttr:function(t,e){return e.split(" ").forEach(function(e){!function(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}(t,e)}),this},removeData:function(t,n){if(n){e.isString(n)&&(n=n.split(/\s+/));var i=c(t,!0);n.forEach(function(t){delete i[t]})}else p(t);return this},removeProp:function(t,e){return e.split(" ").forEach(function(e){delete t[e]}),this},text:m,val:y,valHooks:u}),t.attach("domx.data",g)}),t("skylark-domx-query/query",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder"],function(t,e,n,i){var r,s=Array.prototype.some,o=Array.prototype.push,a=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),l=(Array.prototype.map,Array.prototype.filter),u=Array.prototype.forEach,h=Array.prototype.indexOf,c=Array.prototype.sort,f=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=e.funcArg,p=e.isArrayLike,m=e.isString,y=e.uniq,g=e.isFunction,v=e.type,x=(e.isArray,e.isWindow,e.isDocument,e.isObject);e.isPlainObject,e.compact,e.flatten,e.camelCase,e.dasherize,i.children;function k(t,i,r){return function(r){var s,o=e.map(arguments,function(t){return"function"==(s=v(t))||"object"==s||"array"==s||null==t?t:n.createFragment(t)});return o.length<1?this:(this.each(function(e){t.apply(i,[this,o,e>0])}),this)}}function w(t,n){return function(){var i=a.call(arguments),r=e.map(this,function(e,r){return t.apply(n,[e].concat(i))});return P(y(r))}}function b(t,e,n){return function(i){a.call(arguments);var r=this.map(function(r,s){return s.querySelector?t.apply(e,n?[s]:[s,i]):[]});return n&&i?r.filter(i):r}}function _(t,e,n){return function(i,r){a.call(arguments);var s=this.map(function(s,o){return t.apply(e,n?[o,i]:[o,r,i])});return n&&r?s.filter(r):s}}function C(t,e){return function(){var n=a.call(arguments);return this.each(function(i,r){t.apply(e,[this].concat(n))}),this}}function M(t,n,i){return function(r){return e.isDefined(r)?(u.call(this,function(e,s){var o;o=i?d(e,r,s,i(e)):r,t.apply(n,[e,o])}),this):this[0]?t.apply(n,[this[0]]):void 0}}var S,E=e.klass({klassName:"SkNodeList",init:function(t,r){var s,a,l,u;if(t&&(this.context=r=r||n.doc(),m(t)?(this.selector=t,(s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:f.exec(t))?s[1]?(a=n.createFragment(t),e.isPlainObject(r)&&(u=r)):(l=i.byId(s[2],n.ownerDoc(r)))&&(a=[l]):(e.isString(r)&&(r=i.find(r)),a=i.descendants(r,t))):a=!n.isWindow(t)&&p(t)?t:[t]),a&&(o.apply(this,a),u))for(var h in u)e.isFunction(this[h])?this[h](u[h]):this.attr(h,u[h]);return this}}),P=function(){r=function(t){return t instanceof E},init=function(t,e){return new E(t,e)};var t=function(e,n){return g(e)?(t.ready(function(){e(t)}),f):r(e)?e:n&&r(n)&&m(e)?n.find(e):init(e,n)},f=t(document);t.fn=E.prototype,e.mixin(t.fn,{length:0,map:function(n){return t(y(e.map(this,function(t,e){return n.call(t,e,t)})))},slice:function(){return t(a.apply(this,arguments))},forEach:function(){return u.apply(this,arguments)},get:function(t){return void 0===t?a.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return h.apply(this,arguments)},sort:function(){return c.apply(this,arguments)},toArray:function(){return a.call(this)},size:function(){return this.length},remove:function(t){return t?this.find(t).remove():(this.each(function(t,e){n.remove(e)}),this)},each:function(t){return e.each(this,t),this},filter:function(e){return g(e)?this.not(this.not(e)):t(l.call(this,function(t){return i.matches(t,e)}))},add:function(e,n){return t(y(this.toArray().concat(t(e,n).toArray())))},is:function(t){if(this.length>0){if(e.isString(t))return s.call(this,function(e){return i.matches(e,t)});if(e.isArrayLike(t))return s.call(this,function(n){return e.inArray(n,t)>-1});if(e.isHtmlNode(t))return s.call(this,function(e){return e==t})}return!1},not:function(e){var n=[];if(g(e)&&void 0!==e.call)this.each(function(t,i){e.call(this,t,i)||n.push(this)});else{var i="string"==typeof e?this.filter(e):p(e)&&g(e.item)?a.call(e):t(e);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return t(n)},has:function(e){return this.filter(function(){return x(e)?n.contains(this,e):t(this).find(e).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:b(i.descendants,i),closest:b(i.closest,i),parents:b(i.ancestors,i),parentsUntil:_(i.ancestors,i),parent:b(i.parent,i),children:b(i.children,i),contents:w(n.contents,n),empty:C(n.empty,n),html:M(n.html,n),pluck:function(t){return e.map(this,function(e){return e[t]})},pushStack:function(e){var n=t(e);return n.prevObject=this,n},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var n="function"==typeof e;return this.each(function(i){t(this).wrapAll(n?e.call(this,i):e)})},wrapAll:function(e){var n;return this[0]&&("function"==typeof e&&(e=e.call(this[0])),n=t(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(e){return"function"==typeof e?this.each(function(n){t(this).wrapInner(e.call(this,n))}):this.each(function(){var n=t(this),i=n.contents();i.length?i.wrapAll(e):n.append(e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){t(this).replaceWith(this.childNodes)}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},toggle:function(e){return this.each(function(){var n=t(this);(void 0===e?"none"==n.css("display"):e)?n.show():n.hide()})},prev:function(e){return t(this.pluck("previousElementSibling")).filter(e||"*")},prevAll:b(i.previousSiblings,i),next:function(e){return t(this.pluck("nextElementSibling")).filter(e||"*")},nextAll:b(i.nextSiblings,i),siblings:b(i.siblings,i),index:function(e){return e?this.indexOf(t(e)[0]):this.parent().children().indexOf(this[0])}}),t.fn.detach=t.fn.remove,t.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)};n.traverse;return t.fn.after=k(n.after,n),t.fn.prepend=k(n.prepend,n),t.fn.before=k(n.before,n),t.fn.append=k(n.append,n),e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){t.fn[e]=function(e){for(var i,r=[],s=t(e),a=s.length-1,l=0;l<=a;l++)i=l===a?this:this.clone(!0),t(s[l])[n](i),o.apply(r,i.get());return this.pushStack(r)}}),t}();return(S=P).fn.scrollParent=function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=S(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:S(this[0].ownerDocument||document)},function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll".split(",").forEach(function(e){var n=t.fn[e];t.fn[e]=function(){var t=n.apply(this,arguments);return t.prevObject=this,t}})}(P),function(t){var s;t.fn.query=t.fn.find,t.fn.place=function(t,s){return e.isString(t)?t=i.descendant(t):r(t)&&(t=t[0]),this.each(function(e,i){switch(s){case"before":n.before(t,i);break;case"after":n.after(t,i);break;case"replace":n.replace(t,i);break;case"only":n.empty(t),n.append(t,i);break;case"first":n.prepend(t,i);break;default:n.append(t,i)}})},t.fn.addContent=function(t,n){return t.template&&(t=e.substitute(t.template,t)),this.append(t)},t.fn.disableSelection=(s="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(s+".ui-disableSelection",function(t){t.preventDefault()})}),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")},t.fn.reflow=function(){return n.flow(this[0])},t.fn.isBlockNode=function(){return n.isBlockNode(this[0])}}(P),P.fn.plugin=function(t,e){var n=a.call(arguments,1),i=this,r=this;return this.each(function(){r=plugins.instantiate.apply(i,[this,t].concat(n))}),r},P.wraps={wrapper_node_operation:k,wrapper_map:w,wrapper_value:M,wrapper_selector:b,wrapper_some_chk:function(t,e){return function(){var n=a.call(arguments);return s.call(this,function(i){return t.apply(e,[i].concat(n))})}},wrapper_selector_until:_,wrapper_every_act_firstArgFunc:function(t,e,n){return function(i){var r=a.call(arguments);return u.call(this,function(s,o){var a=d(s,i,o,n(s));t.apply(e,[s,a].concat(r.slice(1)))}),this}},wrapper_every_act:C,wrapper_name_value:function(t,n,i){return function(r,s){return e.isPlainObject(r)||e.isDefined(s)?(u.call(this,function(e,o){var a;a=i?d(e,s,o,i(e,r)):s,t.apply(n,[e,r,a])}),this):this[0]?t.apply(n,[this[0],r]):void 0}}},t.attach("domx.query",P)}),t("skylark-domx-query/main",["./query","skylark-domx-styler"],function(t,e){return t.fn.style=t.wraps.wrapper_name_value(e.css,e),t.fn.css=t.wraps.wrapper_name_value(e.css,e),t.fn.hasClass=t.wraps.wrapper_some_chk(e.hasClass,e),t.fn.addClass=t.wraps.wrapper_every_act_firstArgFunc(e.addClass,e,e.className),t.fn.removeClass=t.wraps.wrapper_every_act_firstArgFunc(e.removeClass,e,e.className),t.fn.toggleClass=t.wraps.wrapper_every_act_firstArgFunc(e.toggleClass,e,e.className),t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t}),t("skylark-domx-query",["skylark-domx-query/main"],function(t){return t}),t("skylark-domx-velm/velm",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder","skylark-domx-query"],function(t,e,n,i,r){var s=Array.prototype.map,o=Array.prototype.slice,a=e.klass({klassName:"VisualElement",_construct:function(t){e.isString(t)&&(t="<"===t.charAt(0)?n.createFragment(t)[0]:document.getElementById(t)),this._elm=t}});a.prototype.$=a.prototype.query=function(t){return r(t,this._elm)},a.prototype.elm=function(){return this._elm};var l=new a(document.body),u=function(t){return t?new a(t):l};return e.mixin(u,{batch:function(t,e,n){return t.forEach(function(t){var i=t instanceof a?t:u(t);i[e].apply(i,n)}),this},root:new a(document.body),VisualElement:a,partial:function(t,e){var n={};n[t]=e,a.partial(n)},delegate:function(t,n){var i={};t.forEach(function(t){i[t]=function(t,n){return function(){var i=this._elm,r=t.apply(n,[i].concat(o.call(arguments)));if(r){if(r===n)return this;r instanceof HTMLElement?r=new a(r):e.isArrayLike(r)&&(r=s.call(r,function(t){return t instanceof HTMLElement?new a(t):t}))}return r}}(n[t],n)}),a.partial(i)}}),u.delegate(["ancestor","ancestors","children","descendant","find","findAll","firstChild","lastChild","matches","nextSibling","nextSiblings","parent","previousSibling","previousSiblings","siblings"],i),u.find=function(t){return"body"===t?this.root:this.root.descendant(t)},u.delegate(["after","append","before","clone","contains","contents","empty","html","isChildOf","isDocument","isInDocument","isWindow","ownerDoc","prepend","remove","removeChild","replace","reverse","throb","traverse","wrapper","wrapperInner","unwrap"],n),t.attach("domx.velm",u)}),t("skylark-domx-velm/main",["./velm","skylark-domx-styler"],function(t,e){t.delegate(["addClass","className","css","hasClass","hide","isInvisible","removeClass","show","toggleClass"],e);return["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach(function(e){var n=e;t.VisualElement.prototype[n]=function(t){return this.css(e,t),this}}),t}),t("skylark-domx-velm",["skylark-domx-velm/main"],function(t){return t}),t("skylark-domx-data/main",["./data","skylark-domx-velm","skylark-domx-query"],function(t,e,n){return e.delegate(["attr","data","prop","removeAttr","removeData","text","val"],t),n.fn.text=n.wraps.wrapper_value(t.text,t,t.text),n.fn.attr=n.wraps.wrapper_name_value(t.attr,t,t.attr),n.fn.removeAttr=n.wraps.wrapper_every_act(t.removeAttr,t),n.fn.prop=n.wraps.wrapper_name_value(t.prop,t,t.prop),n.fn.removeProp=n.wraps.wrapper_every_act(t.removeProp,t),n.fn.data=n.wraps.wrapper_name_value(t.data,t),n.fn.removeData=n.wraps.wrapper_every_act(t.removeData),n.fn.val=n.wraps.wrapper_value(t.val,t,t.val),t}),t("skylark-domx-data",["skylark-domx-data/main"],function(t){return t}),t("skylark-domx-eventer/eventer",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-finder","skylark-domx-noder","skylark-domx-data"],function(t,e,n,i,r,s){e.mixin;var o=e.each,a=(Array.prototype.slice,e.uid),l=/^([A-Z]|returnValue$|layer[XY]$)/,u={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},h=/complete|loaded|interactive/;function c(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(u,function(i,r){var s=n[i];t[i]=function(){return this[r]=e.returnTrue,s&&s.apply(n,arguments)},t[r]=e.returnFalse})),t}function f(t){var e=(""+t).split(".");return{type:e[0],ns:e.slice(1).sort().join(" ")}}function d(t){return t&&(e.isFunction(t)||e.isFunction(t.handleEvent))}var p=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent],m={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,textInput:12,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15},y=function(){return function(t,n){e.isString(t)?n=n||{}:t=(n=t||{}).type||"";var i=f(t);t=i.type,n=e.mixin({bubbles:!0,cancelable:!0},n),i.ns&&(n.namespace=i.ns);var r=function(t){var e=m[t];e||(e=0);return p[e]}(t),s=new r(t,n);return e.safeMixin(s,n),c(s)}}();function g(t,n){var i,r={originalEvent:t};for(i in t)"keyIdentifier"===i||l.test(i)||void 0===t[i]||(r[i]=t[i]);return n&&e.mixin(r,n),c(r,t)}var v={},x="onfocusin"in window,k={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"},b=function(t){return w[t]||x&&k[t]||t},_={},C=e.klass({init:function(t,e){this._target=t,this._event=e,this._bindings=[]},add:function(t,n){var s=this._bindings,o={fn:t,options:e.mixin({},n)};s.push(o);var a=this;if(!a._listener){a._listener=function(t){var n=this,s=g(t),o=t._args,l=a._bindings,u=s.namespace;o=e.isDefined(o)?[s].concat(o):[s],s.type=a._event,e.each(l,function(t,l){var h=n;if(s.isImmediatePropagationStopped&&s.isImmediatePropagationStopped())return!1;var c=l.fn,f=l.options||{},d=f.selector,p=f.one,m=f.data;if(!u||u==f.ns||-1!==f.ns.indexOf(u)){if(d){if(!(h=i.closest(s.target,d))||h===n)return;e.mixin(s,{currentTarget:h,liveFired:n})}var y=a._event;if(y in w){var g=s.relatedTarget;if(g&&(g===h||r.contains(h,g)))return}e.isDefined(m)&&(s.data=m),p&&a.remove(c,f),!1===(c.handleEvent?c.handleEvent.apply(c,o):c.apply(h,o))&&(s.preventDefault(),s.stopPropagation())}})};var l=a._event;a._target.addEventListener?a._target.addEventListener(b(l),a._listener,!1):console.warn("invalid eventer object",a._target)}},remove:function(t,n){var i,r;(n=e.mixin({},n)).ns&&(r=n.ns,i=new RegExp("(?:^| )"+r.replace(" "," .* ?")+"(?: |$)")),this._bindings=this._bindings.filter(function(e){var r=(!t||t===e.fn)&&(!i||i.test(e.options.ns))&&(!n.selector||n.selector==e.options.selector);return!r}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(b(this._event),this._listener,!1),this._listener=null)}}),M=e.klass({init:function(t){this._target=t,this._handler={}},register:function(t,n,i){var r=f(t),t=r.type,s=v[t],o=s&&(s.bindType||s.bindEventName),a=this._handler;void 0===a[t]&&(a[t]=new C(this._target,o||t)),a[t].add(n,e.mixin({ns:r.ns},i))},unregister:function(t,n,i){var r=this._handler,s=f(t);if(t=s.type){var o=r[t];o&&o.remove(n,e.mixin({ns:s.ns},i))}else for(t in r){var o=r[t];o.remove(n,e.mixin({ns:s.ns},i))}}}),S=function(t){var e=a(t),n=_[e];return n||(n=_[e]=new M(t)),n};function E(t,n,i,r,s,o){if(e.isPlainObject(n))return e.each(n,function(e,n){E(t,e,i,r,n,o)}),this;e.isString(i)||d(s)||(s=r,r=i,i=void 0),d(r)&&(s=r,r=void 0),!1===s&&(s=e.returnFalse),"string"==typeof n&&(n=n.indexOf(",")>-1?n.split(","):n.split(/\s/));var a=S(t);return n.forEach(function(t){if("ready"==t)return P(s);a.register(t,s,{data:r,selector:i,one:!!o})}),this}function P(t){return h.test(document.readyState)&&document.body?e.defer(t):document.addEventListener("DOMContentLoaded",t,!1),this}var z={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38};function T(){return T}return n.support.transition&&(v.transitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end}),e.mixin(T,{NativeEvents:m,create:y,keys:z,off:function t(n,i,r,s){if(e.isPlainObject(i))return e.each(i,function(e,i){t(n,e,r,i)}),this;e.isString(r)||d(s)||!1===s||(s=r,r=void 0);!1===s&&(s=e.returnFalse);"string"==typeof i&&(i=i.indexOf(",")>-1?i.split(","):i.split(/\s/));var o=S(n);i&&i.forEach(function(t){o.unregister(t,s,{selector:r})});return this},on:E,one:function(t,e,n,i,r){return E(t,e,n,i,r,1),this},proxy:g,ready:P,shortcuts:function(t){var e=s.data(t,"shortcuts");if(!e){e={},s.data(t,"shortcuts",e);var n=function(t,e){var n=e.metaKey||e.ctrlKey;if(t.ctrl==n&&t.alt==e.altKey&&t.shift==e.shiftKey&&(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode))return e.preventDefault(),"keydown"==e.type&&t.fn(e),!0};E(t,"keyup keypress keydown",function(t){if(!/INPUT|TEXTAREA/.test(t.target.nodeName))for(var i in e)n(e[i],t)})}return{add:function(t,n){(t.indexOf(",")>-1?t.toLowerCase().split(","):t.toLowerCase().split(" ")).forEach(function(t){var i={fn:n,alt:!1,ctrl:!1,shift:!1};t.split("+").forEach(function(t){switch(t){case"alt":case"ctrl":case"shift":i[t]=!0;break;default:i.charCode=t.charCodeAt(0),i.keyCode=z[t]||t.toUpperCase().charCodeAt(0)}});var r=(i.ctrl?"ctrl":"")+","+(i.alt?"alt":"")+","+(i.shift?"shift":"")+","+i.keyCode;e[r]=i})}}},special:v,stop:function(t){window.document.all&&(t.keyCode=0);t.preventDefault&&(t.preventDefault(),t.stopPropagation());return this},trigger:function(t,e,n){var i;i=e instanceof Event?e:y(e,n);i._args=n;var r=t.dispatchEvent||t.trigger;r?r.call(t,i):console.warn("The evented parameter is not a eventable object");return this}}),o(m,function(t){T[t]=function(e,n,i,r){return arguments.length>1?this.on(e,t,n,i,r):("focus"==t?e.focus&&e.focus():"blur"==t?e.blur&&e.blur():"click"==t?e.click&&e.click():this.trigger(e,t),this)}}),t.attach("domx.eventer",T)}),t("skylark-domx-eventer/main",["skylark-langx/langx","./eventer","skylark-domx-velm","skylark-domx-query"],function(t,e,n,i){var r=["off","on","one","trigger"];return t.each(e.NativeEvents,function(t){r.push(t)}),n.delegate(r,e),t.each(r,function(t,n){i.fn[n]=i.wraps.wrapper_every_act(e[n],e)}),i.ready=e.ready,e}),t("skylark-domx-eventer",["skylark-domx-eventer/main"],function(t){return t}),t("skylark-domx-geom/geom",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-styler"],function(t,e,n,i){var r,s=/^(?:body|html)$/i,o=e.toPixel,a=n.offsetParent;function l(){if(void 0!==r)return r;var t,e,s=n.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],o=s.childNodes[0];return n.append(document.body,s),t=o.offsetWidth,i.css(s,"overflow","scroll"),e=o.offsetWidth,t===e&&(e=s[0].clientWidth),n.remove(s),r=t-e}function u(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.borderLeftWidth,t),top:o(e.borderTopWidth,t),right:o(e.borderRightWidth,t),bottom:o(e.borderBottomWidth,t)}}function h(t,e){if(void 0===e)return s.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect();var n=a(t),i=h(n),r=p(t),o=u(n);return v(t,{top:e.top-i.top-r.top-o.top,left:e.left-i.left-r.left-o.left}),this}function c(t,e){return void 0!==e?(h(t,e),b(t,e),this):t==window||t==document.documentElement||t==document.body?{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth,height:window.innerHeight,width:window.innerWidth}:t.getBoundingClientRect?t.getBoundingClientRect():void 0}function f(t,e){if(void 0==e)return{width:t.clientWidth,height:t.clientHeight};var n="border-box"===i.css(t,"box-sizing"),r={width:e.width,height:e.height};if(n){var s=u(t);void 0!==r.width&&(r.width=r.width+s.left+s.right),void 0!==r.height&&(r.height=r.height+s.top+s.bottom)}else{var o=y(t);void 0!==r.width&&(r.width=r.width-o.left-o.right),void 0!==r.height&&(r.height=r.height-o.top-o.bottom)}return i.css(t,r),this}function d(t){var e=t.documentElement,n=t.body,i=Math.max,r=i(e.scrollWidth,n.scrollWidth),s=i(e.clientWidth,n.clientWidth),o=i(e.offsetWidth,n.offsetWidth),a=i(e.scrollHeight,n.scrollHeight),l=i(e.clientHeight,n.clientHeight),u=i(e.offsetHeight,n.offsetHeight);return{width:r<o?s:r,height:a<u?l:a}}function p(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.marginLeft),top:o(e.marginTop),right:o(e.marginRight),bottom:o(e.marginBottom)}}function m(t){var e=b(t),n=p(t);return{width:e.width+n.left+n.right,height:e.height+n.top+n.bottom}}function y(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.paddingLeft),top:o(e.paddingTop),right:o(e.paddingRight),bottom:o(e.paddingBottom)}}function g(t,e){if(void 0===e){var n=t.getBoundingClientRect(),i=t.ownerDocument.defaultView;return{left:n.left+i.pageXOffset,top:n.top+i.pageYOffset}}var r=a(t),s=g(r),o=p(t),l=u(r);return v(t,{top:e.top-s.top-o.top-l.top,left:e.left-s.left-o.left-l.left}),this}function v(t,e){if(void 0==e){var n=a(t),r=h(t),s=h(n),o=p(t),l=u(n);return{top:r.top-s.top-l.top-o.top,left:r.left-s.left-l.left-o.left}}var c={top:e.top,left:e.left};return"static"==i.css(t,"position")&&(c.position="relative"),i.css(t,c),this}function x(t,e){if(void 0===e){var n=a(t),i=c(t),r=h(n),s=(p(t),u(n));return{top:i.top-r.top-s.top,left:i.left-r.left-s.left,width:i.width,height:i.height}}return v(t,e),b(t,e),this}function k(t,e){9===t.nodeType&&(t=t.defaultView);var n="scrollLeft"in t;return void 0===e?n?t.scrollLeft:t.pageXOffset:(n?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function w(t,e){9===t.nodeType&&(t=t.defaultView);var n="scrollTop"in t;return void 0===e?n?t.scrollTop:t.pageYOffset:(n?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function b(t,n){if(void 0==n)return e.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:e.isDocument(t)?d(document):{width:t.offsetWidth,height:t.offsetHeight};var r="border-box"===i.css(t,"box-sizing"),s={width:n.width,height:n.height};if(!r){var o=y(t),a=u(t);void 0!==s.width&&""!==s.width&&null!==s.width&&(s.width=s.width-o.left-o.right-a.left-a.right),void 0!==s.height&&""!==s.height&&null!==s.height&&(s.height=s.height-o.top-o.bottom-a.top-a.bottom)}return i.css(t,s),this}function _(){return _}return e.mixin(_,{borderExtents:u,boundingPosition:h,boundingRect:c,clientHeight:function(t,e){return void 0==e?f(t).height:f(t,{height:e})},clientSize:f,clientWidth:function(t,e){return void 0==e?f(t).width:(f(t,{width:e}),this)},contentRect:function(t){var e=f(t),n=y(t);return{left:n.left,top:n.top,width:e.width-n.left-n.right,height:e.height-n.top-n.bottom}},getDocumentSize:d,height:function(t,e){return void 0==e?b(t).height:(b(t,{height:e}),this)},marginExtents:p,marginRect:function(t){var e=x(t),n=p(t);return{left:e.left,top:e.top,width:e.width+n.left+n.right,height:e.height+n.top+n.bottom}},marginSize:m,offsetParent:a,paddingExtents:y,pagePosition:g,pageRect:function(t,e){if(void 0===e){var n=t.getBoundingClientRect(),i=t.ownerDocument.defaultView;return{left:n.left+i.pageXOffset,top:n.top+i.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}}return g(t,e),b(t,e),this},relativePosition:v,relativeRect:x,scrollbarWidth:l,scrollIntoView:function(t,e){var n,i,r,s,o,a,l=t.parentNode,u=function(t,e){var n,i,r=t;n=i=0;for(;r&&r!=e&&r.nodeType;)n+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:i}}(t,l);n=u.x,i=u.y,r=t.offsetWidth,s=t.offsetHeight,o=l.clientWidth,a=l.clientHeight,"end"==e?(n-=o-r,i-=a-s):"center"==e&&(n-=o/2-r/2,i-=a/2-s/2);return l.scrollLeft=n,l.scrollTop=i,this},scrollLeft:k,scrollTop:w,scrollBy:function(t,e,n){t.scrollLeft+=e,t.scrollTop+=n},size:b,testAxis:function(t){var e=t.offsetTop,n=t.offsetLeft,i=t.offsetWidth,r=t.offsetHeight;for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;var s={x:0,y:0};e<window.pageYOffset?s.y=e-window.pageYOffset:e+r>window.pageYOffset+window.innerHeight&&(s.y=e+r-(window.pageYOffset+window.innerHeight));n<window.pageXOffset?s.x=n-window.pageXOffset:n+i>window.pageXOffset+window.innerWidth&&(s.x=n+i-(window.pageXOffset+window.innerWidth));return s},width:function(t,e){return void 0==e?b(t).width:(b(t,{width:e}),this)}}),function(){var t=Math.max,r=Math.abs,s=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,h=/%$/;function c(t,e,n){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?n/100:1)]}function f(t,e){return parseInt(i.css(t,e),10)||0}var d={fit:{left:function(e,n){var i,r=n.within,s=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,a=e.left-n.collisionPosition.marginLeft,l=s-a,u=a+n.collisionWidth-o-s;n.collisionWidth>o?l>0&&u<=0?(i=e.left+l+n.collisionWidth-o-s,e.left+=l-i):e.left=u>0&&l<=0?s:l>u?s+o-n.collisionWidth:s:l>0?e.left+=l:u>0?e.left-=u:e.left=t(e.left-a,e.left)},top:function(e,n){var i,r=n.within,s=r.isWindow?r.scrollTop:r.offset.top,o=n.within.height,a=e.top-n.collisionPosition.marginTop,l=s-a,u=a+n.collisionHeight-o-s;n.collisionHeight>o?l>0&&u<=0?(i=e.top+l+n.collisionHeight-o-s,e.top+=l-i):e.top=u>0&&l<=0?s:l>u?s+o-n.collisionHeight:s:l>0?e.top+=l:u>0?e.top-=u:e.top=t(e.top-a,e.top)}},flip:{left:function(t,e){var n,i,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,u=t.left-e.collisionPosition.marginLeft,h=u-l,c=u+e.collisionWidth-a-l,f="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];h<0?((n=t.left+f+d+p+e.collisionWidth-a-o)<0||n<r(h))&&(t.left+=f+d+p):c>0&&((i=t.left-e.collisionPosition.marginLeft+f+d+p-l)>0||r(i)<c)&&(t.left+=f+d+p)},top:function(t,e){var n,i,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,u=t.top-e.collisionPosition.marginTop,h=u-l,c=u+e.collisionHeight-a-l,f="top"===e.my[1],d=f?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];h<0?((i=t.top+d+p+m+e.collisionHeight-a-o)<0||i<r(h))&&(t.top+=d+p+m):c>0&&((n=t.top-e.collisionPosition.marginTop+d+p+m-l)>0||r(n)<c)&&(t.top+=d+p+m)}},flipfit:{left:function(){d.flip.left.apply(this,arguments),d.fit.left.apply(this,arguments)},top:function(){d.flip.top.apply(this,arguments),d.fit.top.apply(this,arguments)}}};_.posit=function(h,p){var y,v,x,_,C,M,S=(p=e.extend({},p)).of,E=(A=p.within,O=A||window,I=n.isWindow(O),N=!!O&&9===O.nodeType,D=!I&&!N,F=m(O),{element:O,isWindow:I,isDocument:N,offset:D?g(A):{left:0,top:0},scrollLeft:k(O),scrollTop:w(O),width:F.width,height:F.height}),P=function(t){var e=t.isWindow||t.isDocument?"":i.css(t.element,"overflow-x"),n=t.isWindow||t.isDocument?"":i.css(t.element,"overflow-y"),r="scroll"===e||"auto"===e&&t.width<scrollWidth(t.element);return{width:"scroll"===n||"auto"===n&&t.height<scrollHeight(t.element)?l():0,height:r?l():0}}(E),z=(p.collision||"flip").split(" "),T={};var A,O,I,N,D,F;j=S,M=9===j.nodeType?{size:b(j),offset:{top:0,left:0}}:n.isWindow(j)?{size:b(j),offset:{top:w(j),left:k(j)}}:j.preventDefault?{size:{width:0,height:0},offset:{top:j.pageY,left:j.pageX}}:{size:b(j),offset:g(j)},S.preventDefault&&(p.at="left top");var j;v=M.size.width,x=M.size.height,_=M.offset,C=e.extend({},_),e.each(["my","at"],function(){var t,e,n=(p[this]||"").split(" ");1===n.length&&(n=s.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=s.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",t=a.exec(n[0]),e=a.exec(n[1]),T[this]=[t?t[0]:0,e?e[0]:0],p[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===z.length&&(z[1]=z[0]);"right"===p.at[0]?C.left+=v:"center"===p.at[0]&&(C.left+=v/2);"bottom"===p.at[1]?C.top+=x:"center"===p.at[1]&&(C.top+=x/2);return y=c(T.at,v,x),C.left+=y[0],C.top+=y[1],function(n){var i,s,o=m(n),a=o.width,l=o.height,u=f(n,"marginLeft"),h=f(n,"marginTop"),k=a+u+f(n,"marginRight")+P.width,w=l+h+f(n,"marginBottom")+P.height,b=e.extend({},C),M=c(T.my,o.width,o.height);"right"===p.my[0]?b.left-=a:"center"===p.my[0]&&(b.left-=a/2),"bottom"===p.my[1]?b.top-=l:"center"===p.my[1]&&(b.top-=l/2),b.left+=M[0],b.top+=M[1],i={marginLeft:u,marginTop:h},e.each(["left","top"],function(t,e){d[z[t]]&&d[z[t]][e](b,{targetWidth:v,targetHeight:x,elemWidth:a,elemHeight:l,collisionPosition:i,collisionWidth:k,collisionHeight:w,offset:[y[0]+M[0],y[1]+M[1]],my:p.my,at:p.at,within:E,elem:n})}),p.using&&(s=function(e){var i=_.left-b.left,s=i+v-a,o=_.top-b.top,u=o+x-l,h={target:{element:S,left:_.left,top:_.top,width:v,height:x},element:{element:n,left:b.left,top:b.top,width:a,height:l},horizontal:s<0?"left":i>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};v<a&&r(i+s)<v&&(h.horizontal="center"),x<l&&r(o+u)<x&&(h.vertical="middle"),t(r(i),r(s))>t(r(o),r(u))?h.important="horizontal":h.important="vertical",p.using.call(this,e,h)}),g(n,e.extend(b,{using:s}))}(h)}}(),t.attach("domx.geom",_)}),t("skylark-domx-geom/main",["skylark-langx/langx","./geom","skylark-domx-velm","skylark-domx-query"],function(t,e,n,i){return n.delegate(["borderExtents","boundingPosition","boundingRect","clientHeight","clientSize","clientWidth","contentRect","height","marginExtents","marginRect","marginSize","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop","size","width"],e),i.fn.offset=i.wraps.wrapper_value(e.pagePosition,e,e.pagePosition),i.fn.scrollTop=i.wraps.wrapper_value(e.scrollTop,e),i.fn.scrollLeft=i.wraps.wrapper_value(e.scrollLeft,e),i.fn.position=function(n){if(!this.length)return this;if(n)return n.of&&n.of.length&&((n=t.clone(n)).of=n.of[0]),this.each(function(){e.posit(this,n)});var i=this[0];return e.relativePosition(i)},i.fn.offsetParent=i.wraps.wrapper_map(e.offsetParent,e),i.fn.size=i.wraps.wrapper_value(e.size,e),i.fn.width=i.wraps.wrapper_value(e.width,e,e.width),i.fn.height=i.wraps.wrapper_value(e.height,e,e.height),i.fn.clientSize=i.wraps.wrapper_value(e.clientSize,e.clientSize),["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});i.fn["outer"+n]=function(n,i){if(arguments.length?"boolean"!=typeof n&&(i=n,n=!1):(n=!1,i=void 0),void 0===i){var r=this[0];if(!r)return;var s=e.size(r);if(n){var o=e.marginExtents(r);s.width=s.width+o.left+o.right,s.height=s.height+o.top+o.bottom}return"width"===t?s.width:s.height}return this.each(function(r,s){var o={},a=e.marginExtents(s);"width"===t?(o.width=i,n&&(o.width=o.width-a.left-a.right)):(o.height=i,n&&(o.height=o.height-a.top-a.bottom)),e.size(s,o)})}}),i.fn.innerWidth=i.wraps.wrapper_value(e.clientWidth,e,e.clientWidth),i.fn.innerHeight=i.wraps.wrapper_value(e.clientHeight,e,e.clientHeight),e}),t("skylark-domx-geom",["skylark-domx-geom/main"],function(t){return t}),t("skylark-domx-fx/fx",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){function n(){return n}return e.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),t.attach("domx.fx",n)}),t("skylark-domx-fx/animate",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./fx"],function(t,e,n,i,r,s,o){var a,l,u,h,c,f,d,p=e.normalizeCssEvent("AnimationEnd"),m=e.normalizeCssEvent("TransitionEnd"),y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,g=e.css3PropPrefix+"transform",v={};return v[a=e.normalizeCssProperty("animation-name")]=v[l=e.normalizeCssProperty("animation-duration")]=v[e.normalizeCssProperty("animation-delay")]=v[u=e.normalizeCssProperty("animation-timing-function")]="",v[h=e.normalizeCssProperty("transition-property")]=v[c=e.normalizeCssProperty("transition-duration")]=v[d=e.normalizeCssProperty("transition-delay")]=v[f=e.normalizeCssProperty("transition-timing-function")]="",o.animate=function(e,n,x,k,w,b){var _,C,M,S={},E=[],P="",z=this,T=!1,A=!1;t.isPlainObject(x)&&(k=x.easing,w=x.complete,b=x.delay,x=x.duration);t.isString(x)&&(x=o.speeds[x]);void 0===x&&(x=o.speeds.normal);x/=1e3,o.off&&(x=0);t.isFunction(k)?(w=k,eace="swing"):k=k||"swing";b?b/=1e3:b=0;if(t.isString(n))S[a]=n,S[l]=x+"s",S[u]=k,C=p;else{for(_ in n){var O=n[_];if(y.test(_))P+=_+"("+O+") ";else{if("scrollTop"===_&&(A=!0),"clip"==_&&t.isPlainObject(O)){if(S[_]="rect("+O.top+"px,"+O.right+"px,"+O.bottom+"px,"+O.left+"px)","auto"==r.css(e,"clip")){var I=i.size(e);r.css(e,"clip","rect(0px,"+I.width+"px,"+I.height+"px,0px)"),!0}}else S[_]=O;E.push(t.dasherize(_))}}C=m}P&&(S[g]=P,E.push(g));x>0&&t.isPlainObject(n)&&(S[h]=E.join(", "),S[c]=x+"s",S[d]=b+"s",S[f]=k);M=function(t){if(T=!0,t){if(t.target!==t.currentTarget)return;s.off(t.target,C,M)}else s.off(e,p,M);r.css(e,v),w&&w.call(this)},x>0&&(s.on(e,C,M),t.debounce(function(){T||M.call(z)},1e3*(x+b)+25)());e.clientLeft,r.css(e,S),x<=0&&t.debounce(function(){T||M.call(z)},0)();A&&scrollToTop(e,n.scrollTop,x,w);return this}}),t("skylark-domx-fx/bounce",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./fx","./animate"],function(t,e,n,i,r){return i.bounce=function(i,s,o){var a,l,u,h,c=s.mode,f="hide"===c,d="show"===c,p=s.direction||"up",m=s.distance,y=s.times||5,g=2*y+(d||f?1:0),v=s.duration/g,x=s.easing,k="up"===p||"down"===p?"top":"left",w="up"===p||"left"===p,b=0,_=t.Deferred,C=[];if(u=n.css(i,k),!m){var M=e.size(i);m=("top"===k?M.height:M.width)/3}h=e.relativePosition(i)[k],d&&((l={opacity:1})[k]=u,n.css(i,"opacity",0),n.css(i,k,h+(w?2*-m:2*m)),C.push(S(i,l,v,x)));f&&(m/=Math.pow(2,y-1));function S(t,e,n,i){return function(){var s=new _;return r(t,e,n,i,function(){s.resolve()}),s.promise}}for((l={})[k]=u;b<y;b++)(a={})[k]=h+(w?-m:m),C.push(S(i,a,v,x)),C.push(S(i,l,v,x)),m=f?2*m:m/2;f&&((a={opacity:0})[k]=h+(w?-1*m:m),C.push(S(i,a,v,x)));return C.push(o),C.reduce(function(t,e,n,i){return t.then(e)},_.resolve()),this}}),t("skylark-domx-fx/emulateTransitionEnd",["skylark-langx/langx","skylark-domx-eventer","./fx"],function(t,e,n){return n.emulateTransitionEnd=function(t,n){var i=!1;e.one(t,"transitionEnd",function(){i=!0});return setTimeout(function(){i||e.trigger(t,browser.support.transition.end)},n),this}}),t("skylark-domx-fx/show",["skylark-langx/langx","skylark-domx-styler","./fx","./animate"],function(t,e,n,i){return n.show=function(n,r,s){e.show(n),r&&(!s&&t.isFunction(r)&&(s=r,r="normal"),e.css(n,"opacity",0),i(n,{opacity:1,scale:"1,1"},r,s));return this}}),t("skylark-domx-fx/hide",["skylark-langx/langx","skylark-domx-styler","./fx","./animate"],function(t,e,n,i){return n.hide=function(n,r,s){r?(!s&&t.isFunction(r)&&(s=r,r="normal"),i(n,{opacity:0,scale:"0,0"},r,function(){e.hide(n),s&&s.call(n)})):e.hide(n);return this}}),t("skylark-domx-fx/explode",["skylark-langx/langx","skylark-domx-styler","skylark-domx-geom","skylark-domx-noder","skylark-domx-query","./fx","./animate","./show","./hide"],function(t,e,n,i,r,s,o,a,l){return s.explode=function(t,i,s){e.show(t),e.css(t,"visibility","hidden");var o,a,l,u,h,c=i.pieces?Math.round(Math.sqrt(i.pieces)):3,f=c,d="show"===i.mode,p=n.pagePosition(t),m=n.marginSize(t),y=Math.ceil(m.width/f),g=Math.ceil(m.height/c),v=[];function x(){v.push(this),v.length===c*f&&(e.css(t,{visibility:"visible"}),r(v).remove(),s())}for(var k=0;k<c;k++)for(l=p.top+k*g,h=k-(c-1)/2,o=0;o<f;o++)a=p.left+o*y,u=o-(f-1)/2,r(t).clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*y,top:-k*g}).parent().addClass(i.explodeClass||"ui-effects-explode").css({position:"absolute",overflow:"hidden",width:y,height:g,left:a+(d?u*y:0),top:l+(d?h*g:0),opacity:d?0:1}).animate({left:a+(d?0:u*y),top:l+(d?0:h*g),opacity:d?1:0},i.duration||500,i.easing,x);return this}}),t("skylark-domx-fx/fade",["skylark-langx/langx","skylark-domx-styler","./fx","./animate"],function(t,e,n,i){return n.fade=function(e,n,r,s){t.isFunction(r)&&(s=r,r={});return i(e,{opacity:n},(r=r||{}).duration,r.easing,s),this}}),t("skylark-domx-fx/fadeIn",["skylark-langx/langx","skylark-domx-styler","./fx","./fade"],function(t,e,n,i){return n.fadeIn=function(t,n,r){var s=e.css(t,"opacity");s>0?e.css(t,"opacity",0):s=1;return e.show(t),i(t,s,n,r),this}}),t("skylark-domx-fx/fadeOut",["skylark-langx/langx","skylark-domx-styler","./fx","./fade"],function(t,e,n,i){return n.fadeOut=function(t,e,n){return i(t,0,e,n),this}}),t("skylark-domx-fx/fadeToggle",["skylark-langx/langx","skylark-domx-styler","./fx","./fadeIn","./fadeOut"],function(t,e,n,i,r){return n.fadeToggle=function(t,n,s,o){e.isInvisible(t)?i(t,n,s,o):r(t,n,s,o);return this}}),t("skylark-domx-fx/pulsate",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./fx","./animate"],function(t,e,n,i,r){return i.pulsate=function(e,i,s){var o=i.mode,a="show"===o||!o,l=a||"hide"===o,u=2*(i.times||5)+(l?1:0),h=i.duration/u,c=0,f=1;(a||n.isInvisible(e))&&(n.css(e,"opacity",0),n.show(e),c=1);var d=t.Deferred,p=[];function m(t,e,n,i){return function(){var s=new d;return r(t,e,n,i,function(){s.resolve()}),s.promise}}for(;f<u;f++)p.push(m(e,{opacity:c},h,i.easing)),c=1-c;return p.push(m(e,{opacity:c},h,i.easing)),p.push(s),p.reduce(function(t,e,n,i){return t.then(e)},d.resolve()),this}}),t("skylark-domx-fx/shake",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./fx","./animate"],function(t,e,n,i,r){return i.shake=function(n,i,s){var o=1,a=i.direction||"left",l=i.distance||20,u=i.times||3,h=2*u+1,c=Math.round(i.duration/h),f="up"===a||"down"===a?"top":"left",d="up"===a||"left"===a,p={},m={},y={},g={},v=t.Deferred;function x(t,e,n,i){return function(){var s=new v;return r(t,e,n,i,function(){s.resolve()}),s.promise}}for(start=e.relativePosition(n)[f],funcs=[],p[f]=start,m[f]=start+(d?-1:1)*l,y[f]=m[f]+(d?1:-1)*l*2,g[f]=y[f]+(d?-1:1)*l*2,funcs.push(x(n,m,c,i.easing));o<u;o++)funcs.push(x(n,y,c,i.easing)),funcs.push(x(n,g,c,i.easing));return funcs.push(x(n,p,c/2,i.easing)),funcs.push(s),funcs.reduce(function(t,e,n,i){return t.then(e)},v.resolve()),this}}),t("skylark-domx-fx/slide",["skylark-langx/langx","skylark-domx-styler","./fx","./animate"],function(t,e,n,i){return n.slide=function(r,s,o){t.isFunction(s)&&(o=s,s={});var a=(s=s||{}).direction||"down",l="up"===a||"left"===a,u="up"===a||"down"===a,h=s.duration||n.speeds.normal,c=e.css(r,"position");if(l){if(e.isInvisible(r))return this}else e.show(r),e.css(r,{position:"absolute",visibility:"hidden"});if(u){var f=e.css(r,"margin-top"),d=e.css(r,"margin-bottom"),p=e.css(r,"padding-top"),m=e.css(r,"padding-bottom"),y=e.css(r,"height");l?(e.css(r,{visibility:"visible",overflow:"hidden",height:y,marginTop:f,marginBottom:d,paddingTop:p,paddingBottom:m}),i(r,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:h,queue:!1,complete:function(){e.hide(r),e.css(r,{visibility:"visible",overflow:"hidden",height:y,marginTop:f,marginBottom:d,paddingTop:p,paddingBottom:m}),o&&o.apply(r)}})):(e.css(r,{position:c,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),i(r,{height:y,marginTop:f,marginBottom:d,paddingTop:p,paddingBottom:m},{duration:h,complete:function(){o&&o.apply(r)}}))}else{var g=e.css(r,"margin-left"),v=e.css(r,"margin-right"),x=e.css(r,"padding-left"),k=e.css(r,"padding-right"),w=e.css(r,"width");l?(e.css(r,{visibility:"visible",overflow:"hidden",width:w,marginLeft:g,marginRight:v,paddingLeft:x,paddingRight:k}),i(r,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:h,queue:!1,complete:function(){e.hide(r),e.css(r,{visibility:"visible",overflow:"hidden",width:w,marginLeft:g,marginRight:v,paddingLeft:x,paddingRight:k}),o&&o.apply(r)}})):(e.css(r,{position:c,visibility:"visible",overflow:"hidden",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),i(r,{width:w,marginLeft:g,marginRight:v,paddingLeft:x,paddingRight:k},{duration:h,complete:function(){o&&o.apply(r)}}))}return this}}),t("skylark-domx-fx/slideDown",["./fx","./slide"],function(t,e){return t.slideDown=function(t,n,i){return e(t,{direction:"down",duration:n},i)}}),t("skylark-domx-fx/slideUp",["./fx","./slide"],function(t,e){return t.slideUp=function(t,n,i){return e(t,{direction:"up",duration:n},i)}}),t("skylark-domx-fx/slideToggle",["skylark-langx/langx","skylark-domx-geom","./fx","./slideDown","./slideUp"],function(t,e,n,i,r){return n.slideToggle=function(t,n,s){0==e.height(t)?i(t,n,s):r(t,n,s);return this}}),t("skylark-domx-fx/throb",["skylark-langx/langx","skylark-domx-styler","skylark-domx-noder","./fx","./animate"],function(t,e,n,i,r){return i.throb=function(t,i){var r,s=(i=i||{}).text,o=(i.style,i.time),a=i.callback,l=n.createElement("div",{class:i.className||"throbber"}),u=n.createElement("div",{class:i.throb&&i.throb.className||"throb"}),h=n.createTextNode(s||""),c=function(){r&&(clearTimeout(r),r=null),l&&(n.remove(l),l=null)};i.style&&e.css(l,i.style);u.appendChild(h),l.appendChild(u),t.appendChild(l),o&&(r=setTimeout(function(){c(),a&&a()},o));return{remove:c,update:function(t){t&&t.text&&l&&(h.nodeValue=t.text)}}}}),t("skylark-domx-fx/toggle",["skylark-langx/langx","skylark-domx-styler","./fx","./show","./hide"],function(t,e,n,i,r){return n.toggle=function(t,n,s){e.isInvisible(t)?i(t,n,s):r(t,n,s);return this}}),t("skylark-domx-fx/main",["./fx","skylark-domx-velm","skylark-domx-query","./animate","./bounce","./emulateTransitionEnd","./explode","./fadeIn","./fadeOut","./fade","./fadeToggle","./hide","./pulsate","./shake","./show","./slide","./slideDown","./slideToggle","./slideUp","./throb","./toggle"],function(t,e,n){return e.delegate(["animate","emulateTransitionEnd","fadeIn","fadeOut","fade","fadeToggle","hide","scrollToTop","slideDown","slideToggle","slideUp","show","toggle"],t),n.fn.hide=n.wraps.wrapper_every_act(t.hide,t),n.fn.animate=n.wraps.wrapper_every_act(t.animate,t),n.fn.emulateTransitionEnd=n.wraps.wrapper_every_act(t.emulateTransitionEnd,t),n.fn.show=n.wraps.wrapper_every_act(t.show,t),n.fn.hide=n.wraps.wrapper_every_act(t.hide,t),n.fn.toogle=n.wraps.wrapper_every_act(t.toogle,t),n.fn.fadeTo=n.wraps.wrapper_every_act(t.fadeTo,t),n.fn.fadeIn=n.wraps.wrapper_every_act(t.fadeIn,t),n.fn.fadeOut=n.wraps.wrapper_every_act(t.fadeOut,t),n.fn.fadeToggle=n.wraps.wrapper_every_act(t.fadeToggle,t),n.fn.slideDown=n.wraps.wrapper_every_act(t.slideDown,t),n.fn.slideToggle=n.wraps.wrapper_every_act(t.slideToggle,t),n.fn.slideUp=n.wraps.wrapper_every_act(t.slideUp,t),t}),t("skylark-domx-fx",["skylark-domx-fx/main"],function(t){return t}),t("skylark-domx-plugins/plugins",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-funcs","skylark-langx-events/Emitter","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-fx","skylark-domx-query","skylark-domx-velm"],function(t,e,n,i,r,s,o,a,l,u,h,c,f,d){"use strict";var p=Array.prototype.slice,m=(Array.prototype.concat,{}),y={};function g(t,e,n){var i=e.split(":"),r=i[1];e=i[0],r||(r=e);var s=o.data(t,r);if("instance"===n)return s;if("destroy"===n){if(!s)throw new Error("The plugin instance is not existed");s.destroy(),s=void 0}else if(s)n&&s.reset(n);else{if(void 0!==n&&"object"!=typeof n)throw new Error("The options must be a plain object");var a=m[e];s=new a(t,n),o.data(t,r,s)}return s}var v=r.inherit({klassName:"Plugin",_construct:function(t,e){this._elm=t,this._initOptions(e)},_initOptions:function(t){var e=this.constructor,i=e.cache=e.cache||{},r=i.defaults;if(!r){var s=[];do{if(s.unshift(e),e===v)break;e=e.superclass}while(e);r=i.defaults={};for(var o=0;o<s.length;o++)(e=s[o]).prototype.hasOwnProperty("options")&&n.mixin(r,e.prototype.options,!0),e.hasOwnProperty("options")&&n.mixin(r,e.options,!0)}return Object.defineProperty(this,"options",{value:n.mixin({},r,t,!0)}),this.options},destroy:function(){this._destroy(),this.unlistenTo(),o.removeData(this._elm,this.pluginName)},_destroy:i.noop,_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},elmx:function(t){return t=t||this._elm,d(t)},$:function(t){return t=t||this._elm,f(t)},option:function(t,e){var i,r,s,o=t;if(0===arguments.length)return n.mixin({},this.options);if("string"==typeof t)if(o={},i=t.split("."),t=i.shift(),i.length){for(r=o[t]=n.mixin({},this.options[t]),s=0;s<i.length-1;s++)r[i[s]]=r[i[s]]||{},r=r[i[s]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,this},getUID:function(t){t=t||"plugin";do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},elm:function(){return this._elm}});function x(){return x}return v.instantiate=function(t,e){return g(t,this.prototype.pluginName,e)},f.fn.plugin=function(t,e){var n,i=p.call(arguments,1),r=this;return this.each(function(){n=g.apply(r,[this,t].concat(i))}),n},d.partial("plugin",function(t,e){var n=p.call(arguments,1);return g.apply(this,[this._elm,t].concat(n))}),n.mixin(x,{instantiate:g,Plugin:v,register:function(t,n,i,r){var s=t.prototype.pluginName;if(m[s]=t,n){i&&e.isFunction(i)&&(r=i,i=null),i&&(s=s+":"+i);var o=y[n]=function(t,n){return function(i,r){var s=g(i,t,"instance");if("instance"===r)return s||null;if(!s&&(s=g(i,t,"object"==typeof r&&r||{}),"string"!=typeof r))return this;if(r){var o=p.call(arguments,1);if(n)return n.apply(s,o);if("string"==typeof r){var a=r;if(!s)throw new Error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'");if(!e.isFunction(s[a])||"_"===a.charAt(0))throw new Error("no such method '"+a+"' for "+t+" plugin instance");o=p.call(o,1);var l=s[a].apply(s,o);return l==s&&(l=void 0),l}}}}(s,r);f.fn[n]=function(t){var e=this;if(this.length||"instance"!==t){var n=p.call(arguments);this.each(function(){var t=p.call(n);t.unshift(this);var i=o.apply(void 0,t);void 0!==i&&(e=i)})}else e=void 0;return e},d.partial(n,function(t){var e=o(this._elm,t);return void 0===e&&(e=this),e})}},shortcuts:y}),t.attach("domx.plugins",x)}),t("skylark-domx-plugins/main",["./plugins"],function(t){return t}),t("skylark-domx-plugins",["skylark-domx-plugins/main"],function(t){return t}),t("skylark-blueimp-gallery/Gallery",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-plugins"],function(t,e,n,i){var r={views:[],items:[]},s=i.Plugin.inherit({klassName:"Gallery",pluginName:"blueimp.gallery",options:{typeProperty:"type",titleProperty:"title",altTextProperty:"alt",urlProperty:"href",srcsetProperty:"urlset"},_construct:function(t,e){this.overrided(t,e),this.$el=this.$(),this.el=this._elm,this._itemFactories={},this.items=this.options.items,this.setViewMode(this.options.view.mode,this.options.view.options)},setViewMode:function(t,e){this.viewMode=t;for(var n=0;n<r.views.length;n++)if(r.views[n].name===t){this.view=new r.views[n].ctor(this,e);break}},getItemUrl:function(t){return s.getItemProperty(t,this.options.urlProperty)},getItemTitle:function(t){return s.getItemProperty(t,this.options.titleProperty)},addItems:function(t){t.concat||(t=Array.prototype.slice.call(t)),this.items.concat||(this.items=Array.prototype.slice.call(this.items)),this.items=this.items.concat(t),this.num=this.items.length,this.trigger("itemsChanged")},renderItem:function(t,e){var n=t&&s.getItemProperty(t,this.options.typeProperty);n&&(n=n.split("/")[0]),n||(n="image");var i=this._itemFactories[n];if(!i)for(var o=0;o<r.items.length;o++)if(r.items[o].mimeType===n){i=this._itemFactories[n]=new r.items[o].ctor(this);break}if(!i)throw new Error("invalid type:"+n);var a=i.render(t,e),l=s.getItemProperty(t,this.options.srcsetProperty);return l&&a.setAttribute("srcset",l),a},isRunnable:function(t){},playItem:function(t){}});e.mixin(s,{getNestedProperty:function(t,e){return e.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(e,n,i,r,s){var o=s||n||i||r&&parseInt(r,10);e&&t&&(t=t[o])}),t},getDataProperty:function(t,e){var n,i;if(t.dataset?(n=e.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()}),i=t.dataset[n]):t.getAttribute&&(i=t.getAttribute("data-"+e.replace(/([A-Z])/g,"-$1").toLowerCase())),"string"==typeof i){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(i))try{return $.parseJSON(i)}catch(t){}return i}},getItemProperty:function(t,e){var n=this.getDataProperty(t,e);return void 0===n&&(n=t[e]),void 0===n&&(n=this.getNestedProperty(t,e)),n}});var o=s.ViewBase=e.Evented.inherit({klassName:"ViewBase",options:{controlsClass:"skylark-blueimp-gallery-controls",fullScreen:!1},init:function(t,e){var i,r=this;this.gallery=t,this.initOptions(e),this.options.fullScreen&&n.fullScreen(this.container[0]),this.gallery.on("item.running",function(t){r.container.hasClass(r.options.controlsClass)?(i=!0,r.container.removeClass(r.options.controlsClass)):i=!1}),this.gallery.on("item.running",function(t){i&&r.container.addClass(r.options.controlsClass)})},initOptions:function(t){this.options=e.mixin({},o.prototype.options,t)},close:function(){n.fullScreen()===this.container[0]&&n.fullScreen(!1)}});i.register(s);var a=s.ItemFactoryBase=e.Evented.inherit({klassName:"ItemFactoryBase",options:{typeProperty:"type",titleProperty:"title",altTextProperty:"alt",urlProperty:"href",srcsetProperty:"urlset"},init:function(t,e){this.gallery=t,this.initOptions(e)},initOptions:function(t){this.options=e.mixin({},a.prototype.options,t)},setTimeout:function(t,e,n){var i=this;return t&&window.setTimeout(function(){t.apply(i,e||[])},n||0)},getNestedProperty:s.getNestedProperty,getDataProperty:s.getDataProperty,getItemProperty:s.getItemProperty});return s.installPlugin=function(t,e){var n=r[t];if(!n)throw new Error("Invalid paramerter!");n.push(e)},t.attach("intg.blueimp.Gallery",s)}),t("skylark-blueimp-gallery/helper",["skylark-langx/langx","skylark-domx-query"],function(t,e){"use strict";return e.extend=t.mixin,e}),t("skylark-blueimp-gallery/plugins/items/image",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","../../Gallery"],function(t,e,n,i){var r=i.ItemFactoryBase.inherit({klassName:"ImageItemFactory",options:{stretchImages:!1},initOptions:function(e){this.overrided(),this.options=t.mixin(this.options,r.prototype.options,e)},render:function(t,i){var r,s,o,a,l=e.createElement("img"),u=(this.gallery,t),h=this.options.stretchImages;return"string"!=typeof u&&(u=this.getItemProperty(t,this.options.urlProperty),o=this.getItemProperty(t,this.options.titleProperty),a=this.getItemProperty(t,this.options.altTextProperty)||o),!0===h&&(h="contain"),h?s=e.createElement("div"):(s=l,l.draggable=!1),o&&(s.title=o),a&&(s.alt=a),n(l).on("load error",function t(e){r||(e={type:e.type,target:s},r=!0,n(l).off("load error",t),h&&"load"===e.type&&(s.style.background='url("'+u+'") center no-repeat',s.style.backgroundSize=h),i(e))}),l.src=u,s}}),s={name:"image",mimeType:"image",ctor:r};return i.installPlugin("items",s),s}),t("skylark-blueimp-gallery/plugins/items/video",["skylark-langx/langx","skylark-domx-noder","skylark-domx-eventer","skylark-domx-query","../../Gallery"],function(t,e,n,i,r){"use strict";var s=r.ItemFactoryBase.inherit({klassName:"VideoItemFactory",options:{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"},initOptions:function(e){this.overrided(),this.options=t.mixin(this.options,s.prototype.options,e)},handleSlide:function(t){handleSlide.call(this,t),this.playingVideo&&this.playingVideo.pause()},render:function(t,r,s){var o,a,l,u,h=this,c=this.options,f=e.createElement("div"),d=i(f),p=[{type:"error",target:f}],m=s||document.createElement("video"),y=this.getItemProperty(t,c.urlProperty),g=this.getItemProperty(t,c.typeProperty),v=this.getItemProperty(t,c.titleProperty),x=this.getItemProperty(t,this.options.altTextProperty)||v,k=this.getItemProperty(t,c.videoPosterProperty),w=this.getItemProperty(t,c.videoSourcesProperty);if(d.addClass(c.videoContentClass),v&&(f.title=v),m.canPlayType)if(y&&g&&m.canPlayType(g))m.src=y;else if(w)for(;w.length;)if(a=w.shift(),y=this.getItemProperty(a,c.urlProperty),g=this.getItemProperty(a,c.typeProperty),y&&g&&m.canPlayType(g)){m.src=y;break}return k&&(m.poster=k,o=e.createElement("img"),i(o).addClass(c.toggleClass),o.src=k,o.draggable=!1,o.alt=x,f.appendChild(o)),(l=document.createElement("a")).setAttribute("target","_blank"),s||l.setAttribute("download",v),l.href=y,m.src&&(m.controls=!0,(s||i(m)).on("error",function(){h.setTimeout(r,p)}).on("pause",function(){m.seeking||(u=!1,d.removeClass(h.options.videoLoadingClass).removeClass(h.options.videoPlayingClass),h.gallery.trigger("item.pause",{item:h}),delete h.playingVideo,h.interval&&h.play())}).on("playing",function(){u=!1,d.removeClass(h.options.videoLoadingClass).addClass(h.options.videoPlayingClass),h.gallery.trigger("item.running",{item:h})}).on("play",function(){window.clearTimeout(h.timeout),u=!0,d.addClass(h.options.videoLoadingClass),h.playingVideo=m,h.gallery.trigger("item.run",{item:h})}),i(l).on("click",function(t){n.stop(t),u?m.pause():m.play()}),f.appendChild(s&&s.element||m)),f.appendChild(l),this.setTimeout(r,[{type:"load",target:f}]),f}}),o={name:"video",mimeType:"video",ctor:s};return r.installPlugin("items",o),o}),t("skylark-blueimp-gallery/plugins/items/vimeo",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","../../Gallery","./video"],function(t,e,n,i,r){"use strict";var s=t.Evented.inherit({klassName:"VimeoPlayer",init:function(t,e,n,i){this.url=t,this.videoId=e,this.playerId=n,this.clickToPlay=i,this.element=document.createElement("div"),this.listeners={}},canPlayType:function(){return!0},on:function(t,e){return this.listeners[t]=e,this},loadAPI:function(){var t,e,i=this,r="//f.vimeocdn.com/js/froogaloop2.min.js",s=document.getElementsByTagName("script"),o=s.length;function a(){!e&&i.playOnReady&&i.play(),e=!0}for(;o;)if(s[o-=1].src===r){t=s[o];break}t||((t=document.createElement("script")).src=r),n(t).on("load",a),s[0].parentNode.insertBefore(t,s[0]),/loaded|complete/.test(t.readyState)&&a()},onReady:function(){var t=this;this.ready=!0,this.player.addEvent("play",function(){t.hasPlayed=!0,t.onPlaying()}),this.player.addEvent("pause",function(){t.onPause()}),this.player.addEvent("finish",function(){t.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var t=document.createElement("iframe");t.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),t.id=this.playerId,this.element.parentNode.replaceChild(t,this.element),this.element=t},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",function(){t.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),o=0,a=r.ctor.inherit({klassName:"VimeoItemFactory",VimeoPlayer:s,options:{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0},initOptions:function(e){this.overrided(),this.options=t.mixin(this.options,a.prototype.options,e)},render:function(t,e){var n=this.options,i=this.getItemProperty(t,n.vimeoVideoIdProperty);if(i)return void 0===this.getItemProperty(t,n.urlProperty)&&(t[n.urlProperty]="//vimeo.com/"+i),o+=1,this.overrided(t,e,new s(n.vimeoPlayerUrl,i,n.vimeoPlayerIdPrefix+o,n.vimeoClickToPlay))}}),l={name:"vimeo",mimeType:"vimeo",ctor:a};return i.installPlugin("items",l),l}),t("skylark-blueimp-gallery/plugins/items/youtube",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","../../Gallery","./video"],function(t,e,n,i,r){"use strict";var s=t.Evented.inherit({klassName:"YouTubePlayer",init:function(t,e,n){this.videoId=t,this.playerVars=e,this.clickToPlay=n,this.element=document.createElement("div")},canPlayType:function(){return!0},loadAPI:function(){var t,e=this,n=window.onYouTubeIframeAPIReady,i="https://www.youtube.com/iframe_api",r=document.getElementsByTagName("script"),s=r.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),e.playOnReady&&e.play()};s;)if(r[s-=1].src===i)return;(t=document.createElement("script")).src=i,r[0].parentNode.insertBefore(t,r[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){i.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){this.stateChange!==YT.PlayerState.PAUSED&&this.stateChange!==YT.PlayerState.ENDED||(this.listeners.pause(),delete this.playStatus)},onStateChange:function(t){switch(t.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=t.data},onError:function(t){this.trigger("error",t)},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){t.onReady()},onStateChange:function(e){t.onStateChange(e)},onError:function(e){t.onError(e)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),o=r.ctor.inherit({klassName:"YouTubeItemFactory",YouTubePlayer:s,options:{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0},initOptions:function(e){this.overrided(),this.options=t.mixin(this.options,o.prototype.options,e)},render:function(t,e){var n=this.options,i=this.getItemProperty(t,n.youTubeVideoIdProperty);if(i)return void 0===this.getItemProperty(t,n.urlProperty)&&(t[n.urlProperty]="//www.youtube.com/watch?v="+i),void 0===this.getItemProperty(t,n.videoPosterProperty)&&(t[n.videoPosterProperty]="//img.youtube.com/vi/"+i+"/maxresdefault.jpg"),this.overrided(t,e,new s(i,n.youTubePlayerVars,n.youTubeClickToPlay))}}),a={name:"youtube",mimeType:"youtube",ctor:o};return i.installPlugin("items",a),a}),t("skylark-blueimp-gallery/plugins/views/SliderView",["skylark-langx/langx","skylark-domx-noder","../../Gallery"],function(t,e,n){"use strict";var i=n.ViewBase.inherit({klassName:"SliderView",options:{container:null,slidesContainer:"div",titleElement:"h3",displayClass:"skylark-blueimp-gallery-display",singleClass:"skylark-blueimp-gallery-single",leftEdgeClass:"skylark-blueimp-gallery-left",rightEdgeClass:"skylark-blueimp-gallery-right",playingClass:"skylark-blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",displayTransition:!0,clearSlides:!0,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!1,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(t){var e,n={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},i={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(e in i)if(i.hasOwnProperty(e)&&void 0!==t.style[e]){n.transition=i[e],n.transition.name=e;break}function r(){var e,i,r=n.transition;document.body.appendChild(t),r&&(e=r.name.slice(0,-9)+"ransform",void 0!==t.style[e]&&(t.style[e]="translateZ(0)",i=window.getComputedStyle(t).getPropertyValue(r.prefix+"transform"),n.transform={prefix:r.prefix,name:e,translate:!0,translateZ:!!i&&"none"!==i})),void 0!==t.style.backgroundSize&&(n.backgroundSize={},t.style.backgroundSize="contain",n.backgroundSize.contain="contain"===window.getComputedStyle(t).getPropertyValue("background-size"),t.style.backgroundSize="cover",n.backgroundSize.cover="cover"===window.getComputedStyle(t).getPropertyValue("background-size")),document.body.removeChild(t)}return document.body?r():$(document).on("DOMContentLoaded",r),n}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,init:function(t,e){if(this.overrided(t,e),this.list=this.gallery.items,this.options.container=this.gallery.elm(),this.num=this.list.length,this.initStartIndex(),!1===this.initWidget())return!1;this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play()},slide:function(t,e){window.clearTimeout(this.timeout);var n,i,r,s=this.index;if(s!==t&&1!==this.num){if(e||(e=this.options.transitionSpeed),this.support.transform){for(this.options.continuous||(t=this.circle(t)),n=Math.abs(s-t)/(s-t),this.options.continuous&&(i=n,(n=-this.positions[this.circle(t)]/this.slideWidth)!==i&&(t=-n*this.num+t)),r=Math.abs(s-t)-1;r;)r-=1,this.move(this.circle((t>s?t:s)-r-1),this.slideWidth*n,0);t=this.circle(t),this.move(s,this.slideWidth*n,e),this.move(t,0,e),this.options.continuous&&this.move(this.circle(t-n),-this.slideWidth*n,0)}else t=this.circle(t),this.animate(s*-this.slideWidth,t*-this.slideWidth,e);this.onslide(t)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(t){var e=this;window.clearTimeout(this.timeout),this.interval=t||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(t,n){e.animationFrameId=e.requestAnimationFrame.call(window,function(){e.slide(t,n)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.cancelAnimationFrame&&(this.cancelAnimationFrame.call(window,this.animationFrameId),this.animationFrameId=null),this.container.removeClass(this.options.playingClass)},add:function(t){var e;for(t.concat||(t=Array.prototype.slice.call(t)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(t),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-t.length;e<this.num;e+=1)this.addSlide(e),this.positionSlide(e);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var t=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(t.displayClass).removeClass(t.singleClass).removeClass(t.leftEdgeClass).removeClass(t.rightEdgeClass),t.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var t=this;this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,function e(n){n.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleClose())}),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(t){return(this.num+t%this.num)%this.num},move:function(t,e,n){this.translateX(t,e,n),this.positions[t]=e},translate:function(t,e,n,i){var r=this.slides[t].style,s=this.support.transition,o=this.support.transform;r[s.name+"Duration"]=i+"ms",r[o.name]="translate("+e+"px, "+n+"px)"+(o.translateZ?" translateZ(0)":"")},translateX:function(t,e,n){this.translate(t,e,0,n)},translateY:function(t,e,n){this.translate(t,0,e,n)},animate:function(t,e,n){if(n)var i=this,r=(new Date).getTime(),s=window.setInterval(function(){var o=(new Date).getTime()-r;if(o>n)return i.slidesContainer[0].style.left=e+"px",i.ontransitionend(),void window.clearInterval(s);i.slidesContainer[0].style.left=(e-t)*(Math.floor(o/n*100)/100)+t+"px"},4);else this.slidesContainer[0].style.left=e+"px"},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(t){t.which&&1===t.which&&"VIDEO"!==t.target.nodeName&&"AUDIO"!==t.target.nodeName&&(t.preventDefault(),(t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchstart(t))},onmousemove:function(t){this.touchStart&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchmove(t))},onmouseup:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},onmouseout:function(t){if(this.touchStart){var e=t.target,n=t.relatedTarget;n&&(n===e||noder.contains(e,n))||this.onmouseup(t)}},ontouchstart:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e=(t.originalEvent||t).touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e,n,i=(t.originalEvent||t).touches[0],r=(t.originalEvent||t).scale,s=this.index;if(!(i.length>1||r&&1!==r))if(this.options.disableScroll&&t.preventDefault(),this.touchDelta={x:i.pageX-this.touchStart.x,y:i.pageY-this.touchStart.y},e=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(e)<Math.abs(this.touchDelta.y)),this.isScrolling)this.translateY(s,this.touchDelta.y+this.positions[s],0);else for(t.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?n=[this.circle(s+1),s,this.circle(s-1)]:(this.touchDelta.x=e/=!s&&e>0||s===this.num-1&&e<0?Math.abs(e)/this.slideWidth+1:1,n=[s],s&&n.push(s-1),s<this.num-1&&n.unshift(s+1));n.length;)s=n.pop(),this.translateX(s,e+this.positions[s],0)},ontouchend:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e,n,i,r,s,o=this.index,a=this.options.transitionSpeed,l=this.slideWidth,u=Number(Date.now()-this.touchStart.time)<250,h=u&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>l/2,c=!o&&this.touchDelta.x>0||o===this.num-1&&this.touchDelta.x<0,f=!h&&this.options.closeOnSwipeUpOrDown&&(u&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(c=!1),e=this.touchDelta.x<0?-1:1,this.isScrolling?f?this.close():this.translateY(o,0,a):h&&!c?(n=o+e,i=o-e,r=l*e,s=-l*e,this.options.continuous?(this.move(this.circle(n),r,0),this.move(this.circle(o-2*e),s,0)):n>=0&&n<this.num&&this.move(n,r,0),this.move(o,this.positions[o]+r,a),this.move(this.circle(i),this.positions[this.circle(i)]+r,a),o=this.circle(i),this.onslide(o)):this.options.continuous?(this.move(this.circle(o-1),-l,a),this.move(o,0,a),this.move(this.circle(o+1),l,a)):(o&&this.move(o-1,-l,a),this.move(o,0,a),o<this.num-1&&this.move(o+1,l,a))},ontouchcancel:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},ontransitionend:function(t){var e=this.slides[this.index];t&&e!==t.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(t){var e,n=t.target||t.srcElement,i=n&&n.parentNode;n&&i&&(e=this.getNodeIndex(i),$(i).removeClass(this.options.slideLoadingClass),"error"===t.type?($(i).addClass(this.options.slideErrorClass),this.elements[e]=3):this.elements[e]=2,n.clientHeight>this.container[0].clientHeight&&(n.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===i&&this.play(),this.setTimeout(this.options.onslidecomplete,[e,i]))},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),t.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(t),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.next())}},handleClick:function(t){var e=this.options,n=t.target||t.srcElement,i=n.parentNode;function r(t){return $(n).hasClass(t)||$(i).hasClass(t)}r(e.toggleClass)?(this.preventDefault(t),this.toggleControls()):r(e.prevClass)?(this.preventDefault(t),this.prev()):r(e.nextClass)?(this.preventDefault(t),this.next()):r(e.closeClass)?(this.preventDefault(t),this.close()):r(e.playPauseClass)?(this.preventDefault(t),this.toggleSlideshow()):i===this.slidesContainer[0]?e.closeOnSlideClick?(this.preventDefault(t),this.close()):e.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls()):i.parentNode&&i.parentNode===this.slidesContainer[0]&&e.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls())},onclick:function(t){if(!(this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)))return this.handleClick(t);delete this.touchDelta},updateEdgeClasses:function(t){t?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),t===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(t){this.options.continuous||this.updateEdgeClasses(t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(t),this.setTitle(t)},onslide:function(t){this.index=t,this.handleSlide(t),this.setTimeout(this.options.onslide,[t,this.slides[t]])},setTitle:function(t){var e=this.slides[t].firstChild,n=e.title||e.alt,i=this.titleElement;i.length&&(this.titleElement.empty(),n&&i[0].appendChild(document.createTextNode(n)))},setTimeout:function(t,e,n){var i=this;return t&&window.setTimeout(function(){t.apply(i,e||[])},n||0)},createElement:function(t,e){var n=this.gallery.renderItem(t,e);return $(n).addClass(this.options.slideContentClass),n},loadElement:function(t){this.elements[t]||(this.slides[t].firstChild?this.elements[t]=$(this.slides[t]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[t]=1,$(this.slides[t]).addClass(this.options.slideLoadingClass),this.slides[t].appendChild(this.createElement(this.list[t],this.proxyListener))))},loadElements:function(t){var e,n=Math.min(this.num,2*this.options.preloadRange+1),i=t;for(e=0;e<n;e+=1)i+=e*(e%2==0?-1:1),i=this.circle(i),this.loadElement(i)},unloadElements:function(t){var e,n;for(e in this.elements)this.elements.hasOwnProperty(e)&&(n=Math.abs(t-e))>this.options.preloadRange&&n+this.options.preloadRange<this.num&&(this.unloadSlide(e),delete this.elements[e])},addSlide:function(t){var e=this.slidePrototype.cloneNode(!1);e.setAttribute("data-index",t),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(t){var e=this.slides[t];e.style.width=this.slideWidth+"px",this.support.transform&&(e.style.left=t*-this.slideWidth+"px",this.move(t,this.index>t?-this.slideWidth:this.index<t?this.slideWidth:0,0))},initSlides:function(t){var e,n;for(t||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),$(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,e=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].clientWidth,this.slideHeight=this.container[0].clientHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",e&&this.resetSlides(),n=0;n<this.num;n+=1)e&&this.addSlide(n),this.positionSlide(n);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(t){var e,n;e=this.slides[t],null!==(n=e.firstChild)&&e.removeChild(n)},unloadAllSlides:function(){var t,e;for(t=0,e=this.slides.length;t<e;t++)this.unloadSlide(t)},toggleControls:function(){var t=this.options.controlsClass;this.container.hasClass(t)?this.container.removeClass(t):this.container.addClass(t)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(t){return parseInt(t.getAttribute("data-index"),10)},initStartIndex:function(){var t,e=this.gallery,n=this.options.index;if(n&&"number"!=typeof n)for(t=0;t<this.num;t+=1)if(this.list[t]===n||e.getItemUrl(this.list[t])===e.getItemUrl(n)){n=t;break}this.index=this.circle(parseInt(n,10)||0)},initEventListeners:function(){var t=this,e=this.slidesContainer;function n(e){var n=t.support.transition&&t.support.transition.end===e.type?"transitionend":e.type;t["on"+n](e)}$(window).on("resize",n),$(document.body).on("keydown",n),this.container.on("click",n),this.support.touch?e.on("touchstart touchmove touchend touchcancel",n):this.options.emulateTouchEvents&&this.support.transition&&e.on("mousedown mousemove mouseup mouseout",n),this.support.transition&&e.on(this.support.transition.end,n),this.proxyListener=n},destroyEventListeners:function(){var t=this.slidesContainer,e=this.proxyListener;$(window).off("resize",e),$(document.body).off("keydown",e),this.container.off("click",e),this.support.touch?t.off("touchstart touchmove touchend touchcancel",e):this.options.emulateTouchEvents&&this.support.transition&&t.off("mousedown mousemove mouseup mouseout",e),this.support.transition&&t.off(this.support.transition.end,e)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var t=this;return this.container=$(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,function e(n){n.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleOpen())}):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(e){this.overrided(t.mixin({},i.prototype.options,e)),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}});return n.installPlugin("views",{name:"slider",ctor:i,templates:{default:'<div class="slides"></div><h3 class="title"></h3><a class="prev"></a><a class="next"></a><a class="close"></a><a class="play-pause"></a><ol class="indicator"></ol>'}}),n.SliderView=i}),t("skylark-blueimp-gallery/plugins/views/CarouselView",["../../Gallery","./SliderView"],function(t,e){var n=e.inherit({klassName:"CarouselView",options:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},initOptions:function(t){var t=langx.mixin({},n.prototype.options,t);this.overrided(t)}});return t.installPlugin("views",{name:"carousel",ctor:n,templates:{default:'<div class="slides"></div><h3 class="title"></h3><a class="prev"></a><a class="next"></a><a class="close"></a><a class="play-pause"></a><ol class="indicator"></ol>'}}),n}),t("skylark-blueimp-gallery/plugins/views/LightBoxView",["skylark-langx/langx","../../Gallery","./SliderView"],function(t,e,n){var i=n.inherit({klassName:"LightBoxView",options:{hidePageScrollbars:!1,indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0},initOptions:function(e){var e=t.mixin({},i.prototype.options,e);this.overrided(e)},createIndicator:function(t){var n,i,r=this.gallery,s=this.indicatorPrototype.cloneNode(!1),o=r.getItemTitle(t),a=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(a&&(n=e.getItemProperty(t,a)),void 0===n&&(i=t.getElementsByTagName&&$(t).find("img")[0])&&(n=i.src),n&&(s.style.backgroundImage='url("'+n+'")')),o&&(s.title=o),s},addIndicator:function(t){if(this.indicatorContainer.length){var e=this.createIndicator(this.list[t]);e.setAttribute("data-index",t),this.indicatorContainer[0].appendChild(e),this.indicators.push(e)}},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=$(this.indicators[t]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(t){t||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),this.overrided(t)},addSlide:function(t){this.overrided(t),this.addIndicator(t)},resetSlides:function(){this.overrided(),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(t){var e=t.target||t.srcElement,n=e.parentNode;if(n===this.indicatorContainer[0])this.preventDefault(t),this.slide(this.getNodeIndex(e));else{if(n.parentNode!==this.indicatorContainer[0])return this.overrided(t);this.preventDefault(t),this.slide(this.getNodeIndex(n))}},handleSlide:function(t){this.overrided(t),this.setActiveIndicator(t)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.overrided()}});return e.installPlugin("views",{name:"lightbox",ctor:i,templates:{default:'<div class="slides"></div><h3 class="title"></h3><a class="prev"></a><a class="next"></a><a class="close"></a><ol class="indicator"></ol>'}}),i}),t("skylark-blueimp-gallery/main",["./Gallery","./helper","./plugins/items/image","./plugins/items/video","./plugins/items/vimeo","./plugins/items/youtube","./plugins/views/SliderView","./plugins/views/CarouselView","./plugins/views/LightBoxView"],function(t){return t}),t("skylark-blueimp-gallery",["skylark-blueimp-gallery/main"],function(t){return t})}(n,require),!r){var a=require("skylark-langx-ns");s?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-blueimp-gallery-all.js.map
